(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6701],{50939:(e,t,s)=>{Promise.resolve().then(s.bind(s,59997))},54165:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>m,Es:()=>x,L3:()=>h,c7:()=>u,lG:()=>a,rr:()=>p});var r=s(95155),n=s(12115),i=s(15452),l=s(25318),o=s(59434);let a=i.bL;i.l9;let c=i.ZL;i.bm;let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(i.hJ,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...n})});d.displayName=i.hJ.displayName;let m=n.forwardRef((e,t)=>{let{className:s,children:n,...a}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(d,{}),(0,r.jsxs)(i.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a,children:[n,(0,r.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=i.UC.displayName;let u=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};u.displayName="DialogHeader";let x=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};x.displayName="DialogFooter";let h=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(i.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",s),...n})});h.displayName=i.hE.displayName;let p=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(i.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",s),...n})});p.displayName=i.VY.displayName},59409:(e,t,s)=>{"use strict";s.d(t,{bq:()=>u,eb:()=>j,gC:()=>p,l6:()=>d,yv:()=>m});var r=s(95155),n=s(12115),i=s(31992),l=s(79556),o=s(77381),a=s(10518),c=s(59434);let d=i.bL;i.YJ;let m=i.WT,u=n.forwardRef((e,t)=>{let{className:s,children:n,...o}=e;return(0,r.jsxs)(i.l9,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...o,children:[n,(0,r.jsx)(i.In,{asChild:!0,children:(0,r.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=i.l9.displayName;let x=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(i.PP,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...n,children:(0,r.jsx)(o.A,{className:"h-4 w-4"})})});x.displayName=i.PP.displayName;let h=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(i.wn,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...n,children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})});h.displayName=i.wn.displayName;let p=n.forwardRef((e,t)=>{let{className:s,children:n,position:l="popper",...o}=e;return(0,r.jsx)(i.ZL,{children:(0,r.jsxs)(i.UC,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...o,children:[(0,r.jsx)(x,{}),(0,r.jsx)(i.LM,{className:(0,c.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,r.jsx)(h,{})]})})});p.displayName=i.UC.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(i.JU,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...n})}).displayName=i.JU.displayName;let j=n.forwardRef((e,t)=>{let{className:s,children:n,...l}=e;return(0,r.jsxs)(i.q7,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.VF,{children:(0,r.jsx)(a.A,{className:"h-4 w-4"})})}),(0,r.jsx)(i.p4,{children:n})]})});j.displayName=i.q7.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(i.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",s),...n})}).displayName=i.wv.displayName},59997:(e,t,s)=>{"use strict";s.r(t),s.d(t,{availableLearningElementTypes:()=>eI,default:()=>ez});var r=s(95155),n=s(12115),i=s(35695),l=s(6874),o=s.n(l),a=s(41855),c=s(30285),d=s(66695),m=s(54165),u=s(31526),x=s(60960),h=s(81008),p=s(94063),j=s(15300),v=s(45554),f=s(67270),g=s(81203),b=s(93223),y=s(12543),C=s(40295),w=s(20203),N=s(73926),k=s(15222),R=s(34301),_=s(87481),I=s(25711),S=s(59409),q=s(85057),z=s(62177),M=s(90221),A=s(55594),Y=s(62523),T=s(88539),V=s(17759);let B=A.Ik({id:A.Yj(),title:A.Yj().min(1,"Title is required"),url:A.Yj().url("Must be a valid URL (e.g., https://www.youtube.com/embed/VIDEO_ID or https://picsum.photos/seed/...).").min(1,"URL is required."),description:A.Yj().optional(),thumbnailUrl:A.Yj().url("Must be a valid URL for thumbnail.").optional().or(A.eu("")),duration:A.KC([A.Yj().regex(/^\d{1,2}:\d{2}$/,"Duration should be in MM:SS format."),A.eu("")]).optional()});function E(e){let{initialData:t,onSubmit:s,onCancel:n}=e,i=(0,z.mN)({resolver:(0,M.u)(B),defaultValues:t});return(0,r.jsx)(V.lV,{...i,children:(0,r.jsxs)("form",{onSubmit:i.handleSubmit(s),className:"space-y-6 p-1",children:[(0,r.jsx)(V.zB,{control:i.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Video Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.p,{placeholder:"Enter video title",...t})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:i.control,name:"url",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Video URL"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.p,{placeholder:"https://example.com/video.mp4",...t})}),(0,r.jsx)(V.Rr,{children:"Direct video link or embeddable URL (e.g., YouTube embed)."}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:i.control,name:"description",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Description (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.T,{placeholder:"Brief description of the video",...t,rows:3})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:i.control,name:"thumbnailUrl",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Thumbnail URL (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.p,{placeholder:"https://example.com/thumbnail.jpg",...t})}),(0,r.jsx)(V.Rr,{children:"URL for the video thumbnail image."}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:i.control,name:"duration",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Duration (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.p,{placeholder:"MM:SS (e.g., 10:35)",...t})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),(0,r.jsx)(c.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save Video"})]})]})})}let L=A.Ik({id:A.Yj(),title:A.Yj().min(1,"Title is required"),type:A.k5(["article","resource_link","policy_info","support_document"]),content:A.Yj().optional(),url:A.Yj().url("Must be a valid URL if type is resource_link or policy_info with URL.").optional().or(A.eu("")),imageUrl:A.Yj().url("Must be a valid URL for image.").optional().or(A.eu(""))}).refine(e=>"resource_link"!==e.type||!!e.url,{message:"URL is required for Resource Link type.",path:["url"]}).refine(e=>"article"!==e.type||!!e.content,{message:"Content is required for Article type.",path:["content"]});function D(e){let{initialData:t,onSubmit:s,onCancel:n}=e,i=(0,z.mN)({resolver:(0,M.u)(L),defaultValues:t}),l=i.watch("type");return(0,r.jsx)(V.lV,{...i,children:(0,r.jsxs)("form",{onSubmit:i.handleSubmit(s),className:"space-y-6 p-1",children:[(0,r.jsx)(V.zB,{control:i.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.p,{placeholder:"Enter content title",...t})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:i.control,name:"type",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Content Type"}),(0,r.jsxs)(S.l6,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(V.MJ,{children:(0,r.jsx)(S.bq,{children:(0,r.jsx)(S.yv,{placeholder:"Select content type"})})}),(0,r.jsxs)(S.gC,{children:[(0,r.jsx)(S.eb,{value:"article",children:"Article"}),(0,r.jsx)(S.eb,{value:"resource_link",children:"Resource Link"}),(0,r.jsx)(S.eb,{value:"policy_info",children:"Policy Info"}),(0,r.jsx)(S.eb,{value:"support_document",children:"Support Document"})]})]}),(0,r.jsx)(V.C5,{})]})}}),("article"===l||"policy_info"===l||"support_document"===l)&&(0,r.jsx)(V.zB,{control:i.control,name:"content",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"article"===l?"Article Content":"Content/Summary"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.T,{placeholder:"Enter text content or summary...",...t,rows:5})}),(0,r.jsx)(V.Rr,{children:"article"===l?"Full text of the article. In a full implementation, this would be a rich text editor allowing for formatting (bold, italics, lists), inline images, and embedding links.":"A summary or key details for this document."}),(0,r.jsx)(V.C5,{})]})}}),("resource_link"===l||"policy_info"===l||"support_document"===l)&&(0,r.jsx)(V.zB,{control:i.control,name:"url",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsxs)(V.lR,{children:["URL ","resource_link"===l?"":"(Optional)"]}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.p,{placeholder:"https://example.com/resource",...t})}),(0,r.jsx)(V.Rr,{children:"Link to the external resource or document."}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:i.control,name:"imageUrl",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Image URL (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.p,{placeholder:"https://example.com/image.jpg",...t})}),(0,r.jsx)(V.Rr,{children:"Optional image to display with the text content."}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),(0,r.jsx)(c.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save Content"})]})]})})}var O=s(77223),J=s(22346);let $=A.Ik({id:A.Yj(),text:A.Yj().min(1,"Item text is required"),itemType:A.k5(["checkbox","multiple_choice_single","multiple_choice_multiple","scale"]),options:A.YO(A.Ik({id:A.Yj(),text:A.Yj().min(1,"Option text is required"),value:A.KC([A.Yj(),A.ai()])})).optional(),category:A.Yj().optional(),details:A.Yj().optional()}),P=A.Ik({id:A.Yj(),title:A.Yj().min(1,"Checklist title is required"),description:A.Yj().optional(),type:A.k5(["readiness_assessment","child_relationship_assessment","generic_todo","self_reflection"]),items:A.YO($)}),U=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"item";return"".concat(e,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,7))};function F(e){let{initialData:t,onSubmit:s,onCancel:n}=e,i=(0,z.mN)({resolver:(0,M.u)(P),defaultValues:t}),{fields:l,append:o,remove:a,update:d}=(0,z.jz)({control:i.control,name:"items"}),m=i.watch("items"),u=e=>{var t;let s=m[e],r=[...s.options||[],{id:U("opt"),text:"",value:((null===(t=s.options)||void 0===t?void 0:t.length)||0)+1}];d(e,{...s,options:r})},x=(e,t)=>{var s;let r=m[e],n=null===(s=r.options)||void 0===s?void 0:s.filter((e,s)=>s!==t);d(e,{...r,options:n||[]})};return(0,r.jsx)(V.lV,{...i,children:(0,r.jsxs)("form",{onSubmit:i.handleSubmit(s),className:"space-y-6 p-1 max-h-[70vh] overflow-y-auto",children:[(0,r.jsx)(V.zB,{control:i.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Checklist Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.p,{placeholder:"Enter checklist title",...t})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:i.control,name:"description",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Description (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.T,{placeholder:"Brief description of the checklist",...t,rows:2})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:i.control,name:"type",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Checklist Type"}),(0,r.jsxs)(S.l6,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(V.MJ,{children:(0,r.jsx)(S.bq,{children:(0,r.jsx)(S.yv,{placeholder:"Select checklist type"})})}),(0,r.jsxs)(S.gC,{children:[(0,r.jsx)(S.eb,{value:"generic_todo",children:"Generic To-Do"}),(0,r.jsx)(S.eb,{value:"readiness_assessment",children:"Readiness Assessment"}),(0,r.jsx)(S.eb,{value:"child_relationship_assessment",children:"Child Relationship Assessment"}),(0,r.jsx)(S.eb,{value:"self_reflection",children:"Self Reflection"})]})]}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(J.w,{}),(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Checklist Items"}),l.map((e,t)=>{var s,n;return(0,r.jsxs)("div",{className:"p-4 border rounded-md space-y-3 relative bg-background shadow-sm",children:[(0,r.jsx)(V.zB,{control:i.control,name:"items.".concat(t,".text"),render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Item Text"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.p,{placeholder:"Checklist item text",...t})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:i.control,name:"items.".concat(t,".itemType"),render:e=>{let{field:s}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Item Type"}),(0,r.jsxs)(S.l6,{onValueChange:e=>{var r;s.onChange(e),"checkbox"===e?i.setValue("items.".concat(t,".options"),[]):!(null===(r=i.getValues("items.".concat(t,".options")))||void 0===r?void 0:r.length)&&(e.startsWith("multiple_choice")||"scale"===e)&&i.setValue("items.".concat(t,".options"),[{id:U("opt"),text:"Option 1",value:1}])},defaultValue:s.value,children:[(0,r.jsx)(V.MJ,{children:(0,r.jsx)(S.bq,{children:(0,r.jsx)(S.yv,{placeholder:"Select item type"})})}),(0,r.jsxs)(S.gC,{children:[(0,r.jsx)(S.eb,{value:"checkbox",children:"Checkbox"}),(0,r.jsx)(S.eb,{value:"multiple_choice_single",children:"Multiple Choice (Single)"}),(0,r.jsx)(S.eb,{value:"multiple_choice_multiple",children:"Multiple Choice (Multiple)"}),(0,r.jsx)(S.eb,{value:"scale",children:"Scale (e.g., 1-5)"})]})]}),(0,r.jsx)(V.C5,{})]})}}),((null===(s=i.watch("items.".concat(t,".itemType")))||void 0===s?void 0:s.startsWith("multiple_choice"))||"scale"===i.watch("items.".concat(t,".itemType")))&&(0,r.jsxs)("div",{className:"pl-4 border-l-2 ml-2 space-y-2",children:[(0,r.jsx)(V.lR,{className:"text-sm",children:"Options"}),null===(n=i.watch("items.".concat(t,".options")))||void 0===n?void 0:n.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(V.zB,{control:i.control,name:"items.".concat(t,".options.").concat(s,".text"),render:e=>{let{field:t}=e;return(0,r.jsx)(Y.p,{placeholder:"Option ".concat(s+1," text"),...t,className:"flex-grow"})}}),"scale"!==i.watch("items.".concat(t,".itemType"))&&(0,r.jsx)(V.zB,{control:i.control,name:"items.".concat(t,".options.").concat(s,".value"),render:e=>{let{field:t}=e;return(0,r.jsx)(Y.p,{type:"text",placeholder:"Value",...t,className:"w-20"})}}),(0,r.jsx)(c.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>x(t,s),children:(0,r.jsx)(O.A,{className:"h-4 w-4 text-destructive"})})]},e.id||s)),(0,r.jsxs)(c.$,{type:"button",variant:"outline",size:"sm",onClick:()=>u(t),children:[(0,r.jsx)(R.A,{className:"h-4 w-4 mr-2"})," Add Option"]})]}),(0,r.jsx)(V.zB,{control:i.control,name:"items.".concat(t,".category"),render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Category (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.p,{placeholder:"e.g., Work, Home",...t})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:i.control,name:"items.".concat(t,".details"),render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Details (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.T,{placeholder:"Additional details or instructions",...t,rows:1})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsxs)(c.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>a(t),className:"absolute top-2 right-2 text-destructive hover:bg-destructive/10",children:[(0,r.jsx)(O.A,{className:"h-4 w-4 mr-1"})," Remove Item"]})]},e.id)}),(0,r.jsxs)(c.$,{type:"button",variant:"outline",onClick:()=>o({id:U("item"),text:"",itemType:"checkbox",options:[]}),children:[(0,r.jsx)(R.A,{className:"h-4 w-4 mr-2"})," Add Checklist Item"]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 sticky bottom-0 bg-popover py-3 border-t",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),(0,r.jsx)(c.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save Checklist"})]})]})})}let Q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"item";return"".concat(e,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,7))},W=A.Ik({id:A.Yj(),title:A.Yj().min(1,"Title is required"),description:A.Yj().min(1,"Description is required"),userNotes:A.Yj().optional()}),G=W.extend({type:A.eu("todo_list"),todoItems:A.YO(A.Ik({id:A.Yj(),text:A.Yj().min(1,"To-do text is required")})).min(1,"At least one to-do item is required.")}),Z=W.extend({type:A.eu("journal_prompt")}),H=W.extend({type:A.eu("dialogue_activity"),dialoguePrompt:A.Yj().min(1,"Dialogue prompt is required"),dialogueChoices:A.YO(A.Ik({id:A.Yj(),text:A.Yj().min(1,"Choice text is required"),feedback:A.Yj().optional()})).min(1,"At least one dialogue choice is required.")}),X=W.extend({type:A.eu("conversational_response_practice"),dialoguePrompt:A.Yj().min(1,"Dialogue prompt for practice is required")}),K=A.gM("type",[G,Z,H,X]);function ee(e){var t,s,n,i;let{initialData:l,onSubmit:o,onCancel:a}=e,d=(0,z.mN)({resolver:(0,M.u)(K),defaultValues:l}),m=d.watch("type"),{fields:u,append:x,remove:h}=(0,z.jz)({control:d.control,name:"todoItems"}),{fields:p,append:j,remove:v}=(0,z.jz)({control:d.control,name:"dialogueChoices"});return(0,r.jsx)(V.lV,{...d,children:(0,r.jsxs)("form",{onSubmit:d.handleSubmit(o),className:"space-y-6 p-1 max-h-[70vh] overflow-y-auto",children:[(0,r.jsx)(V.zB,{control:d.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Action Item Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.p,{placeholder:"Enter action item title",...t})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:d.control,name:"description",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Description / Prompt"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.T,{placeholder:"Detailed description or prompt for the user",...t,rows:3})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:d.control,name:"type",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Action Item Type"}),(0,r.jsxs)(S.l6,{onValueChange:e=>{var s,r;t.onChange(e),"todo_list"!==e||(null===(s=d.getValues("todoItems"))||void 0===s?void 0:s.length)?"todo_list"!==e&&d.setValue("todoItems",void 0):d.setValue("todoItems",[{id:Q("todo"),text:""}]),"dialogue_activity"!==e||(null===(r=d.getValues("dialogueChoices"))||void 0===r?void 0:r.length)?"dialogue_activity"!==e&&(d.setValue("dialogueChoices",void 0),"conversational_response_practice"!==e&&d.setValue("dialoguePrompt",void 0)):(d.setValue("dialoguePrompt",d.getValues("description")||""),d.setValue("dialogueChoices",[{id:Q("choice"),text:"",feedback:""}])),"conversational_response_practice"!==e||d.getValues("dialoguePrompt")||d.setValue("dialoguePrompt",d.getValues("description")||"")},defaultValue:t.value,children:[(0,r.jsx)(V.MJ,{children:(0,r.jsx)(S.bq,{children:(0,r.jsx)(S.yv,{placeholder:"Select action item type"})})}),(0,r.jsxs)(S.gC,{children:[(0,r.jsx)(S.eb,{value:"todo_list",children:"To-Do List"}),(0,r.jsx)(S.eb,{value:"journal_prompt",children:"Journal Prompt"}),(0,r.jsx)(S.eb,{value:"dialogue_activity",children:"Dialogue Activity (Multiple Choice)"}),(0,r.jsx)(S.eb,{value:"conversational_response_practice",children:"Conversational Response Practice"})]})]}),(0,r.jsx)(V.C5,{})]})}}),"todo_list"===m&&(0,r.jsxs)("div",{className:"space-y-3 p-3 border rounded-md bg-muted/30",children:[(0,r.jsx)(V.lR,{children:"To-Do Items"}),u.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(V.zB,{control:d.control,name:"todoItems.".concat(t,".text"),render:e=>{let{field:s}=e;return(0,r.jsx)(Y.p,{placeholder:"To-do item ".concat(t+1),...s,className:"flex-grow"})}}),(0,r.jsx)(c.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>h(t),children:(0,r.jsx)(O.A,{className:"h-4 w-4 text-destructive"})})]},e.id)),(0,r.jsxs)(c.$,{type:"button",variant:"outline",size:"sm",onClick:()=>x({id:Q("todo"),text:""}),children:[(0,r.jsx)(R.A,{className:"h-4 w-4 mr-2"})," Add To-Do Item"]}),(0,r.jsx)(V.C5,{children:null===(s=d.formState.errors)||void 0===s?void 0:null===(t=s.todoItems)||void 0===t?void 0:t.message})]}),("dialogue_activity"===m||"conversational_response_practice"===m)&&(0,r.jsx)(V.zB,{control:d.control,name:"dialoguePrompt",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{className:"p-3 border rounded-md bg-muted/30",children:[(0,r.jsx)(V.lR,{children:"dialogue_activity"===m?"Dialogue Activity Prompt":"Practice Scenario Prompt"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.T,{placeholder:"Enter the main prompt or scenario",...t,rows:3})}),(0,r.jsx)(V.C5,{})]})}}),"dialogue_activity"===m&&(0,r.jsxs)("div",{className:"space-y-3 p-3 border rounded-md bg-muted/30",children:[(0,r.jsx)(V.lR,{children:"Dialogue Choices"}),p.map((e,t)=>(0,r.jsxs)("div",{className:"space-y-2 p-2 border rounded bg-background",children:[(0,r.jsx)(V.zB,{control:d.control,name:"dialogueChoices.".concat(t,".text"),render:e=>{let{field:s}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsxs)(V.lR,{children:["Choice ",t+1," Text"]}),(0,r.jsx)(Y.p,{placeholder:"Text for this choice",...s}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:d.control,name:"dialogueChoices.".concat(t,".feedback"),render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Feedback for this choice (Optional)"}),(0,r.jsx)(T.T,{placeholder:"Feedback if user selects this",...t,rows:2})]})}}),(0,r.jsxs)(c.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>v(t),className:"text-destructive float-right",children:[(0,r.jsx)(O.A,{className:"h-4 w-4 mr-1"}),"Remove Choice"]})]},e.id)),(0,r.jsxs)(c.$,{type:"button",variant:"outline",size:"sm",onClick:()=>j({id:Q("choice"),text:"",feedback:""}),children:[(0,r.jsx)(R.A,{className:"h-4 w-4 mr-2"})," Add Choice"]}),(0,r.jsx)(V.C5,{children:null===(i=d.formState.errors)||void 0===i?void 0:null===(n=i.dialogueChoices)||void 0===n?void 0:n.message})]}),"journal_prompt"===m&&(0,r.jsx)(V.Rr,{children:"The main description field above serves as the journal prompt for the user. Users will be provided a text area to write their reflections."}),"conversational_response_practice"===m&&(0,r.jsx)(V.Rr,{children:"The prompt field above sets the scenario. Users will be provided a text area to practice their response."}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 sticky bottom-0 bg-popover py-3 border-t",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),(0,r.jsx)(c.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save Action Item"})]})]})})}let et=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vid";return"".concat(e,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,7))},es=A.Ik({id:A.Yj(),title:A.Yj().min(1,"Video title is required"),url:A.Yj().url("Must be a valid URL").min(1,"URL is required"),description:A.Yj().optional(),thumbnailUrl:A.Yj().url().optional().or(A.eu("")),duration:A.KC([A.Yj().regex(/^\d{1,2}:\d{2}$/,"Duration should be in MM:SS format."),A.eu("")]).optional()}),er=A.Ik({id:A.Yj(),title:A.Yj().min(1,"Group title is required"),videos:A.YO(es).min(1,"At least one video is required for a choice group."),selectionRule:A.k5(["choose_one","complete_all"])});function en(e){var t,s,i;let{initialData:l,onSubmit:o,onCancel:a}=e,d=(0,z.mN)({resolver:(0,M.u)(er),defaultValues:l}),{fields:u,append:x,remove:h,update:p}=(0,z.jz)({control:d.control,name:"videos"}),[j,v]=(0,n.useState)(null),[f,g]=(0,n.useState)(!1),b=e=>{v(e),g(!0)};return(0,r.jsx)(V.lV,{...d,children:(0,r.jsxs)("form",{onSubmit:d.handleSubmit(o),className:"space-y-6 p-1 max-h-[70vh] overflow-y-auto",children:[(0,r.jsx)(V.zB,{control:d.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Video Choice Group Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.p,{placeholder:"e.g., Choose Your Focus Area",...t})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:d.control,name:"selectionRule",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Selection Rule"}),(0,r.jsxs)(S.l6,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(V.MJ,{children:(0,r.jsx)(S.bq,{children:(0,r.jsx)(S.yv,{placeholder:"Select rule"})})}),(0,r.jsxs)(S.gC,{children:[(0,r.jsx)(S.eb,{value:"choose_one",children:"Choose One"}),(0,r.jsx)(S.eb,{value:"complete_all",children:"Complete All (View All)"})]})]}),(0,r.jsx)(V.Rr,{children:"How should users interact with these videos?"}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsxs)("div",{className:"space-y-3 p-3 border rounded-md bg-muted/30",children:[(0,r.jsx)(V.lR,{children:"Videos in this Group"}),u.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-md bg-background shadow-sm",children:[(0,r.jsxs)("div",{className:"flex-grow",children:[(0,r.jsx)("p",{className:"font-medium",children:d.watch("videos.".concat(t,".title"))}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:d.watch("videos.".concat(t,".url"))})]}),(0,r.jsxs)("div",{className:"space-x-2 shrink-0",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",size:"sm",onClick:()=>b(t),children:"Edit"}),(0,r.jsx)(c.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>h(t),className:"text-destructive hover:bg-destructive/10",children:(0,r.jsx)(O.A,{className:"h-4 w-4"})})]})]},e.id)),(0,r.jsxs)(c.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{x({id:et("vidchoice"),title:"New Video ".concat(u.length+1),url:"",description:"",thumbnailUrl:"",duration:""}),v(u.length),g(!0)},children:[(0,r.jsx)(R.A,{className:"h-4 w-4 mr-2"})," Add New Video to Group"]}),(0,r.jsx)(V.C5,{children:(null===(t=d.formState.errors.videos)||void 0===t?void 0:t.message)||(null===(i=d.formState.errors.videos)||void 0===i?void 0:null===(s=i.root)||void 0===s?void 0:s.message)})]}),(0,r.jsx)(m.lG,{open:f,onOpenChange:e=>{g(e),e||v(null)},children:(0,r.jsxs)(m.Cf,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)(m.c7,{children:(0,r.jsx)(m.L3,{children:null!==j&&u[j]?"Edit Video":"Add New Video"})}),null!==j&&u[j]&&(0,r.jsx)(E,{initialData:u[j],onSubmit:e=>{null!==j&&p(j,e),g(!1),v(null)},onCancel:()=>{g(!1),v(null)}})]})}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 sticky bottom-0 bg-popover py-3 border-t",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),(0,r.jsx)(c.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save Video Group"})]})]})})}let ei=A.Ik({id:A.Yj(),title:A.Yj().min(1,"Link title is required"),scenarioId:A.Yj().min(1,"Scenario ID must be selected or entered")});function el(e){let{initialData:t,onSubmit:s,onCancel:n}=e,i=(0,z.mN)({resolver:(0,M.u)(ei),defaultValues:{id:t.id,title:t.title,scenarioId:t.scenarioId}});return(0,r.jsx)(V.lV,{...i,children:(0,r.jsxs)("form",{onSubmit:i.handleSubmit(s),className:"space-y-6 p-1",children:[(0,r.jsx)(V.zB,{control:i.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Link Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.p,{placeholder:"e.g., Practice: Handling Toddler Tantrums",...t})}),(0,r.jsx)(V.Rr,{children:"This title will be displayed to the user for this scenario link."}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:i.control,name:"scenarioId",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Scenario ID"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.p,{placeholder:"Enter the ID of the interactive scenario",...t})}),(0,r.jsx)(V.Rr,{children:"The unique ID of the interactive scenario to link to. Ensure this ID exists."}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),(0,r.jsx)(c.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save Scenario Link"})]})]})})}let eo=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"item";return"".concat(e,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9))},ea=A.Ik({id:A.Yj().default(()=>eo("opt")),text:A.Yj().min(1,"Option text is required"),value:A.au.number().int("Value must be an integer (e.g., 1-5)")}),ec=A.Ik({id:A.Yj().default(()=>eo("q")),text:A.Yj().min(1,"Question text is required"),options:A.YO(ea).length(5,"Each question must have exactly 5 options.")}),ed=A.Ik({id:A.Yj().default(()=>eo("resComment")),scoreRange:A.PV([A.au.number({invalid_type_error:"Min score must be a number."}),A.au.number({invalid_type_error:"Max score must be a number."})]).refine(e=>e[0]<=e[1],{message:"Min score must be less than or equal to max score.",path:["0"]}),categoryLabel:A.Yj().min(1,"Category label is required (e.g., 매우높음)"),comment:A.Yj().min(1,"Result comment is required")}),em=A.Ik({id:A.Yj().default(()=>eo("factor")),title:A.Yj().min(1,"Factor title is required"),scoringMethod:A.k5(["sum","average"]).default("sum").optional(),questions:A.YO(ec).min(1,"At least one question is required for a factor.").max(15,"Maximum 15 questions per factor."),factorResultComments:A.YO(ed).min(1,"At least one result comment is required for a factor.")}),eu=A.Ik({id:A.Yj().default(()=>eo("psychTest")),title:A.Yj().min(1,"Test title is required"),description:A.Yj().optional(),overallScoringMethod:A.k5(["sum","average"]).default("sum").optional(),factors:A.YO(em).min(1,"At least one factor is required."),overallResultComments:A.YO(ed).min(1,"At least one overall result comment is required.")}),ex=()=>Array.from({length:5},(e,t)=>({id:eo("opt"),text:"선택지 ".concat(t+1),value:t+1}));function eh(e){var t,s,n,i,l,o,a,m;let{initialData:u,onSubmit:x,onCancel:h}=e,p=(0,z.mN)({resolver:(0,M.u)(eu),defaultValues:{id:u.id||eo("psychTest"),title:u.title||"",description:u.description||"",overallScoringMethod:u.overallScoringMethod||"sum",factors:(null===(t=u.factors)||void 0===t?void 0:t.length)>0?u.factors.map(e=>{var t,s;return{...e,id:e.id||eo("factor"),scoringMethod:e.scoringMethod||"sum",questions:(null===(t=e.questions)||void 0===t?void 0:t.map(e=>{var t;return{...e,id:e.id||eo("q"),options:(null===(t=e.options)||void 0===t?void 0:t.map(e=>({...e,id:e.id||eo("opt")})))||ex()}}))||[{id:eo("q"),text:"",options:ex()}],factorResultComments:(null===(s=e.factorResultComments)||void 0===s?void 0:s.map(e=>({...e,id:e.id||eo("resComment")})))||[{id:eo("resComment"),scoreRange:[0,0],categoryLabel:"",comment:""}]}}):[{id:eo("factor"),title:"",scoringMethod:"sum",questions:[{id:eo("q"),text:"",options:ex()}],factorResultComments:[{id:eo("resComment"),scoreRange:[0,0],categoryLabel:"",comment:""}]}],overallResultComments:(null===(s=u.overallResultComments)||void 0===s?void 0:s.length)>0?u.overallResultComments.map(e=>({...e,id:e.id||eo("resComment")})):[{id:eo("resComment"),scoreRange:[0,0],categoryLabel:"",comment:""}]}}),{fields:j,append:v,remove:f}=(0,z.jz)({control:p.control,name:"factors"}),{fields:g,append:b,remove:y}=(0,z.jz)({control:p.control,name:"overallResultComments"}),C=e=>{let t=p.getValues("factors.".concat(e));if(t&&t.questions.length<15){let s=[...t.questions,{id:eo("q"),text:"",options:ex()}];p.setValue("factors.".concat(e,".questions"),s)}},w=(e,t)=>{let s=p.getValues("factors.".concat(e));if(s){let r=s.questions.filter((e,s)=>s!==t);p.setValue("factors.".concat(e,".questions"),r)}},N=e=>{let t=p.getValues("factors.".concat(e));if(t){let s=[...t.factorResultComments,{id:eo("resComment"),scoreRange:[0,0],categoryLabel:"",comment:""}];p.setValue("factors.".concat(e,".factorResultComments"),s)}},k=(e,t)=>{let s=p.getValues("factors.".concat(e));if(s){let r=s.factorResultComments.filter((e,s)=>s!==t);p.setValue("factors.".concat(e,".factorResultComments"),r)}};return(0,r.jsx)(V.lV,{...p,children:(0,r.jsxs)("form",{onSubmit:p.handleSubmit(x),className:"space-y-6 p-1 max-h-[75vh] overflow-y-auto pr-4",children:[(0,r.jsx)(V.zB,{control:p.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Psychological Test Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.p,{placeholder:"e.g., Parenting Style Inventory",...t})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:p.control,name:"description",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Description (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.T,{placeholder:"Brief description of the test",...t,rows:2})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:p.control,name:"overallScoringMethod",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Overall Score Calculation Method (총점 계산 방식)"}),(0,r.jsxs)(S.l6,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(V.MJ,{children:(0,r.jsx)(S.bq,{children:(0,r.jsx)(S.yv,{placeholder:"Select scoring method"})})}),(0,r.jsxs)(S.gC,{children:[(0,r.jsx)(S.eb,{value:"sum",children:"Sum of Scores (합산)"}),(0,r.jsx)(S.eb,{value:"average",children:"Average of Scores (평균)"})]})]}),(0,r.jsx)(V.Rr,{children:"How the final overall score from all factors/questions should be calculated."}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(J.w,{}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-primary",children:"Factors (Sub-scales)"}),j.map((e,t)=>{var s,n,i,l,o,a;return(0,r.jsxs)(d.Zp,{className:"p-4 space-y-4 bg-muted/30 relative",children:[(0,r.jsx)(d.aR,{className:"p-2",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)(V.zB,{control:p.control,name:"factors.".concat(t,".title"),render:e=>{let{field:s}=e;return(0,r.jsxs)(V.eI,{className:"flex-grow mr-2",children:[(0,r.jsxs)(V.lR,{children:["Factor ",t+1," Title"]}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.p,{placeholder:"e.g., Emotional Regulation",...s})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:p.control,name:"factors.".concat(t,".scoringMethod"),render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{className:"w-1/3",children:[(0,r.jsx)(V.lR,{children:"Factor Scoring"}),(0,r.jsxs)(S.l6,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(V.MJ,{children:(0,r.jsx)(S.bq,{children:(0,r.jsx)(S.yv,{placeholder:"Method"})})}),(0,r.jsxs)(S.gC,{children:[(0,r.jsx)(S.eb,{value:"sum",children:"Sum"}),(0,r.jsx)(S.eb,{value:"average",children:"Average"})]})]}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(c.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>f(t),className:"ml-2 text-destructive self-end",children:(0,r.jsx)(O.A,{className:"h-5 w-5"})})]})}),(0,r.jsxs)(d.Wu,{className:"p-2 space-y-3",children:[(0,r.jsxs)("h4",{className:"text-md font-medium",children:["Questions for Factor ",t+1," (Max 15)"]}),p.watch("factors.".concat(t,".questions")).map((e,s)=>{var n,i,l,o,a;return(0,r.jsxs)(d.Zp,{className:"p-3 space-y-2 bg-background shadow-sm relative",children:[(0,r.jsx)(V.zB,{control:p.control,name:"factors.".concat(t,".questions.").concat(s,".text"),render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsxs)(V.lR,{children:["Question ",s+1]}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.T,{placeholder:"Enter question text",...t,rows:2})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.lR,{className:"text-xs",children:"Options (Exactly 5, values 1-5 recommended)"}),p.watch("factors.".concat(t,".questions.").concat(s,".options")).map((e,n)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(V.zB,{control:p.control,name:"factors.".concat(t,".questions.").concat(s,".options.").concat(n,".text"),render:e=>{let{field:t}=e;return(0,r.jsx)(Y.p,{placeholder:"Option ".concat(n+1," Text"),...t,className:"flex-grow"})}}),(0,r.jsx)(V.zB,{control:p.control,name:"factors.".concat(t,".questions.").concat(s,".options.").concat(n,".value"),render:e=>{let{field:t}=e;return(0,r.jsx)(Y.p,{type:"number",placeholder:"Val",...t,className:"w-20"})}})]},e.id||n)),(0,r.jsx)(V.C5,{children:null===(a=p.formState.errors.factors)||void 0===a?void 0:null===(o=a[t])||void 0===o?void 0:null===(l=o.questions)||void 0===l?void 0:null===(i=l[s])||void 0===i?void 0:null===(n=i.options)||void 0===n?void 0:n.message}),(0,r.jsx)(c.$,{type:"button",variant:"ghost",size:"xs",onClick:()=>w(t,s),className:"absolute top-1 right-1 text-destructive hover:bg-destructive/10",children:(0,r.jsx)(O.A,{className:"h-3 w-3"})})]},e.id||s)}),p.watch("factors.".concat(t,".questions")).length<15&&(0,r.jsxs)(c.$,{type:"button",variant:"outline",size:"sm",onClick:()=>C(t),children:[(0,r.jsx)(R.A,{className:"h-4 w-4 mr-2"})," Add Question to Factor"]}),(0,r.jsx)(V.C5,{children:null===(i=p.formState.errors.factors)||void 0===i?void 0:null===(n=i[t])||void 0===n?void 0:null===(s=n.questions)||void 0===s?void 0:s.message}),(0,r.jsx)(J.w,{className:"my-3"}),(0,r.jsxs)("h4",{className:"text-md font-medium",children:["Result Comments for Factor ",t+1]}),p.watch("factors.".concat(t,".factorResultComments")).map((e,s)=>{var n,i,l,o,a;return(0,r.jsxs)(d.Zp,{className:"p-3 space-y-2 bg-background shadow-sm relative",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsx)(V.zB,{control:p.control,name:"factors.".concat(t,".factorResultComments.").concat(s,".scoreRange.0"),render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Min Score"}),(0,r.jsx)(Y.p,{type:"number",...t}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:p.control,name:"factors.".concat(t,".factorResultComments.").concat(s,".scoreRange.1"),render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Max Score"}),(0,r.jsx)(Y.p,{type:"number",...t}),(0,r.jsx)(V.C5,{})]})}})]}),(0,r.jsx)(V.C5,{children:null===(a=p.formState.errors.factors)||void 0===a?void 0:null===(o=a[t])||void 0===o?void 0:null===(l=o.factorResultComments)||void 0===l?void 0:null===(i=l[s])||void 0===i?void 0:null===(n=i.scoreRange)||void 0===n?void 0:n.message}),(0,r.jsx)(V.zB,{control:p.control,name:"factors.".concat(t,".factorResultComments.").concat(s,".categoryLabel"),render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Category Label"}),(0,r.jsx)(Y.p,{placeholder:"e.g., 매우높음",...t}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:p.control,name:"factors.".concat(t,".factorResultComments.").concat(s,".comment"),render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Comment"}),(0,r.jsx)(T.T,{placeholder:"Comment for this score range",...t,rows:2}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(c.$,{type:"button",variant:"ghost",size:"xs",onClick:()=>k(t,s),className:"absolute top-1 right-1 text-destructive hover:bg-destructive/10",children:(0,r.jsx)(O.A,{className:"h-3 w-3"})})]},e.id||s)}),(0,r.jsxs)(c.$,{type:"button",variant:"outline",size:"sm",onClick:()=>N(t),children:[(0,r.jsx)(R.A,{className:"h-4 w-4 mr-2"})," Add Result Comment for Factor"]}),(0,r.jsx)(V.C5,{children:null===(a=p.formState.errors.factors)||void 0===a?void 0:null===(o=a[t])||void 0===o?void 0:null===(l=o.factorResultComments)||void 0===l?void 0:l.message})]})]},e.id)}),(0,r.jsxs)(c.$,{type:"button",variant:"outline",onClick:()=>v({id:eo("factor"),title:"",scoringMethod:"sum",questions:[{id:eo("q"),text:"",options:ex()}],factorResultComments:[{id:eo("resComment"),scoreRange:[0,0],categoryLabel:"",comment:""}]}),children:[(0,r.jsx)(R.A,{className:"h-4 w-4 mr-2"})," Add Factor"]}),(0,r.jsx)(V.C5,{children:(null===(n=p.formState.errors.factors)||void 0===n?void 0:n.message)||(null===(l=p.formState.errors.factors)||void 0===l?void 0:null===(i=l.root)||void 0===i?void 0:i.message)}),(0,r.jsx)(J.w,{}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-primary",children:"Overall Result Comments (총평)"}),g.map((e,t)=>{var s,n,i;return(0,r.jsxs)(d.Zp,{className:"p-3 space-y-2 bg-muted/30 shadow-sm relative",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsx)(V.zB,{control:p.control,name:"overallResultComments.".concat(t,".scoreRange.0"),render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Min Total Score"}),(0,r.jsx)(Y.p,{type:"number",...t}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:p.control,name:"overallResultComments.".concat(t,".scoreRange.1"),render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Max Total Score"}),(0,r.jsx)(Y.p,{type:"number",...t}),(0,r.jsx)(V.C5,{})]})}})]}),(0,r.jsx)(V.C5,{children:null===(i=p.formState.errors.overallResultComments)||void 0===i?void 0:null===(n=i[t])||void 0===n?void 0:null===(s=n.scoreRange)||void 0===s?void 0:s.message}),(0,r.jsx)(V.zB,{control:p.control,name:"overallResultComments.".concat(t,".categoryLabel"),render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Overall Category Label"}),(0,r.jsx)(Y.p,{placeholder:"e.g., 매우 균형적",...t}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:p.control,name:"overallResultComments.".concat(t,".comment"),render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Overall Comment"}),(0,r.jsx)(T.T,{placeholder:"Overall comment for this total score range",...t,rows:2}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(c.$,{type:"button",variant:"ghost",size:"xs",onClick:()=>y(t),className:"absolute top-1 right-1 text-destructive hover:bg-destructive/10",children:(0,r.jsx)(O.A,{className:"h-3 w-3"})})]},e.id)}),(0,r.jsxs)(c.$,{type:"button",variant:"outline",onClick:()=>b({id:eo("overallC"),scoreRange:[0,0],categoryLabel:"",comment:""}),children:[(0,r.jsx)(R.A,{className:"h-4 w-4 mr-2"})," Add Overall Result Comment"]}),(0,r.jsx)(V.C5,{children:(null===(o=p.formState.errors.overallResultComments)||void 0===o?void 0:o.message)||(null===(m=p.formState.errors.overallResultComments)||void 0===m?void 0:null===(a=m.root)||void 0===a?void 0:a.message)}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 sticky bottom-0 bg-popover py-3 border-t -mx-1 px-1",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",onClick:h,children:"Cancel"}),(0,r.jsx)(c.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save Psychological Test"})]})]})})}let ep=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"item";return"".concat(e,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,7))},ej=A.Ik({id:A.Yj(),question:A.Yj().min(1,"Question prompt is required"),answerPlaceholder:A.Yj().optional()}),ev=A.Ik({id:A.Yj(),title:A.Yj().min(1,"Session title is required"),description:A.Yj().optional(),prompts:A.YO(ej).min(1,"At least one prompt is required.").max(10,"Maximum 10 prompts allowed.")});function ef(e){var t,s;let{initialData:n,onSubmit:i,onCancel:l}=e,o=(0,z.mN)({resolver:(0,M.u)(ev),defaultValues:n}),{fields:a,append:d,remove:m}=(0,z.jz)({control:o.control,name:"prompts"});return(0,r.jsx)(V.lV,{...o,children:(0,r.jsxs)("form",{onSubmit:o.handleSubmit(i),className:"space-y-6 p-1 max-h-[70vh] overflow-y-auto",children:[(0,r.jsx)(V.zB,{control:o.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Q&A Session Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.p,{placeholder:"e.g., Weekly Reflection",...t})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:o.control,name:"description",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Description (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.T,{placeholder:"Brief description of the Q&A session",...t,rows:2})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(J.w,{}),(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Prompts (Max 10)"}),a.map((e,t)=>(0,r.jsxs)("div",{className:"p-4 border rounded-md space-y-3 relative bg-muted/20 shadow-sm",children:[(0,r.jsx)(V.zB,{control:o.control,name:"prompts.".concat(t,".question"),render:e=>{let{field:s}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsxs)(V.lR,{children:["Prompt / Question ",t+1]}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.T,{placeholder:"Enter the question or prompt for the user",...s,rows:2})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:o.control,name:"prompts.".concat(t,".answerPlaceholder"),render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Answer Placeholder (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.p,{placeholder:"e.g., Your thoughts here...",...t})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsxs)(c.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>m(t),className:"absolute top-2 right-2 text-destructive hover:bg-destructive/10",children:[(0,r.jsx)(O.A,{className:"h-4 w-4 mr-1"})," Remove Prompt"]})]},e.id)),a.length<10&&(0,r.jsxs)(c.$,{type:"button",variant:"outline",onClick:()=>d({id:ep("prompt"),question:"",answerPlaceholder:""}),children:[(0,r.jsx)(R.A,{className:"h-4 w-4 mr-2"})," Add Prompt"]}),(0,r.jsx)(V.C5,{children:null===(s=o.formState.errors)||void 0===s?void 0:null===(t=s.prompts)||void 0===t?void 0:t.message}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 sticky bottom-0 bg-popover py-3 border-t",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",onClick:l,children:"Cancel"}),(0,r.jsx)(c.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save Q&A Session"})]})]})})}let eg=A.Ik({id:A.Yj(),title:A.Yj().min(1,"Reminder title is required (e.g., Weekly Check-in: Core Mission)"),missionTitle:A.Yj().min(1,"The actual mission title is required"),missionDescription:A.Yj().min(1,"Description of the mission is required")});function eb(e){let{initialData:t,onSubmit:s,onCancel:n}=e,i=(0,z.mN)({resolver:(0,M.u)(eg),defaultValues:t});return(0,r.jsx)(V.lV,{...i,children:(0,r.jsxs)("form",{onSubmit:i.handleSubmit(s),className:"space-y-6 p-1",children:[(0,r.jsx)(V.zB,{control:i.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Reminder Element Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.p,{placeholder:"e.g., Weekly Check-in: Your Parenting Goal",...t})}),(0,r.jsx)(V.Rr,{children:"The title for this specific reminder element in the week's content."}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:i.control,name:"missionTitle",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Mission Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.p,{placeholder:"e.g., Be a More Present Parent",...t})}),(0,r.jsx)(V.Rr,{children:"The core mission this reminder relates to."}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:i.control,name:"missionDescription",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Mission Description"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.T,{placeholder:"Describe the mission in detail...",...t,rows:3})}),(0,r.jsx)(V.Rr,{children:"A clear explanation of what the mission entails."}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),(0,r.jsx)(c.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save Mission Reminder"})]})]})})}var ey=s(80333);let eC=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"item";return"".concat(e,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,7))},ew=A.Ik({id:A.Yj(),statement:A.Yj().min(1,"Question statement is required"),correctAnswer:A.zM(),explanation:A.Yj().optional()}),eN=A.Ik({id:A.Yj(),title:A.Yj().min(1,"Quiz title is required"),description:A.Yj().optional(),questions:A.YO(ew).min(1,"At least one question is required.")});function ek(e){var t,s;let{initialData:n,onSubmit:i,onCancel:l}=e,o=(0,z.mN)({resolver:(0,M.u)(eN),defaultValues:n}),{fields:a,append:d,remove:m}=(0,z.jz)({control:o.control,name:"questions"});return(0,r.jsx)(V.lV,{...o,children:(0,r.jsxs)("form",{onSubmit:o.handleSubmit(i),className:"space-y-6 p-1 max-h-[70vh] overflow-y-auto",children:[(0,r.jsx)(V.zB,{control:o.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"O/X Quiz Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.p,{placeholder:"e.g., Toddler Sleep Myths",...t})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:o.control,name:"description",render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Description (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.T,{placeholder:"Brief description of the quiz",...t,rows:2})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(J.w,{}),(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Quiz Questions"}),a.map((e,t)=>(0,r.jsxs)("div",{className:"p-4 border rounded-md space-y-3 relative bg-muted/20 shadow-sm",children:[(0,r.jsx)(V.zB,{control:o.control,name:"questions.".concat(t,".statement"),render:e=>{let{field:s}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsxs)(V.lR,{children:["Statement / Question ",t+1]}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.T,{placeholder:"Enter the statement for O/X evaluation",...s,rows:2})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsx)(V.zB,{control:o.control,name:"questions.".concat(t,".correctAnswer"),render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm bg-background",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(V.lR,{children:'Correct Answer is "O" (True/Yes)'}),(0,r.jsx)(V.Rr,{children:'Switch on if "O" (True/Yes) is correct. Off if "X" (False/No) is correct.'})]}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(ey.d,{checked:t.value,onCheckedChange:t.onChange})})]})}}),(0,r.jsx)(V.zB,{control:o.control,name:"questions.".concat(t,".explanation"),render:e=>{let{field:t}=e;return(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Explanation (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.T,{placeholder:"Explanation shown after user answers",...t,rows:1})}),(0,r.jsx)(V.C5,{})]})}}),(0,r.jsxs)(c.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>m(t),className:"absolute top-2 right-2 text-destructive hover:bg-destructive/10",children:[(0,r.jsx)(O.A,{className:"h-4 w-4 mr-1"})," Remove Question"]})]},e.id)),(0,r.jsxs)(c.$,{type:"button",variant:"outline",onClick:()=>d({id:eC("oxq"),statement:"",correctAnswer:!0,explanation:""}),children:[(0,r.jsx)(R.A,{className:"h-4 w-4 mr-2"})," Add Question"]}),(0,r.jsx)(V.C5,{children:null===(s=o.formState.errors)||void 0===s?void 0:null===(t=s.questions)||void 0===t?void 0:t.message}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 sticky bottom-0 bg-popover py-3 border-t",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",onClick:l,children:"Cancel"}),(0,r.jsx)(c.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save O/X Quiz"})]})]})})}let eR=e=>"".concat(e,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,7)),e_=e=>{let t=eR("le-stub-".concat(e)),s=eR("content-stub-".concat(e));switch(e){case"video":return{id:t,type:e,content:{id:s,title:"New Video (Edit Later)",url:""}};case"video_choice_group":return{id:t,type:e,content:{id:s,title:"New Video Choice Group (Edit Later)",videos:[],selectionRule:"choose_one"}};case"checklist":return{id:t,type:e,content:{id:s,title:"New Checklist (Edit Later)",items:[],type:"generic_todo"}};case"action_item":return{id:t,type:e,content:{id:s,title:"New Action Item (Edit Later)",description:"",type:"todo_list",todoItems:[]}};case"interactive_scenario_link":return{id:t,type:e,scenarioId:"",title:"New Interactive Scenario (Link Later)"};case"text_content":return{id:t,type:e,content:{id:s,title:"New Text Content (Edit Later)",type:"article",content:""}};case"psychological_test":return{id:t,type:e,content:{id:s,title:"New Psychological Test (Edit Later)",factors:[],overallResultComments:[]}};case"qa_session":return{id:t,type:e,content:{id:s,title:"New Q&A Session (Edit Later)",prompts:[]}};case"mission_reminder":return{id:t,type:e,content:{id:s,title:"New Mission Reminder (Edit Later)",missionTitle:"",missionDescription:""}};case"ox_quiz":return{id:t,type:e,content:{id:s,title:"New O/X Quiz (Edit Later)",questions:[]}};default:return console.warn("Unknown learning element type: ".concat(e,", creating a default text_content placeholder.")),{id:t,type:"text_content",content:{id:s,title:"New Content (Edit Later)",type:"article",content:""}}}},eI=[{id:"video",label:"Video Content"},{id:"video_choice_group",label:"Video Choice Group"},{id:"checklist",label:"Checklist"},{id:"action_item",label:"Action Item"},{id:"interactive_scenario_link",label:"Interactive Scenario Link"},{id:"text_content",label:"Text Content (Article, Link)"},{id:"psychological_test",label:"Psychological Test (5-choice)"},{id:"qa_session",label:"Q&A Session"},{id:"mission_reminder",label:"Mission Reminder"},{id:"ox_quiz",label:"O/X Quiz"}],eS=e=>e.title?e.title:"content"in e&&e.content&&"string"==typeof e.content.title?e.content.title:"interactive_scenario_link"===e.type&&"scenarioId"in e&&e.scenarioId?"Scenario: ".concat(e.scenarioId):"Untitled ".concat(e.type.replace(/_/g," ")),eq={video:u.A,video_choice_group:u.A,checklist:x.A,action_item:h.A,interactive_scenario_link:p.A,text_content:j.A,psychological_test:v.A,qa_session:f.A,mission_reminder:g.A,ox_quiz:b.A};function ez(){let e=(0,i.useRouter)(),{programId:t,weekId:s}=(0,i.useParams)(),{toast:l}=(0,_.dj)(),[u,x]=(0,n.useState)(null),[p,j]=(0,n.useState)(null),[v,f]=(0,n.useState)(null),[g,b]=(0,n.useState)(null),[z,M]=(0,n.useState)(!0),[A,Y]=(0,n.useState)(null),[T,V]=(0,n.useState)("");(0,n.useEffect)(()=>{"string"==typeof t?x(t):x(null)},[t]),(0,n.useEffect)(()=>{"string"==typeof s?j(s):j(null)},[s]),(0,n.useEffect)(()=>{let t=async()=>{if(!u||!p){if(null!==u||null!==p||z||(l({title:"Invalid URL",description:"Program or Week ID missing.",variant:"destructive"}),e.push("/admin/programs")),z&&(void 0===u||void 0===p))return;M(!1);return}M(!0);let t=await (0,I.HD)(u);if(t){f(t);let s=(t.weeks||[]).find(e=>e.id===p);s?b(s):(l({title:"Error",description:"Week not found in this program.",variant:"destructive"}),e.push("/admin/programs/".concat(u,"/edit")))}else l({title:"Error",description:"Program not found.",variant:"destructive"}),e.push("/admin/programs");M(!1)};u&&p?t():(null===u||null===p)&&M(!1)},[u,p,e,l]);let B=async e=>{if(!u)return!1;let{id:t,...s}=e,r=await (0,I.El)(u,s);if(r){var n;f(e);let t=null===(n=e.weeks)||void 0===n?void 0:n.find(e=>e.id===p);t&&b(t)}return r},L=async e=>{if(!v||!g||!u)return;let t={...g,weekNumber:e.weekNumber,title:e.title,summary:e.summary,sequentialCompletionRequired:e.sequentialCompletionRequired,learningElements:g.learningElements||[]},s=(v.weeks||[]).map(e=>e.id===p?t:e).sort((e,t)=>e.weekNumber-t.weekNumber),r={...v,weeks:s};await B(r)?l({title:"Week Details Updated",description:"Week ".concat(t.weekNumber," details saved.")}):l({title:"Error",description:"Failed to update week details.",variant:"destructive"})},O=async e=>{if(!v||!g||!A||!u)return;let t=(g.learningElements||[]).map(t=>t.id===A.id?{...t,content:e}:t),s={...g,learningElements:t},r=(v.weeks||[]).map(e=>e.id===p?s:e),n={...v,weeks:r};await B(n)?(Y(null),l({title:"Learning Element Updated",description:'Content for "'.concat(eS(A),'" saved.')})):l({title:"Error",description:"Failed to save learning element.",variant:"destructive"})},J=async e=>{if(!v||!g||!A||"interactive_scenario_link"!==A.type||!u)return;let t=(g.learningElements||[]).map(t=>t.id===A.id?{...t,title:e.title,scenarioId:e.scenarioId}:t),s={...g,learningElements:t},r=(v.weeks||[]).map(e=>e.id===p?s:e),n={...v,weeks:r};await B(n)?(Y(null),l({title:"Interactive Scenario Link Updated",description:'Link "'.concat(e.title,'" saved.')})):l({title:"Error",description:"Failed to save scenario link.",variant:"destructive"})},$=async(e,t)=>{if(!v||!g||!g.learningElements)return;let s=[...g.learningElements],r=s.findIndex(t=>t.id===e);if(-1===r)return;if("up"===t&&r>0)[s[r-1],s[r]]=[s[r],s[r-1]];else{if("down"!==t||!(r<s.length-1))return;[s[r+1],s[r]]=[s[r],s[r+1]]}let n={...g,learningElements:s},i=(v.weeks||[]).map(e=>e.id===p?n:e),o={...v,weeks:i};await B(o)?l({title:"Content Reordered",description:"Learning element order updated."}):l({title:"Error",description:"Failed to reorder content.",variant:"destructive"})},P=async()=>{if(!v||!g||!T||!u){l({title:"Error",description:"Please select an element type to add.",variant:"destructive"});return}let e=e_(T),t=[...g.learningElements||[],e],s={...g,learningElements:t},r=(v.weeks||[]).map(e=>e.id===p?s:e),n={...v,weeks:r};await B(n)?(l({title:"Learning Element Added",description:'A new "'.concat(T.replace(/_/g," "),'" has been added.')}),V("")):l({title:"Error",description:"Failed to add learning element.",variant:"destructive"})};if(z)return(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("p",{children:"Loading week details..."})});if(!v||!g)return(0,r.jsxs)("div",{className:"text-center py-10",children:["Program or Week not found.",(0,r.jsx)(o(),{href:u?"/admin/programs/".concat(u,"/edit"):"/admin/programs",className:"text-accent underline ml-2",children:"Go back to program"}),"."]});let U=g.learningElements||[];return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-start",children:(0,r.jsx)(c.$,{variant:"outline",size:"sm",asChild:!0,children:(0,r.jsxs)(o(),{href:u?"/admin/programs/".concat(u,"/edit"):"/admin/programs",children:[(0,r.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Back to Program Management"]})})}),(0,r.jsxs)(d.Zp,{className:"max-w-3xl mx-auto shadow-lg",children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsxs)(d.ZB,{className:"text-2xl text-primary",children:["Edit Week ",g.weekNumber,' for "',v.title,'"']}),(0,r.jsx)(d.BT,{children:"Modify the basic details for this week. Manage content elements below."})]}),(0,r.jsx)(d.Wu,{children:(0,r.jsx)(a.j,{initialData:{weekNumber:g.weekNumber,title:g.title,summary:g.summary,sequentialCompletionRequired:g.sequentialCompletionRequired},onSubmit:L,isEditing:!0})})]}),(0,r.jsxs)(d.Zp,{className:"max-w-3xl mx-auto shadow-lg mt-6",children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{className:"text-xl text-primary",children:"Manage Week Content"}),(0,r.jsx)(d.BT,{children:"Edit or reorder individual learning elements for this week. Add new elements below."})]}),(0,r.jsx)(d.Wu,{className:"space-y-4",children:U.length>0?U.map((e,t)=>{let s=eq[e.type]||h.A;return(0,r.jsx)(d.Zp,{className:"shadow-sm",children:(0,r.jsxs)(d.aR,{className:"flex flex-row items-center justify-between py-3 px-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(C.A,{className:"h-5 w-5 text-muted-foreground cursor-move"}),(0,r.jsx)(s,{className:"h-5 w-5 text-muted-foreground"}),(0,r.jsx)(d.ZB,{className:"text-md",children:eS(e)}),(0,r.jsx)("span",{className:"text-xs px-2 py-0.5 bg-muted text-muted-foreground rounded-full capitalize",children:e.type.replace(/_/g," ")})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>$(e.id,"up"),disabled:0===t,"aria-label":"Move up",children:(0,r.jsx)(w.A,{className:"h-4 w-4"})}),(0,r.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>$(e.id,"down"),disabled:t===U.length-1,"aria-label":"Move down",children:(0,r.jsx)(N.A,{className:"h-4 w-4"})}),(0,r.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>Y(e),children:[(0,r.jsx)(k.A,{className:"mr-2 h-4 w-4"})," Edit"]})]})]})},e.id)}):(0,r.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No learning elements defined for this week yet. Add them below or through the Program's 'Manage Weeks & Content' tab."})}),(0,r.jsxs)(d.wL,{className:"border-t pt-4 space-y-4",children:[(0,r.jsx)(q.J,{className:"text-md font-semibold text-primary block",children:"Add New Learning Element"}),(0,r.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,r.jsxs)("div",{className:"flex-grow",children:[(0,r.jsx)(q.J,{htmlFor:"new-element-type",className:"text-xs text-muted-foreground",children:"Select Type"}),(0,r.jsxs)(S.l6,{value:T,onValueChange:e=>V(e),children:[(0,r.jsx)(S.bq,{id:"new-element-type",children:(0,r.jsx)(S.yv,{placeholder:"Choose an element type..."})}),(0,r.jsx)(S.gC,{children:eI.map(e=>(0,r.jsx)(S.eb,{value:e.id,children:e.label},e.id))})]})]}),(0,r.jsxs)(c.$,{onClick:P,disabled:!T,className:"bg-accent hover:bg-accent/90 text-accent-foreground",children:[(0,r.jsx)(R.A,{className:"mr-2 h-4 w-4"})," Add Element"]})]})]})]}),(0,r.jsx)(m.lG,{open:!!A,onOpenChange:e=>!e&&Y(null),children:(0,r.jsxs)(m.Cf,{className:"sm:max-w-2xl max-h-[85vh]",children:[(0,r.jsxs)(m.c7,{children:[(0,r.jsxs)(m.L3,{children:["Edit: ",A?eS(A):"Content"]}),(0,r.jsx)(m.rr,{children:"Modify the details for this learning element."})]}),(0,r.jsx)("div",{className:"py-4 max-h-[calc(85vh-150px)] overflow-y-auto pr-2",children:(()=>{if(!A)return null;switch(A.type){case"video":return(0,r.jsx)(E,{initialData:A.content,onSubmit:O,onCancel:()=>Y(null)});case"text_content":return(0,r.jsx)(D,{initialData:A.content,onSubmit:O,onCancel:()=>Y(null)});case"checklist":return(0,r.jsx)(F,{initialData:A.content,onSubmit:O,onCancel:()=>Y(null)});case"action_item":return(0,r.jsx)(ee,{initialData:A.content,onSubmit:O,onCancel:()=>Y(null)});case"video_choice_group":return(0,r.jsx)(en,{initialData:A.content,onSubmit:O,onCancel:()=>Y(null)});case"interactive_scenario_link":let e={id:A.id,title:A.title||"",scenarioId:A.scenarioId||""};return(0,r.jsx)(el,{initialData:e,onSubmit:J,onCancel:()=>Y(null)});case"psychological_test":return(0,r.jsx)(eh,{initialData:A.content,onSubmit:O,onCancel:()=>Y(null)});case"qa_session":return(0,r.jsx)(ef,{initialData:A.content,onSubmit:O,onCancel:()=>Y(null)});case"mission_reminder":return(0,r.jsx)(eb,{initialData:A.content,onSubmit:O,onCancel:()=>Y(null)});case"ox_quiz":return(0,r.jsx)(ek,{initialData:A.content,onSubmit:O,onCancel:()=>Y(null)});default:return(0,r.jsxs)("p",{children:["No editor available for this content type: ",A.type,"."]})}})()})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,9855,5769,6874,1509,1263,9764,1174,1859,5521,8258,5916,9127,1855,8441,1684,7358],()=>t(50939)),_N_E=e.O()}]);