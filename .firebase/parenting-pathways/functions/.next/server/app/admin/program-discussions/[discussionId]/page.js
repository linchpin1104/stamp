(()=>{var e={};e.id=421,e.ids=[421],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},18329:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34511:(e,s,t)=>{Promise.resolve().then(t.bind(t,60737))},34729:(e,s,t)=>{"use strict";t.d(s,{T:()=>n});var r=t(60687),a=t(43210),i=t(4780);let n=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:t,...s}));n.displayName="Textarea"},42759:(e,s,t)=>{Promise.resolve().then(t.bind(t,46920))},44493:(e,s,t)=>{"use strict";t.d(s,{BT:()=>o,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>d,wL:()=>m});var r=t(60687),a=t(43210),i=t(4780);let n=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));n.displayName="Card";let d=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...s}));d.displayName="CardHeader";let l=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));l.displayName="CardTitle";let o=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...s}));o.displayName="CardDescription";let c=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent";let m=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...s}));m.displayName="CardFooter"},46920:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var r=t(60687),a=t(16189),i=t(43210),n=t(29523),d=t(44493),l=t(32584),o=t(18329),c=t(55817),m=t(82614);let u=(0,m.A)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);var p=t(93090),x=t(99343);let h=(0,m.A)("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);var f=t(85866),v=t(85814),g=t.n(v),b=t(34729),y=t(80013),j=t(29867);let N="bannedUsers";function w(){let{discussionId:e}=(0,a.useParams)(),s=(0,a.useRouter)(),{toast:t}=(0,j.dj)(),[m,v]=(0,i.useState)(null),[w,A]=(0,i.useState)(null),[k,C]=(0,i.useState)(""),[P,_]=(0,i.useState)(!0);if(P)return(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("p",{children:"Loading discussion..."})});if(!w)return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-8",children:[(0,r.jsx)(o.A,{className:"w-16 h-16 text-muted-foreground mb-4"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-muted-foreground mb-2",children:"Discussion not found."}),(0,r.jsx)("p",{className:"text-muted-foreground mb-6",children:"The discussion thread may have been moved, deleted, or the original poster may have been banned."}),(0,r.jsxs)(n.$,{onClick:()=>s.push("/admin/program-discussions"),children:[(0,r.jsx)(c.A,{className:"mr-2 h-4 w-4"})," Back to Discussions"]})]});let R=e=>{if(confirm(`Are you sure you want to ban the user "${e}"? This will hide all their posts across the platform and cannot be undone through this interface.`)){let r=localStorage.getItem(N),a=[];r&&(a=JSON.parse(r)),a.includes(e)||a.push(e),localStorage.setItem(N,JSON.stringify(a)),t({title:"User Banned",description:`User "${e}" has been banned. Their posts will be hidden. You might be redirected if this was their post.`}),w.user===e&&s.push("/admin/program-discussions")}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(n.$,{variant:"outline",size:"sm",asChild:!0,children:(0,r.jsxs)(g(),{href:"/admin/program-discussions",children:[(0,r.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"Back to All Discussions"]})}),(0,r.jsxs)(d.Zp,{className:"shadow-xl",children:[(0,r.jsxs)(d.aR,{className:"border-b",children:[(0,r.jsx)(d.ZB,{className:"text-2xl text-primary",children:w.topic}),(0,r.jsxs)(d.BT,{children:["In ",(0,r.jsx)(g(),{href:`/admin/programs/${w.programId}/edit`,className:"text-accent hover:underline",children:w.program})," by ",w.user," on ",w.date]}),(0,r.jsxs)("span",{className:`mt-2 text-xs px-2 py-0.5 rounded-full capitalize font-medium w-fit ${"flagged"===w.status?"bg-destructive/20 text-destructive-foreground":"resolved"===w.status?"bg-green-500/20 text-green-700":"bg-muted text-muted-foreground"}`,children:["Status: ",w.status]})]}),(0,r.jsxs)(d.Wu,{className:"pt-6",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-3 mb-6",children:[(0,r.jsxs)(l.Avatar,{className:"h-10 w-10",children:[(0,r.jsx)(l.AvatarImage,{src:`https://picsum.photos/seed/${w.avatarSeed}/100/100`,alt:w.user,"data-ai-hint":"user avatar"}),(0,r.jsx)(l.AvatarFallback,{children:w.user.charAt(0)})]}),(0,r.jsxs)("div",{className:"bg-muted/50 p-4 rounded-lg flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-foreground",children:w.user}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mb-2",children:w.date}),(0,r.jsx)("p",{className:"text-foreground/90 whitespace-pre-wrap",children:w.fullContent})]})]}),(0,r.jsxs)("div",{className:"space-x-2 mb-6",children:[(0,r.jsxs)(n.$,{variant:"outline",children:[(0,r.jsx)(u,{className:"mr-2 h-4 w-4"})," Flag Thread"]}),(0,r.jsxs)(n.$,{variant:"outline",className:"border-destructive text-destructive hover:bg-destructive/10",onClick:()=>R(w.user),children:[(0,r.jsx)(p.A,{className:"mr-2 h-4 w-4"})," Ban User (",w.user,")"]})]}),(0,r.jsxs)("h3",{className:"text-xl font-semibold text-primary mb-4 border-t pt-4",children:["Comments (",w.comments.length,")"]}),(0,r.jsx)("div",{className:"space-y-4",children:w.comments.map(e=>(0,r.jsx)(d.Zp,{className:`p-4 ${e.isAdmin?"bg-primary/10 border-primary/30":"bg-card"}`,children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsxs)(l.Avatar,{className:"h-8 w-8",children:[(0,r.jsx)(l.AvatarImage,{src:`https://picsum.photos/seed/${e.avatarSeed}/80/80`,alt:e.user,"data-ai-hint":"commenter avatar"}),(0,r.jsx)(l.AvatarFallback,{children:e.user.charAt(0)})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("p",{className:"text-sm font-semibold text-foreground",children:[e.user," ",e.isAdmin&&(0,r.jsx)("span",{className:"text-xs text-primary font-bold",children:"(Admin)"})]}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:e.date})]}),(0,r.jsx)("p",{className:"text-sm text-foreground/80 mt-1 whitespace-pre-wrap",children:e.text}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 mt-2",children:[(0,r.jsxs)(n.$,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-green-500 p-1 h-auto",children:[(0,r.jsx)(x.A,{className:"mr-1 h-4 w-4"})," ",e.likes]}),(0,r.jsxs)(n.$,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-red-500 p-1 h-auto",children:[(0,r.jsx)(h,{className:"mr-1 h-4 w-4"})," ",e.dislikes]}),(0,r.jsx)(n.$,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-primary p-1 h-auto",children:"Hide"}),!e.isAdmin&&(0,r.jsxs)(n.$,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-destructive p-1 h-auto",onClick:()=>R(e.user),children:[(0,r.jsx)(p.A,{className:"mr-1 h-4 w-4"})," Ban"]})]})]})]})},e.id))}),(0,r.jsxs)("div",{className:"mt-6 pt-6 border-t",children:[(0,r.jsx)(y.J,{htmlFor:"newComment",className:"text-md font-semibold text-primary",children:"Post a Reply (as Admin)"}),(0,r.jsx)(b.T,{id:"newComment",value:k,onChange:e=>C(e.target.value),placeholder:"Type your reply here...",className:"mt-2",rows:3}),(0,r.jsxs)(n.$,{onClick:()=>{if(!k.trim())return;console.log("New comment:",k);let e={id:`c${Date.now()}`,user:"Admin Reply",avatarSeed:"adminreply",date:new Date().toISOString().split("T")[0],text:k,likes:0,dislikes:0,isAdmin:!0};A(s=>s?{...s,comments:[...s.comments,e]}:null),C(""),t({title:"Comment Posted",description:"Your reply has been added to the thread."})},className:"mt-3 bg-accent hover:bg-accent/90 text-accent-foreground",children:[(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4"})," Post Reply"]})]})]})]})]})}},55817:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},60737:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/ihyelin/Documents/dev/stamp_nile/src/app/admin/program-discussions/[discussionId]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ihyelin/Documents/dev/stamp_nile/src/app/admin/program-discussions/[discussionId]/page.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});var r=t(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},76105:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o});var r=t(65239),a=t(48088),i=t(88170),n=t.n(i),d=t(30893),l={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);t.d(s,l);let o={children:["",{children:["admin",{children:["program-discussions",{children:["[discussionId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,60737)),"/Users/ihyelin/Documents/dev/stamp_nile/src/app/admin/program-discussions/[discussionId]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,99111)),"/Users/ihyelin/Documents/dev/stamp_nile/src/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,80871)),"/Users/ihyelin/Documents/dev/stamp_nile/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/ihyelin/Documents/dev/stamp_nile/src/app/admin/program-discussions/[discussionId]/page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/program-discussions/[discussionId]/page",pathname:"/admin/program-discussions/[discussionId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},78148:(e,s,t)=>{"use strict";t.d(s,{b:()=>d});var r=t(43210),a=t(14163),i=t(60687),n=r.forwardRef((e,s)=>(0,i.jsx)(a.sG.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));n.displayName="Label";var d=n},79551:e=>{"use strict";e.exports=require("url")},80013:(e,s,t)=>{"use strict";t.d(s,{J:()=>o});var r=t(60687),a=t(43210),i=t(78148),n=t(24224),d=t(4780);let l=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(i.b,{ref:t,className:(0,d.cn)(l(),e),...s}));o.displayName=i.b.displayName},85866:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},93090:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]])},99343:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]])}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[4447,166,1658,5728,8767,9823],()=>t(76105));module.exports=r})();