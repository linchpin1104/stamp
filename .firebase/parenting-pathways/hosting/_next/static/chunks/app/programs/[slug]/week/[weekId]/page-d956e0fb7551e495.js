(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1227],{965:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(40157).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},10518:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(40157).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},14347:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(40157).A)("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]])},14733:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(40157).A)("BookText",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M8 11h8",key:"vwpz6n"}],["path",{d:"M8 7h6",key:"1f0q6e"}]])},15300:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(40157).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},24944:(e,t,s)=>{"use strict";s.d(t,{k:()=>n});var i=s(95155),r=s(12115),a=s(55863),l=s(59434);let n=r.forwardRef((e,t)=>{let{className:s,value:r,...n}=e;return(0,i.jsx)(a.bL,{ref:t,className:(0,l.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...n,children:(0,i.jsx)(a.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});n.displayName=a.bL.displayName},26126:(e,t,s)=>{"use strict";s.d(t,{E:()=>n});var i=s(95155);s(12115);var r=s(74466),a=s(59434);let l=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:t,variant:s,...r}=e;return(0,i.jsx)("div",{className:(0,a.cn)(l({variant:s}),t),...r})}},30356:(e,t,s)=>{"use strict";s.d(t,{C:()=>o,z:()=>c});var i=s(95155),r=s(12115),a=s(54059),l=s(70154),n=s(59434);let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)(a.bL,{className:(0,n.cn)("grid gap-2",s),...r,ref:t})});c.displayName=a.bL.displayName;let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)(a.q7,{ref:t,className:(0,n.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...r,children:(0,i.jsx)(a.C1,{className:"flex items-center justify-center",children:(0,i.jsx)(l.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});o.displayName=a.q7.displayName},31573:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(40157).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},45554:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(40157).A)("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]])},55863:(e,t,s)=>{"use strict";s.d(t,{C1:()=>b,bL:()=>y});var i=s(12115),r=s(46081),a=s(63655),l=s(95155),n="Progress",[c,o]=(0,r.A)(n),[d,m]=c(n),u=i.forwardRef((e,t)=>{var s,i,r,n;let{__scopeProgress:c,value:o=null,max:m,getValueLabel:u=p,...h}=e;(m||0===m)&&!g(m)&&console.error((s="".concat(m),i="Progress","Invalid prop `max` of value `".concat(s,"` supplied to `").concat(i,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let x=g(m)?m:100;null===o||j(o,x)||console.error((r="".concat(o),n="Progress","Invalid prop `value` of value `".concat(r,"` supplied to `").concat(n,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let y=j(o,x)?o:null,b=v(y)?u(y,x):void 0;return(0,l.jsx)(d,{scope:c,value:y,max:x,children:(0,l.jsx)(a.sG.div,{"aria-valuemax":x,"aria-valuemin":0,"aria-valuenow":v(y)?y:void 0,"aria-valuetext":b,role:"progressbar","data-state":f(y,x),"data-value":null!=y?y:void 0,"data-max":x,...h,ref:t})})});u.displayName=n;var h="ProgressIndicator",x=i.forwardRef((e,t)=>{var s;let{__scopeProgress:i,...r}=e,n=m(h,i);return(0,l.jsx)(a.sG.div,{"data-state":f(n.value,n.max),"data-value":null!==(s=n.value)&&void 0!==s?s:void 0,"data-max":n.max,...r,ref:t})});function p(e,t){return"".concat(Math.round(e/t*100),"%")}function f(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function v(e){return"number"==typeof e}function g(e){return v(e)&&!isNaN(e)&&e>0}function j(e,t){return v(e)&&!isNaN(e)&&e<=t&&e>=0}x.displayName=h;var y=u,b=x},61840:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(40157).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},62523:(e,t,s)=>{"use strict";s.d(t,{p:()=>l});var i=s(95155),r=s(12115),a=s(59434);let l=r.forwardRef((e,t)=>{let{className:s,type:r,...l}=e;return(0,i.jsx)("input",{type:r,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...l})});l.displayName="Input"},67270:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(40157).A)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},73158:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(40157).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},82579:(e,t,s)=>{Promise.resolve().then(s.bind(s,89455))},85057:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var i=s(95155),r=s(12115),a=s(40968),l=s(74466),n=s(59434);let c=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)(a.b,{ref:t,className:(0,n.cn)(c(),s),...r})});o.displayName=a.b.displayName},88539:(e,t,s)=>{"use strict";s.d(t,{T:()=>l});var i=s(95155),r=s(12115),a=s(59434);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...r})});l.displayName="Textarea"},89367:(e,t,s)=>{"use strict";function i(e,[t,s]){return Math.min(s,Math.max(t,e))}s.d(t,{q:()=>i})},89455:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>er});var i=s(95155),r=s(39022),a=s(14347),l=s(66695);function n(e){let{title:t,src:s}=e;return(0,i.jsx)(l.Zp,{className:"overflow-hidden shadow-md",children:(0,i.jsx)(l.Wu,{className:"p-0",children:s?(0,i.jsx)("div",{className:"aspect-video",children:(0,i.jsx)("iframe",{width:"100%",height:"100%",src:s,title:t,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):(0,i.jsxs)("div",{className:"aspect-video bg-muted flex flex-col items-center justify-center p-6 text-center",children:[(0,i.jsx)(a.A,{className:"h-16 w-16 text-primary mb-4"}),(0,i.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-2",children:t}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"Video content will be displayed here."})]})})})}var c=s(12115),o=s(47262),d=s(85057),m=s(24944),u=s(30285),h=s(15222),x=s(77223),p=s(26126);let f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"item";return"".concat(e,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,7))},v=e=>e.map(e=>({...e,id:e.id||f("cl-item-auto")}));function g(e){let{checklist:t,onChecklistItemChange:s,onEdit:r,onDelete:a}=e,[n,f]=(0,c.useState)(()=>v(t.items||[]).map(e=>({...e,isChecked:!!e.isChecked})));(0,c.useEffect)(()=>{var e,s;t.id!==((null===(s=n[0])||void 0===s?void 0:null===(e=s.id)||void 0===e?void 0:e.startsWith(t.id))?t.id:"stale")&&f(v(t.items||[]).map(e=>({...e,isChecked:!!e.isChecked})))},[t.id,t.items]);let g=(0,c.useCallback)((e,i)=>{f(t=>t.map(t=>t.id===e?{...t,isChecked:i}:t)),s&&s(t.id,e,i)},[t.id,s]),j=n.filter(e=>e.isChecked).length,y=n.length;return(0,i.jsxs)(l.Zp,{className:"shadow-md ".concat(t.isUserCreated?"bg-accent/10 border-accent":""),children:[(0,i.jsx)(l.aR,{children:(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(l.ZB,{className:"text-xl text-primary",children:t.title}),t.description&&(0,i.jsx)(l.BT,{children:t.description}),t.isUserCreated&&(0,i.jsx)(p.E,{variant:"outline",className:"mt-1 text-xs border-accent text-accent",children:"My Checklist"})]}),t.isUserCreated&&r&&a&&(0,i.jsxs)("div",{className:"flex space-x-1",children:[(0,i.jsx)(u.$,{variant:"ghost",size:"icon",onClick:()=>r(t.id),className:"h-8 w-8",children:(0,i.jsx)(h.A,{className:"h-4 w-4"})}),(0,i.jsx)(u.$,{variant:"ghost",size:"icon",onClick:()=>a(t.id),className:"h-8 w-8 text-destructive hover:text-destructive",children:(0,i.jsx)(x.A,{className:"h-4 w-4"})})]})]})}),(0,i.jsxs)(l.Wu,{children:[y>0&&(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("div",{className:"flex justify-between items-center mb-1",children:(0,i.jsxs)(d.J,{htmlFor:"progress-".concat(t.id),className:"text-sm text-muted-foreground",children:["Progress: ",j," / ",y]})}),(0,i.jsx)(m.k,{id:"progress-".concat(t.id),value:y>0?j/y*100:0,className:"w-full h-2"})]}),(0,i.jsx)("ul",{className:"space-y-3",children:n.map(e=>(0,i.jsxs)("li",{className:"flex items-start space-x-3 p-3 ".concat(t.isUserCreated?"bg-background":"bg-secondary/10"," rounded-md hover:bg-secondary/20 transition-colors"),children:[(0,i.jsx)(o.S,{id:"".concat(t.id,"-").concat(e.id),checked:!!e.isChecked,onCheckedChange:t=>g(e.id,!!t),className:"mt-1 border-primary data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground"}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)(d.J,{htmlFor:"".concat(t.id,"-").concat(e.id),className:"text-base ".concat(e.isChecked?"line-through text-muted-foreground":"text-foreground"),children:e.text}),e.details&&(0,i.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.details})]})]},e.id))}),0===y&&(0,i.jsx)("p",{className:"text-muted-foreground",children:"No items in this checklist."})]})]})}var j=s(35141),y=s(6874),b=s.n(y),N=s(12543),k=s(31573),w=s(94063),C=s(15300),I=s(61840),A=s(45554),S=s(67270),M=s(81203),P=s(93223),R=s(11133),_=s(34301),q=s(965),Z=s(14733),B=s(73158),z=s(30356),E=s(76202),T=s(87481),$=s(53941),W=s(83343),V=s(25711),L=s(35695),O=s(54165),D=s(62177),H=s(90221),F=s(55594),U=s(62523),J=s(88539),Y=s(17759);let G=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"item";return"".concat(e,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,7))},Q=F.Ik({id:F.Yj().default(()=>G("userItem")),text:F.Yj().min(1,"Item text is required")}),X=F.Ik({id:F.Yj().default(()=>G("userCl")),title:F.Yj().min(1,"Checklist title is required"),description:F.Yj().optional(),items:F.YO(Q).min(1,"At least one item is required.")});function K(e){var t,s,r,a,l;let{initialData:n,onSubmit:c,onCancel:o,programId:d,weekId:m,userId:h}=e,p=(0,D.mN)({resolver:(0,H.u)(X),defaultValues:{id:(null==n?void 0:n.id)||G("userCl"),title:(null==n?void 0:n.title)||"",description:(null==n?void 0:n.description)||"",items:(null==n?void 0:null===(t=n.items)||void 0===t?void 0:t.map(e=>({id:e.id||G("userItem"),text:e.text})))||[{id:G("userItem"),text:""}]}}),{fields:f,append:v,remove:g}=(0,D.jz)({control:p.control,name:"items"});return(0,i.jsx)(Y.lV,{...p,children:(0,i.jsxs)("form",{onSubmit:p.handleSubmit(e=>{c({...e,items:e.items.map(e=>({...e,itemType:"checkbox",isChecked:!1})),type:"generic_todo",isUserCreated:!0,userId:h,programId:d,weekId:m})}),className:"space-y-6 p-1 max-h-[70vh] overflow-y-auto",children:[(0,i.jsx)(Y.zB,{control:p.control,name:"title",render:e=>{let{field:t}=e;return(0,i.jsxs)(Y.eI,{children:[(0,i.jsx)(Y.lR,{children:"My Checklist Title"}),(0,i.jsx)(Y.MJ,{children:(0,i.jsx)(U.p,{placeholder:"e.g., My Goals for this Week",...t})}),(0,i.jsx)(Y.C5,{})]})}}),(0,i.jsx)(Y.zB,{control:p.control,name:"description",render:e=>{let{field:t}=e;return(0,i.jsxs)(Y.eI,{children:[(0,i.jsx)(Y.lR,{children:"Description (Optional)"}),(0,i.jsx)(Y.MJ,{children:(0,i.jsx)(J.T,{placeholder:"A brief note about this checklist",...t,rows:2})}),(0,i.jsx)(Y.C5,{})]})}}),(0,i.jsxs)("div",{className:"space-y-3 p-3 border rounded-md bg-muted/30",children:[(0,i.jsx)(Y.lR,{children:"Checklist Items"}),f.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(Y.zB,{control:p.control,name:"items.".concat(t,".text"),render:e=>{let{field:s}=e;return(0,i.jsx)(U.p,{placeholder:"Item ".concat(t+1),...s,className:"flex-grow"})}}),(0,i.jsx)(u.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>g(t),children:(0,i.jsx)(x.A,{className:"h-4 w-4 text-destructive"})})]},e.id)),(0,i.jsxs)(u.$,{type:"button",variant:"outline",size:"sm",onClick:()=>v({id:G("userItem"),text:""}),children:[(0,i.jsx)(_.A,{className:"h-4 w-4 mr-2"})," Add Item"]}),(0,i.jsx)(Y.C5,{children:(null===(r=p.formState.errors)||void 0===r?void 0:null===(s=r.items)||void 0===s?void 0:s.message)||(null===(l=p.formState.errors.items)||void 0===l?void 0:null===(a=l.root)||void 0===a?void 0:a.message)})]}),(0,i.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 sticky bottom-0 bg-popover py-3 border-t -mx-1 px-1",children:[(0,i.jsx)(u.$,{type:"button",variant:"outline",onClick:o,children:"Cancel"}),(0,i.jsx)(u.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:(null==n?void 0:n.id)?"Update My Checklist":"Create My Checklist"})]})]})})}var ee=s(22346);let et=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"item";return"".concat(e,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,7))},es=e=>"".concat(e.type,"-").concat(e.id),ei=(e,t)=>e.sort((e,s)=>{let i=null==t?void 0:t.find(t=>t.id===e.weekId),r=null==t?void 0:t.find(e=>e.id===s.weekId),a=(null==i?void 0:i.weekNumber)||1/0,l=(null==r?void 0:r.weekNumber)||1/0;return a!==l?a-l:(e.title||"").localeCompare(s.title||"")});function er(){var e,t,s,a,o,m,h,x,f;let{slug:v,weekId:y}=(0,L.useParams)(),{toast:D}=(0,T.dj)(),[H,F]=(0,c.useState)(null),[U,J]=(0,c.useState)(null),[Y,G]=(0,c.useState)(void 0),[Q,X]=(0,c.useState)(void 0),[er,ea]=(0,c.useState)({}),[el,en]=(0,c.useState)(null),[ec,eo]=(0,c.useState)(!1),[ed,em]=(0,c.useState)(!0),[eu,eh]=(0,c.useState)([]),[ex,ep]=(0,c.useState)(!1),[ef,ev]=(0,c.useState)(null);(0,c.useEffect)(()=>{"string"==typeof v?F(v):F(null)},[v]),(0,c.useEffect)(()=>{"string"==typeof y?J(y):J(null)},[y]),(0,c.useEffect)(()=>{let e;let t=localStorage.getItem("userProfile");if(t)try{e=JSON.parse(t)}catch(t){console.error("Failed to parse user profile",t),e=r._o}else e=r._o;en(e)},[]),(0,c.useEffect)(()=>{let e=async()=>{if(!H||!U||!el){(null===H||null===U)&&null!==el&&em(!1);return}em(!0);let e=await (0,V.Z5)(H);if(G(e),e){var t,s,i;X((null===(t=e.weeks)||void 0===t?void 0:t.find(e=>e.id===U))||null),eh(ei((el.customChecklists||[]).filter(t=>t.programId===e.id),e.weeks));{let t=null===(s=el.programCompletions)||void 0===s?void 0:s.some(t=>t.programId===e.id),r=null===(i=el.registeredVouchers)||void 0===i?void 0:i.find(t=>t.programId===e.id&&(0,$.d)((0,W.H)(t.accessExpiresDate),new Date));eo(!!t||!!r)}}else X(null),eo(!1),eh([]);em(!1)};H&&U&&el&&e()},[H,U,el]);let eg=(0,c.useCallback)(e=>{en(e),localStorage.setItem("userProfile",JSON.stringify(e))},[]),ej=(0,c.useCallback)(e=>{el&&(eg({...el,userMissions:e}),D({title:"Mission Progress Updated"}))},[el,eg,D]),ey=(0,c.useCallback)((e,t,s)=>{if(!el)return;let i=el.userMissions||[],r=i.findIndex(t=>t.linkedProgramMissionId===e);r>-1?i[r]={...i[r],progress:t}:i.push({id:et("userProgMission"),linkedProgramMissionId:e,title:s.title,description:s.description,progress:t,isUserCreated:!1}),ej(i)},[el,ej]),eb=(0,c.useCallback)(e=>{if(!el||!Y||!Q)return;let t=[...el.customChecklists||[]];ef?(t=t.map(t=>t.id===e.id?e:t),D({title:"Checklist Updated",description:'"'.concat(e.title,'" has been saved.')})):(t.push(e),D({title:"Checklist Added",description:'"'.concat(e.title,'" created for this week.')})),eg({...el,customChecklists:t}),eh(ei(t.filter(e=>e.programId===Y.id),Y.weeks)),ep(!1),ev(null)},[el,Y,Q,ef,eg,D]),eN=(0,c.useCallback)(e=>{let t=eu.find(t=>t.id===e);t&&(ev(t),ep(!0))},[eu]),ek=(0,c.useCallback)(e=>{if(el&&Y&&Q&&confirm("Are you sure you want to delete this checklist? This action cannot be undone.")){let t=(el.customChecklists||[]).filter(t=>t.id!==e);eg({...el,customChecklists:t}),eh(ei(t.filter(e=>e.programId===Y.id),Y.weeks)),D({title:"Checklist Deleted",variant:"destructive"})}},[el,Y,Q,eg,D]),ew=(0,c.useCallback)((e,t,s)=>{var i;if(!el)return;let r=(el.customChecklists||[]).map(i=>i.id===e?{...i,items:i.items.map(e=>e.id===t?{...e,isChecked:s}:e)}:i);eh(i=>i.map(i=>i.id===e?{...i,items:i.items.map(e=>e.id===t?{...e,isChecked:s}:e)}:i));let a=null==Q?void 0:null===(i=Q.learningElements)||void 0===i?void 0:i.find(t=>"checklist"===t.type&&t.id===e);if(a&&"checklist"===a.type){let i={...el.actionItemProgress||{}};i[e]||(i[e]={todoItemScores:{}}),i[e].todoItemScores||(i[e].todoItemScores={}),i[e].todoItemScores[t]=+!!s,eg({...el,actionItemProgress:i,customChecklists:r})}else eg({...el,customChecklists:r});D({title:"Checklist Updated",description:"Progress saved."})},[el,eg,Q,D]),eC=(0,c.useCallback)((e,t,s,i)=>{if(!el)return;let r={...el.actionItemProgress||{}};r[e]||(r[e]={}),"notes"===t&&"string"==typeof s?r[e].notes=s:"completion"===t&&"boolean"==typeof s?r[e].isCompletedOverall=s:"todoScore"===t&&i&&"number"==typeof s&&(r[e].todoItemScores||(r[e].todoItemScores={}),r[e].todoItemScores[i]=s),eg({...el,actionItemProgress:r}),"notes"!==t&&D({title:"Action Item Updated",description:"Your progress has been saved."})},[el,eg,D]);if(ed||void 0===Y||void 0===Q||void 0===el)return(0,i.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,i.jsx)("p",{children:"Loading week content..."})});if(!Y||!Q)return(0,i.jsxs)("div",{className:"text-center py-10",children:[(0,i.jsx)("h1",{className:"text-2xl font-semibold",children:"Week Not Found"}),(0,i.jsx)("p",{className:"text-muted-foreground",children:"The content you are looking for does not exist."}),(0,i.jsx)(u.$,{asChild:!0,variant:"link",className:"mt-4",children:(0,i.jsxs)(b(),{href:H?"/programs/".concat(H):"/programs",children:[(0,i.jsx)(N.A,{className:"mr-2 h-4 w-4"})," Back to Program"]})})]});if(!ec)return(0,i.jsxs)("div",{className:"space-y-8",children:[(0,i.jsx)("div",{className:"flex justify-between items-center",children:(0,i.jsx)(u.$,{variant:"outline",asChild:!0,children:(0,i.jsxs)(b(),{href:H?"/programs/".concat(H):"/programs",children:[(0,i.jsx)(N.A,{className:"mr-2 h-4 w-4"})," Back to Program Overview"]})})}),(0,i.jsxs)(l.Zp,{className:"text-center py-10 bg-muted/50",children:[(0,i.jsxs)(l.aR,{children:[(0,i.jsx)(k.A,{className:"h-12 w-12 text-primary mx-auto mb-3"}),(0,i.jsx)(l.ZB,{className:"text-xl text-primary",children:"Content Locked"})]}),(0,i.jsxs)(l.Wu,{children:[(0,i.jsxs)("p",{className:"text-muted-foreground",children:['You need active access to "',Y.title,"\" to view this week's content."]}),(0,i.jsx)(u.$,{asChild:!0,className:"mt-4 bg-accent hover:bg-accent/80 text-accent-foreground",children:(0,i.jsx)(b(),{href:"/profile#vouchers_tab",children:"Register Voucher or Check Access"})})]})]})]});let eI=Y.weeks.findIndex(e=>e.id===Q.id),eA=eI>0?Y.weeks[eI-1]:null,eS=eI<Y.weeks.length-1?Y.weeks[eI+1]:null,eM=eI===Y.weeks.length-1,eP=Q.learningElements||[],eR=(e,t)=>{var s,a,o,m;let h=es(e)+"-".concat(t),x=null==el?void 0:null===(s=el.actionItemProgress)||void 0===s?void 0:s[e.id];switch(e.type){case"video":return(0,i.jsx)(n,{title:e.content.title,src:e.content.url},h);case"video_choice_group":let f=e.content,v=er[f.id]||(null===(a=f.videos[0])||void 0===a?void 0:a.id),y=f.videos.find(e=>e.id===v);return(0,i.jsxs)(l.Zp,{className:"my-4 shadow-md",children:[(0,i.jsxs)(l.aR,{children:[(0,i.jsx)(l.ZB,{className:"text-lg text-primary",children:f.title}),"choose_one"===f.selectionRule&&(0,i.jsx)(l.BT,{children:"Please select one video to watch."})]}),(0,i.jsxs)(l.Wu,{children:["choose_one"===f.selectionRule&&(0,i.jsx)(z.z,{value:v,onValueChange:e=>ea(t=>({...t,[f.id]:e})),className:"mb-4 space-y-2",children:f.videos.map(e=>(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(z.C,{value:e.id,id:"".concat(f.id,"-").concat(e.id)}),(0,i.jsx)(d.J,{htmlFor:"".concat(f.id,"-").concat(e.id),children:e.title})]},e.id))}),y&&(0,i.jsx)(n,{title:y.title,src:y.url})]})]},h);case"checklist":let N=e.content;return(0,i.jsx)(g,{checklist:N,onChecklistItemChange:ew},h);case"action_item":return(0,i.jsx)(j.v,{actionItem:e.content,onCompletionChange:(e,t)=>eC(e,"completion",t),onNotesChange:(e,t)=>eC(e,"notes",t),onTodoItemProgressChange:(e,t,s)=>eC(e,"todoScore",s,t),initialProgress:null==x?void 0:x.todoItemScores},h);case"interactive_scenario_link":let k=r._v.find(t=>t.id===e.scenarioId);return k?(0,i.jsx)(b(),{href:H&&U?"/programs/".concat(H,"/week/").concat(U,"/interactive-scenario/").concat(k.id):"#",children:(0,i.jsxs)(l.Zp,{className:"hover:shadow-lg transition-shadow cursor-pointer bg-secondary/20 my-4",children:[(0,i.jsx)(l.aR,{children:(0,i.jsxs)(l.ZB,{className:"text-xl text-primary flex items-center",children:[(0,i.jsx)(w.A,{className:"mr-2 h-6 w-6"})," Interactive Scenario: ",e.title||k.title]})}),(0,i.jsxs)(l.Wu,{children:[(0,i.jsx)("p",{className:"text-muted-foreground",children:k.description||"Engage in this interactive activity."}),(0,i.jsx)(u.$,{className:"mt-4 bg-accent hover:bg-accent/90 text-accent-foreground",children:"Start Scenario"})]})]})},h):null;case"text_content":let _=e.content;return(0,i.jsxs)(l.Zp,{className:"my-4 shadow-sm",children:[(0,i.jsx)(l.aR,{children:(0,i.jsxs)(l.ZB,{className:"text-lg text-primary flex items-center",children:[(0,i.jsx)(C.A,{className:"mr-2 h-5 w-5"})," ",_.title]})}),(0,i.jsxs)(l.Wu,{children:[(0,i.jsx)(p.E,{variant:"outline",className:"mb-2 capitalize text-xs",children:_.type.replace("_"," ")}),_.url&&(0,i.jsx)(u.$,{variant:"link",asChild:!0,className:"p-0 h-auto text-accent block",children:(0,i.jsxs)("a",{href:_.url,target:"_blank",rel:"noopener noreferrer",children:["View Document/Link ",(0,i.jsx)(I.A,{className:"ml-1 h-3 w-3 inline"})]})}),_.content&&(_.richTextEditorComponent?c.createElement(_.richTextEditorComponent,{value:_.content,onChange:()=>{},readOnly:!0}):(0,i.jsx)("div",{className:"text-sm text-foreground/80 mt-1 whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:_.content}}))]})]},h);case"psychological_test":let q=e.content;return(0,i.jsxs)(l.Zp,{className:"my-4 shadow-md",children:[(0,i.jsxs)(l.aR,{children:[(0,i.jsxs)(l.ZB,{className:"text-lg text-primary flex items-center",children:[(0,i.jsx)(A.A,{className:"mr-2 h-5 w-5"})," ",q.title]}),q.description&&(0,i.jsx)(l.BT,{children:q.description})]}),(0,i.jsxs)(l.Wu,{children:[(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Psychological Test content will be displayed here. (",q.factors.reduce((e,t)=>e+t.questions.length,0)," questions)"]}),(0,i.jsx)(u.$,{asChild:!0,className:"mt-4 bg-accent hover:bg-accent/90 text-accent-foreground",children:(0,i.jsx)(b(),{href:H&&U?"/programs/".concat(H,"/week/").concat(U,"/psychological-test/").concat(e.id):"#",children:"Start Test"})})]})]},h);case"qa_session":let Z=e.content;return(0,i.jsxs)(l.Zp,{className:"my-4 shadow-md",children:[(0,i.jsxs)(l.aR,{children:[(0,i.jsxs)(l.ZB,{className:"text-lg text-primary flex items-center",children:[(0,i.jsx)(S.A,{className:"mr-2 h-5 w-5"})," ",Z.title]}),Z.description&&(0,i.jsx)(l.BT,{children:Z.description})]}),(0,i.jsxs)(l.Wu,{children:[(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Q&A Session content will be displayed here. (",Z.prompts.length," prompts)"]}),(0,i.jsx)(u.$,{asChild:!0,className:"mt-4 bg-accent hover:bg-accent/90 text-accent-foreground",children:(0,i.jsx)(b(),{href:H&&U?"/programs/".concat(H,"/week/").concat(U,"/qa-session/").concat(e.id):"#",children:"Begin Session"})})]})]},h);case"mission_reminder":let B=e.content,T=(null==el?void 0:null===(m=el.userMissions)||void 0===m?void 0:null===(o=m.find(e=>e.linkedProgramMissionId===B.id))||void 0===o?void 0:o.progress)||0;return(0,i.jsxs)(l.Zp,{className:"my-4 shadow-sm bg-secondary/30",children:[(0,i.jsx)(l.aR,{children:(0,i.jsxs)(l.ZB,{className:"text-lg text-primary flex items-center",children:[(0,i.jsx)(M.A,{className:"mr-2 h-5 w-5"})," ",B.title]})}),(0,i.jsxs)(l.Wu,{children:[(0,i.jsx)("p",{className:"text-base font-semibold mb-1",children:B.missionTitle}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:B.missionDescription}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)(d.J,{htmlFor:"mission-progress-".concat(B.id),className:"text-sm font-medium",children:["Your Progress (0-10): ",T]}),(0,i.jsx)(E.A,{id:"mission-progress-".concat(B.id),min:0,max:10,step:1,defaultValue:[T],onValueChange:e=>ey(B.id,e[0],{title:B.missionTitle,description:B.missionDescription}),className:"w-full"})]})]})]},h);case"ox_quiz":let $=e.content;return(0,i.jsxs)(l.Zp,{className:"my-4 shadow-md",children:[(0,i.jsxs)(l.aR,{children:[(0,i.jsxs)(l.ZB,{className:"text-lg text-primary flex items-center",children:[(0,i.jsx)(P.A,{className:"mr-2 h-5 w-5"})," ",$.title]}),$.description&&(0,i.jsx)(l.BT,{children:$.description})]}),(0,i.jsxs)(l.Wu,{children:[(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:["O/X Quiz content will be displayed here. (",$.questions.length," questions)"]}),(0,i.jsx)(u.$,{asChild:!0,className:"mt-4 bg-accent hover:bg-accent/90 text-accent-foreground",children:(0,i.jsx)(b(),{href:H&&U?"/programs/".concat(H,"/week/").concat(U,"/ox-quiz/").concat(e.id):"#",children:"Start Quiz"})})]})]},h);default:let W=(null==e?void 0:e.type)||"unknown",V=(null==e?void 0:e.id)||"unknown";return(0,i.jsxs)("div",{className:"p-4 my-2 border border-dashed rounded-md text-muted-foreground",children:[(0,i.jsx)(R.A,{className:"inline mr-2 h-4 w-4"}),"Unknown learning element type: ",W,"."]},"".concat(W,"-").concat(V,"-").concat(t))}};return(0,i.jsxs)("div",{className:"space-y-8",children:[(0,i.jsx)("div",{className:"flex justify-between items-center",children:(0,i.jsx)(u.$,{variant:"outline",asChild:!0,children:(0,i.jsxs)(b(),{href:H?"/programs/".concat(H):"/programs",children:[(0,i.jsx)(N.A,{className:"mr-2 h-4 w-4"})," Back to Program Overview"]})})}),(0,i.jsxs)("header",{className:"pb-6 border-b",children:[(0,i.jsxs)("p",{className:"text-sm text-accent font-semibold mb-1",children:["Program: ",Y.title]}),(0,i.jsxs)("h1",{className:"text-3xl md:text-4xl font-bold tracking-tight text-primary",children:["Week ",Q.weekNumber,": ",Q.title]}),Q.summary&&(0,i.jsx)("p",{className:"mt-3 text-lg text-muted-foreground",children:Q.summary})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[eP.length>0?eP.map((e,t)=>eR(e,t)):(0,i.jsxs)(i.Fragment,{children:[Q.videos&&Q.videos.map(e=>(0,i.jsx)(n,{title:e.title,src:e.url},e.id)),Q.videoChoiceGroups&&Q.videoChoiceGroups.map(e=>{var t;let s=er[e.id]||(null===(t=e.videos[0])||void 0===t?void 0:t.id),r=e.videos.find(e=>e.id===s);return(0,i.jsxs)(l.Zp,{className:"my-4 shadow-md",children:[(0,i.jsx)(l.aR,{children:(0,i.jsx)(l.ZB,{className:"text-lg text-primary",children:e.title})}),(0,i.jsxs)(l.Wu,{children:["choose_one"===e.selectionRule&&(0,i.jsx)(z.z,{value:s,onValueChange:t=>ea(s=>({...s,[e.id]:t})),className:"mb-4 space-y-2",children:e.videos.map(t=>(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(z.C,{value:t.id,id:"".concat(e.id,"-").concat(t.id,"-fb")}),(0,i.jsx)(d.J,{htmlFor:"".concat(e.id,"-").concat(t.id,"-fb"),children:t.title})]},t.id))}),r&&(0,i.jsx)(n,{title:r.title,src:r.url})]})]},e.id)}),Q.checklists&&Q.checklists.map(e=>(0,i.jsx)(g,{checklist:e,onChecklistItemChange:ew},e.id)),Q.actionItems&&Q.actionItems.map(e=>{var t,s;return(0,i.jsx)(j.v,{actionItem:e,onCompletionChange:(e,t)=>eC(e,"completion",t),onNotesChange:(e,t)=>eC(e,"notes",t),onTodoItemProgressChange:(e,t,s)=>eC(e,"todoScore",s,t),initialProgress:null==el?void 0:null===(s=el.actionItemProgress)||void 0===s?void 0:null===(t=s[e.id])||void 0===t?void 0:t.todoItemScores},e.id)}),Q.interactiveScenarioId&&(()=>{let e=r._v.find(e=>e.id===Q.interactiveScenarioId);return e?(0,i.jsx)(b(),{href:H&&U?"/programs/".concat(H,"/week/").concat(U,"/interactive-scenario/").concat(e.id):"#",children:(0,i.jsxs)(l.Zp,{className:"hover:shadow-lg transition-shadow cursor-pointer bg-secondary/20 my-4",children:[(0,i.jsx)(l.aR,{children:(0,i.jsxs)(l.ZB,{className:"text-xl text-primary flex items-center",children:[(0,i.jsx)(w.A,{className:"mr-2 h-6 w-6"})," Interactive Scenario: ",e.title]})}),(0,i.jsxs)(l.Wu,{children:[(0,i.jsx)("p",{className:"text-muted-foreground",children:e.description||"Engage in this interactive activity."}),(0,i.jsx)(u.$,{className:"mt-4 bg-accent hover:bg-accent/90 text-accent-foreground",children:"Start Scenario"})]})]})}):null})()]}),0===eP.length&&!Q.videos&&!Q.videoChoiceGroups&&!Q.checklists&&!Q.actionItems&&!Q.interactiveScenarioId&&(0,i.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No learning content items defined for this week."})]}),(0,i.jsx)(ee.w,{className:"my-8"}),(0,i.jsxs)("section",{children:[(0,i.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,i.jsx)("h3",{className:"text-2xl font-semibold text-primary",children:"My Custom Checklists for this Program"})}),eu.length>0?(0,i.jsx)("div",{className:"space-y-4",children:eu.map(e=>(0,i.jsx)(g,{checklist:e,onEdit:()=>eN(e.id),onDelete:()=>ek(e.id),onChecklistItemChange:ew},e.id))}):(0,i.jsx)("p",{className:"text-muted-foreground",children:"You haven't created any personal checklists for this program yet."}),(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsxs)(u.$,{onClick:()=>{ev(null),ep(!0)},className:"bg-accent hover:bg-accent/90 text-accent-foreground",children:[(0,i.jsx)(_.A,{className:"mr-2 h-4 w-4"})," Add My Checklist"]})})]}),Q.additionalReadings&&Q.additionalReadings.length>0&&(0,i.jsxs)("section",{className:"mt-12",children:[(0,i.jsx)("h3",{className:"text-xl font-semibold text-primary mb-4",children:"Additional Resources"}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Q.additionalReadings.map(e=>(0,i.jsxs)(l.Zp,{className:"hover:shadow-md transition-shadow",children:[(0,i.jsx)(l.aR,{className:"pb-2 pt-4",children:(0,i.jsxs)(l.ZB,{className:"text-md text-primary flex items-center",children:[(0,i.jsx)(C.A,{className:"mr-2 h-4 w-4"})," ",e.title]})}),(0,i.jsxs)(l.Wu,{className:"p-4 pt-0",children:[(0,i.jsx)(p.E,{variant:"outline",className:"mb-1 capitalize text-xs",children:e.type.replace("_"," ")}),e.url?(0,i.jsx)(u.$,{variant:"link",asChild:!0,className:"p-0 h-auto text-accent",children:(0,i.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:["Access Resource ",(0,i.jsx)(I.A,{className:"ml-1 h-3 w-3 inline"})]})}):(0,i.jsx)("div",{className:"text-sm text-foreground/80 line-clamp-3",dangerouslySetInnerHTML:{__html:e.content||""}})]})]},e.id))})]}),(0,i.jsxs)("nav",{className:"flex flex-col sm:flex-row justify-between items-center mt-12 pt-6 border-t gap-4",children:[eA&&H?(0,i.jsx)(u.$,{variant:"outline",asChild:!0,className:"w-full sm:w-auto",disabled:(null===(e=Y.weeks[eI-1])||void 0===e?void 0:e.sequentialCompletionRequired)&&!(null==el?void 0:null===(o=el.actionItemProgress)||void 0===o?void 0:null===(t=o[(null===(a=Y.weeks[eI-1].learningElements)||void 0===a?void 0:null===(s=a.find(e=>"action_item"===e.type))||void 0===s?void 0:s.id)||""])||void 0===t?void 0:t.isCompletedOverall),children:(0,i.jsxs)(b(),{href:"/programs/".concat(H,"/week/").concat(eA.id),children:[(0,i.jsx)(q.A,{className:"mr-2 h-4 w-4"})," Previous Week: ",eA.title]})}):(0,i.jsx)("div",{className:"w-full sm:w-auto"}),eM&&H?(0,i.jsx)(u.$,{variant:"default",asChild:!0,className:"w-full sm:w-auto bg-green-600 hover:bg-green-700 text-white",children:(0,i.jsxs)(b(),{href:"/programs/".concat(H,"/report"),children:["View Program Report ",(0,i.jsx)(Z.A,{className:"ml-2 h-4 w-4"})]})}):eS&&H?(0,i.jsx)(u.$,{variant:"outline",asChild:!0,className:"w-full sm:w-auto",disabled:Q.sequentialCompletionRequired&&!(null==el?void 0:null===(f=el.actionItemProgress)||void 0===f?void 0:null===(m=f[(null===(x=Q.learningElements)||void 0===x?void 0:null===(h=x.find(e=>"action_item"===e.type))||void 0===h?void 0:h.id)||""])||void 0===m?void 0:m.isCompletedOverall),children:(0,i.jsxs)(b(),{href:"/programs/".concat(H,"/week/").concat(eS.id),children:["Next Week: ",eS.title," ",(0,i.jsx)(B.A,{className:"ml-2 h-4 w-4"})]})}):(0,i.jsx)("div",{className:"w-full sm:w-auto"})]}),(0,i.jsx)(O.lG,{open:ex,onOpenChange:e=>{e||ev(null),ep(e)},children:(0,i.jsxs)(O.Cf,{className:"sm:max-w-xl",children:[(0,i.jsxs)(O.c7,{children:[(0,i.jsx)(O.L3,{children:ef?"Edit My Checklist":"Create New Personal Checklist"}),(0,i.jsx)(O.rr,{children:ef?"Modify your checklist details.":"Add items you want to track for this program."})]}),el&&Y&&Q&&(0,i.jsx)(K,{initialData:ef||{},onSubmit:eb,onCancel:()=>{ep(!1),ev(null)},programId:Y.id,weekId:Q.id,userId:el.id})]})})]})}},93223:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(40157).A)("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,9855,5769,6874,1509,1263,1174,5521,822,9098,4547,5916,9127,3708,8441,1684,7358],()=>t(82579)),_N_E=e.O()}]);