(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1992],{13807:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ee});var r=a(95155),s=a(12115),o=a(30285),n=a(39022),l=a(36268),d=a(11032),i=a(85127),c=a(62523),u=a(26126),m=a(76603),f=a(37648),p=a(8376),x=a(50594),g=a(27150),h=a(3561),y=a(9572),v=a(44838),j=a(83343),b=a(53941),N=a(63482),w=a(83013),C=a(59434),D=a(59409);let S=e=>{let t=new Date;if("void"===e.status)return{text:"Void",icon:m.A,className:"bg-gray-500 text-white"};let a=(0,j.H)(e.registrationStartDate),r=(0,j.H)(e.registrationEndDate);if(e.registeredByUserId&&e.accessExpiresDate){let a=(0,j.H)(e.accessExpiresDate);return(0,b.d)(t,a)?{text:"Expired (Access)",icon:f.A,className:"bg-red-200 text-red-700"}:{text:"Active",icon:p.A,className:"bg-green-200 text-green-700"}}return(0,b.d)(t,r)?{text:"Expired (Registration)",icon:f.A,className:"bg-orange-200 text-orange-700"}:(0,N.Y)(t,a)?{text:"Upcoming",icon:x.A,className:"bg-blue-200 text-blue-700"}:{text:"Available",icon:p.A,className:"bg-green-200 text-green-700"}},R=(e,t)=>[{accessorKey:"code",header:e=>{let{column:t}=e;return(0,r.jsxs)(o.$,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Code ",(0,r.jsx)(g.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,r.jsx)("div",{className:"font-mono font-medium",children:t.getValue("code")})}},{accessorKey:"programId",header:"Program",cell:e=>{let{row:a}=e,s=a.getValue("programId"),o=t.find(e=>e.id===s);return o?o.title:(0,r.jsx)("span",{className:"text-muted-foreground",children:"Unknown Program"})},filterFn:(e,t,a)=>e.original.programId===a},{id:"status",accessorFn:e=>S(e).text,header:e=>{let{column:t}=e;return(0,r.jsxs)(o.$,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Status ",(0,r.jsx)(g.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e,a=S(t.original),s=a.icon;return(0,r.jsxs)(u.E,{variant:"outline",className:(0,C.cn)("capitalize",a.className),children:[(0,r.jsx)(s,{className:"mr-1.5 h-3.5 w-3.5"})," ",a.text]})},filterFn:(e,t,a)=>a.includes(S(e.original).text)},{accessorKey:"registrationStartDate",header:"Reg. Start",cell:e=>{let{row:t}=e;return(0,w.GP)((0,j.H)(t.getValue("registrationStartDate")),"yyyy-MM-dd")}},{accessorKey:"registrationEndDate",header:"Reg. End",cell:e=>{let{row:t}=e;return(0,w.GP)((0,j.H)(t.getValue("registrationEndDate")),"yyyy-MM-dd")}},{accessorKey:"accessDurationDays",header:"Access (Days)",cell:e=>{let{row:t}=e;return(0,r.jsx)("div",{className:"text-center",children:t.getValue("accessDurationDays")})}},{accessorKey:"registeredByUserName",header:"Registered By",cell:e=>{let{row:t}=e;return t.getValue("registeredByUserName")||(0,r.jsx)("span",{className:"text-muted-foreground",children:"-"})}},{accessorKey:"accessExpiresDate",header:"Access Expires",cell:e=>{let{row:t}=e,a=t.getValue("accessExpiresDate");return a?(0,w.GP)((0,j.H)(a),"yyyy-MM-dd"):(0,r.jsx)("span",{className:"text-muted-foreground",children:"-"})}},{id:"actions",cell:t=>{let{row:a}=t,s=a.original,n=S(s);return(0,r.jsxs)(v.DropdownMenu,{children:[(0,r.jsx)(v.DropdownMenuTrigger,{asChild:!0,children:(0,r.jsxs)(o.$,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,r.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,r.jsx)(h.A,{className:"h-4 w-4"})]})}),(0,r.jsxs)(v.DropdownMenuContent,{align:"end",children:[(0,r.jsx)(v.DropdownMenuLabel,{children:"Voucher Actions"}),(0,r.jsxs)(v.DropdownMenuItem,{disabled:!0,children:[(0,r.jsx)(x.A,{className:"mr-2 h-4 w-4"})," View Details (Soon)"]}),"Void"!==n.text&&"Expired (Access)"!==n.text&&"Expired (Registration)"!==n.text&&(0,r.jsxs)(v.DropdownMenuItem,{onClick:()=>{confirm("Are you sure you want to deactivate voucher: ".concat(s.code,"?"))&&e(s.id)},className:"text-destructive focus:text-destructive focus:bg-destructive/10 cursor-pointer",children:[(0,r.jsx)(m.A,{className:"mr-2 h-4 w-4"})," Deactivate Voucher"]})]})]})}}];function A(e){var t,a,n,u,m,f,p;let{data:x,programs:g,onDeactivateVoucher:h}=e,[v,j]=s.useState([{id:"code",desc:!1}]),[b,N]=s.useState([]),w=s.useMemo(()=>R(h,g),[h,g]),C=s.useMemo(()=>{let e=new Set;return x.forEach(t=>e.add(S(t).text)),Array.from(e).sort()},[x]),A=(0,l.N4)({data:x,columns:w,getCoreRowModel:(0,d.HT)(),getPaginationRowModel:(0,d.kW)(),onSortingChange:j,getSortedRowModel:(0,d.h5)(),onColumnFiltersChange:N,getFilteredRowModel:(0,d.hM)(),state:{sorting:v,columnFilters:b}});return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center py-4 gap-2",children:[(0,r.jsx)(c.p,{placeholder:"Filter by code...",value:null!==(m=null===(t=A.getColumn("code"))||void 0===t?void 0:t.getFilterValue())&&void 0!==m?m:"",onChange:e=>{var t;return null===(t=A.getColumn("code"))||void 0===t?void 0:t.setFilterValue(e.target.value)},className:"max-w-xs h-10"}),(0,r.jsxs)(D.l6,{value:null!==(f=null===(a=A.getColumn("programId"))||void 0===a?void 0:a.getFilterValue())&&void 0!==f?f:"",onValueChange:e=>{var t;null===(t=A.getColumn("programId"))||void 0===t||t.setFilterValue("all"===e?"":e)},children:[(0,r.jsxs)(D.bq,{className:"max-w-xs h-10 md:w-[280px]",children:[(0,r.jsx)(y.A,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(D.yv,{placeholder:"Filter by program..."})]}),(0,r.jsxs)(D.gC,{children:[(0,r.jsx)(D.eb,{value:"all",children:"All Programs"}),g.map(e=>(0,r.jsx)(D.eb,{value:e.id,children:e.title},e.id))]})]}),(0,r.jsxs)(D.l6,{value:null!==(p=null===(n=A.getColumn("status"))||void 0===n?void 0:n.getFilterValue())&&void 0!==p?p:"",onValueChange:e=>{var t;null===(t=A.getColumn("status"))||void 0===t||t.setFilterValue("all"===e?"":e)},children:[(0,r.jsxs)(D.bq,{className:"max-w-xs h-10",children:[(0,r.jsx)(y.A,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(D.yv,{placeholder:"Filter by status..."})]}),(0,r.jsxs)(D.gC,{children:[(0,r.jsx)(D.eb,{value:"all",children:"All Statuses"}),C.map(e=>(0,r.jsx)(D.eb,{value:e,children:e},e))]})]})]}),(0,r.jsx)("div",{className:"rounded-md border",children:(0,r.jsxs)(i.XI,{children:[(0,r.jsx)(i.A0,{children:A.getHeaderGroups().map(e=>(0,r.jsx)(i.Hj,{children:e.headers.map(e=>(0,r.jsx)(i.nd,{children:e.isPlaceholder?null:(0,l.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,r.jsx)(i.BF,{children:(null===(u=A.getRowModel().rows)||void 0===u?void 0:u.length)?A.getRowModel().rows.map(e=>(0,r.jsx)(i.Hj,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,r.jsx)(i.nA,{children:(0,l.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,r.jsx)(i.Hj,{children:(0,r.jsx)(i.nA,{colSpan:w.length,className:"h-24 text-center",children:"No vouchers found."})})})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,r.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>A.previousPage(),disabled:!A.getCanPreviousPage(),children:"Previous"}),(0,r.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>A.nextPage(),disabled:!A.getCanNextPage(),children:"Next"})]})]})}var I=a(66695),M=a(87481),E=a(34301),P=a(62177),V=a(90221),_=a(55594),k=a(17759),T=a(54165),F=a(70831),O=a(94394),U=a(11133),z=a(51920),J=a(20547);let L=J.bL,G=J.l9,H=s.forwardRef((e,t)=>{let{className:a,align:s="center",sideOffset:o=4,...n}=e;return(0,r.jsx)(J.ZL,{children:(0,r.jsx)(J.UC,{ref:t,align:s,sideOffset:o,className:(0,C.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});H.displayName=J.UC.displayName;var B=a(965),q=a(73158),Z=a(577);function $(e){let{className:t,classNames:a,showOutsideDays:s=!0,...n}=e;return(0,r.jsx)(Z.hv,{showOutsideDays:s,className:(0,C.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,C.cn)((0,o.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,C.cn)((0,o.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,r.jsx)(B.A,{className:(0,C.cn)("h-4 w-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,r.jsx)(q.A,{className:(0,C.cn)("h-4 w-4",t),...a})}},...n})}$.displayName="Calendar";var K=a(47262);let Y=()=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",t="0123456789",a="";for(let t=0;t<2;t++)a+=e.charAt(Math.floor(Math.random()*e.length));for(let e=0;e<4;e++)a+=t.charAt(Math.floor(Math.random()*t.length));return a},W=_.Ik({count:_.au.number().min(1,"Must generate at least 1 voucher.").max(100,"Cannot generate more than 100 vouchers at a time."),programIds:_.YO(_.Yj()).min(1,"At least one program must be selected."),registrationStartDate:_.p6({required_error:"Registration start date is required."}),registrationEndDate:_.p6({required_error:"Registration end date is required."}),accessDurationDays:_.au.number().min(1,"Access duration must be at least 1 day.")}).refine(e=>e.registrationEndDate>=e.registrationStartDate,{message:"Registration end date cannot be before start date.",path:["registrationEndDate"]});function X(e){let{isOpen:t,onClose:a,onGenerate:n,programs:l}=e,d=(0,P.mN)({resolver:(0,V.u)(W),defaultValues:{count:1,programIds:[],accessDurationDays:30,registrationStartDate:new Date,registrationEndDate:(0,F.f)(new Date,30)}}),[i,u]=(0,s.useState)(""),[m,f]=(0,s.useState)(""),p=e=>{if(0===e.length)return f(""),!0;let t=/^[A-Z]{2}\d{4}$/.test(e);return t?f(""):f("Custom code must be 2 uppercase letters followed by 4 digits (e.g., AB1234)."),t},x=e=>{if(0===e.length)return;let t=e.map(e=>{var t;let a=(null===(t=e.programTitle)||void 0===t?void 0:t.includes(","))?'"'.concat(e.programTitle,'"'):e.programTitle;return"".concat(e.code,",").concat(a,",").concat(e.registrationStartDate,",").concat(e.registrationEndDate,",").concat(e.accessDurationDays)}).join("\n"),a=new Blob(["".concat("Code,ProgramTitle,RegistrationStartDate,RegistrationEndDate,AccessDurationDays","\n").concat(t)],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");if(void 0!==r.download){let e=URL.createObjectURL(a);r.setAttribute("href",e),r.setAttribute("download","vouchers-".concat((0,w.GP)(new Date,"yyyyMMddHHmmss"),".csv")),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(e)}else alert("Could not automatically download the file. Your browser might not support this feature.")};return(0,r.jsx)(T.lG,{open:t,onOpenChange:a,children:(0,r.jsxs)(T.Cf,{className:"sm:max-w-lg",children:[(0,r.jsxs)(T.c7,{children:[(0,r.jsxs)(T.L3,{className:"flex items-center",children:[(0,r.jsx)(O.A,{className:"mr-2 h-6 w-6 text-primary"}),"Generate Program Vouchers"]}),(0,r.jsx)(T.rr,{children:"Create new vouchers to grant access to specific programs."})]}),(0,r.jsx)(k.lV,{...d,children:(0,r.jsxs)("form",{onSubmit:d.handleSubmit(e=>{let{count:t,programIds:r,registrationStartDate:s,registrationEndDate:o,accessDurationDays:c}=e,m=[],g=new Set,h=(0,w.GP)(new Date,"yyyy-MM-dd"),y=!0;if(1===t&&i&&!p(i)){d.setError("root",{message:"Invalid custom code provided."});return}r.forEach((e,a)=>{if(!y)return;let r=l.find(t=>t.id===e);if(!r){console.warn("Program with ID ".concat(e," not found during voucher generation.")),d.setError("programIds",{message:"Program ID ".concat(e," is invalid.")}),y=!1;return}for(let n=0;n<t;n++){let l;if(1===t&&i&&0===a&&0===n){if(g.has(i)){f("Custom code ".concat(i," conflicts with a generated code in this batch or is already used.")),y=!1;return}l=i}else do l=Y();while(g.has(l));g.add(l),m.push({id:l,code:l,programId:e,programTitle:r.title,registrationStartDate:(0,w.GP)(s,"yyyy-MM-dd"),registrationEndDate:(0,w.GP)(o,"yyyy-MM-dd"),accessDurationDays:c,status:"available",createdAt:h})}}),y&&m.length>0?(n(m),x(m),d.reset({count:1,programIds:[],accessDurationDays:30,registrationStartDate:new Date,registrationEndDate:(0,F.f)(new Date,30)}),u(""),f(""),a()):y&&r.length>0&&0===m.length&&t>0&&console.log("Voucher generation halted or resulted in no vouchers. Check form errors or logs.")}),className:"space-y-4 py-2 max-h-[70vh] overflow-y-auto pr-2",children:[(0,r.jsx)(k.zB,{control:d.control,name:"programIds",render:e=>{let{field:t}=e;return(0,r.jsxs)(k.eI,{children:[(0,r.jsx)(k.lR,{children:"Associate with Programs"}),(0,r.jsx)(k.Rr,{children:"Select one or more programs for these vouchers."}),(0,r.jsxs)("div",{className:"space-y-2 rounded-md border p-4 max-h-48 overflow-y-auto bg-background",children:[0===l.length&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"No programs available to select."}),l.map(e=>{var a;return(0,r.jsxs)(k.eI,{className:"flex flex-row items-center space-x-3 space-y-0",children:[(0,r.jsx)(k.MJ,{children:(0,r.jsx)(K.S,{checked:null===(a=t.value)||void 0===a?void 0:a.includes(e.id),onCheckedChange:a=>{let r=t.value||[],s=a?[...r,e.id]:r.filter(t=>t!==e.id);t.onChange(s)}})}),(0,r.jsx)(k.lR,{className:"font-normal cursor-pointer",children:e.title})]},e.id)})]}),(0,r.jsx)(k.C5,{})]})}}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsx)(k.zB,{control:d.control,name:"count",render:e=>{let{field:t}=e;return(0,r.jsxs)(k.eI,{children:[(0,r.jsx)(k.lR,{children:"Number of Vouchers"}),(0,r.jsx)(k.MJ,{children:(0,r.jsx)(c.p,{type:"number",...t})}),(0,r.jsx)(k.Rr,{children:"Max 100. For 1, you can set a custom code below."}),(0,r.jsx)(k.C5,{})]})}}),(0,r.jsxs)(k.eI,{children:[(0,r.jsx)(k.lR,{children:"Custom Code (for 1 voucher)"}),(0,r.jsx)(k.MJ,{children:(0,r.jsx)(c.p,{placeholder:"e.g., AB1234 (Optional)",value:i,onChange:e=>{let t=e.target.value.toUpperCase();u(t),1===d.getValues("count")?p(t):f("")},disabled:1!==d.watch("count")})}),m&&(0,r.jsxs)("p",{className:"text-sm font-medium text-destructive flex items-center pt-1",children:[(0,r.jsx)(U.A,{className:"h-4 w-4 mr-1"}),m]})]})]}),(0,r.jsx)(k.zB,{control:d.control,name:"registrationStartDate",render:e=>{let{field:t}=e;return(0,r.jsxs)(k.eI,{className:"flex flex-col",children:[(0,r.jsx)(k.lR,{children:"Registration Valid From"}),(0,r.jsxs)(L,{children:[(0,r.jsx)(G,{asChild:!0,children:(0,r.jsx)(k.MJ,{children:(0,r.jsxs)(o.$,{variant:"outline",className:(0,C.cn)("w-full pl-3 text-left font-normal",!t.value&&"text-muted-foreground"),children:[t.value?(0,w.GP)(t.value,"PPP"):(0,r.jsx)("span",{children:"Pick a date"}),(0,r.jsx)(z.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,r.jsx)(H,{className:"w-auto p-0",align:"start",children:(0,r.jsx)($,{mode:"single",selected:t.value,onSelect:t.onChange,initialFocus:!0})})]}),(0,r.jsx)(k.C5,{})]})}}),(0,r.jsx)(k.zB,{control:d.control,name:"registrationEndDate",render:e=>{let{field:t}=e;return(0,r.jsxs)(k.eI,{className:"flex flex-col",children:[(0,r.jsx)(k.lR,{children:"Registration Valid Until"}),(0,r.jsxs)(L,{children:[(0,r.jsx)(G,{asChild:!0,children:(0,r.jsx)(k.MJ,{children:(0,r.jsxs)(o.$,{variant:"outline",className:(0,C.cn)("w-full pl-3 text-left font-normal",!t.value&&"text-muted-foreground"),children:[t.value?(0,w.GP)(t.value,"PPP"):(0,r.jsx)("span",{children:"Pick a date"}),(0,r.jsx)(z.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,r.jsx)(H,{className:"w-auto p-0",align:"start",children:(0,r.jsx)($,{mode:"single",selected:t.value,onSelect:t.onChange,initialFocus:!0})})]}),(0,r.jsx)(k.C5,{})]})}}),(0,r.jsx)(k.zB,{control:d.control,name:"accessDurationDays",render:e=>{let{field:t}=e;return(0,r.jsxs)(k.eI,{children:[(0,r.jsx)(k.lR,{children:"Program Access Duration (Days)"}),(0,r.jsx)(k.MJ,{children:(0,r.jsx)(c.p,{type:"number",...t})}),(0,r.jsx)(k.Rr,{children:"Number of days the program is accessible after voucher registration."}),(0,r.jsx)(k.C5,{})]})}}),d.formState.errors.root&&(0,r.jsx)(k.C5,{children:d.formState.errors.root.message}),(0,r.jsxs)(T.Es,{children:[(0,r.jsx)(o.$,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),(0,r.jsx)(o.$,{type:"submit",className:"bg-accent hover:bg-accent/90 text-accent-foreground",children:"Generate Vouchers"})]})]})})]})})}let Q="mockVouchers";function ee(){let[e,t]=(0,s.useState)([]),[a,l]=(0,s.useState)([]),[d,i]=(0,s.useState)(!0),[c,u]=(0,s.useState)(!1),{toast:m}=(0,M.dj)(),f=(0,s.useCallback)(e=>{let a=localStorage.getItem(Q),r=n.oU;if(a)try{r=JSON.parse(a)}catch(e){console.error("Error parsing vouchers from localStorage:",e)}else localStorage.setItem(Q,JSON.stringify(n.oU));t(r.map(t=>{var a;return{...t,programTitle:(null===(a=e.find(e=>e.id===t.programId))||void 0===a?void 0:a.title)||"Unknown Program"}}))},[]);return((0,s.useEffect)(()=>{let e=localStorage.getItem("mockPrograms"),t=n.SR;if(e)try{t=JSON.parse(e),l(t)}catch(e){console.error("Error parsing programs from localStorage:",e),l(n.SR)}else l(n.SR);f(t),i(!1)},[f]),d)?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Loading vouchers..."})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-primary",children:"Voucher Management"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Create, view, and manage program access vouchers."})]}),(0,r.jsxs)(o.$,{onClick:()=>u(!0),className:"bg-accent hover:bg-accent/90 text-accent-foreground",children:[(0,r.jsx)(E.A,{className:"mr-2 h-5 w-5"}),"Generate Vouchers"]})]}),(0,r.jsxs)(I.Zp,{className:"shadow-lg",children:[(0,r.jsxs)(I.aR,{children:[(0,r.jsx)(I.ZB,{children:"All Vouchers"}),(0,r.jsx)(I.BT,{children:"A list of all vouchers in the system."})]}),(0,r.jsx)(I.Wu,{children:(0,r.jsx)(A,{data:e,programs:a,onDeactivateVoucher:e=>{t(t=>t.map(t=>t.id===e?{...t,status:"void"}:t));let a=JSON.parse(localStorage.getItem(Q)||"[]").map(t=>t.id===e?{...t,status:"void"}:t);localStorage.setItem(Q,JSON.stringify(a)),m({title:"Voucher Deactivated",description:"Voucher ".concat(e," has been voided."),variant:"destructive"})}})})]}),(0,r.jsx)(X,{isOpen:c,onClose:()=>u(!1),onGenerate:r=>{let s=[...e,...r.map(e=>{var t;return{...e,programTitle:(null===(t=a.find(t=>t.id===e.programId))||void 0===t?void 0:t.title)||"Unknown Program"}})];t(s),localStorage.setItem(Q,JSON.stringify(s.map(e=>{let{programTitle:t,...a}=e;return a}))),m({title:"Vouchers Generated",description:"".concat(r.length," voucher(s) have been successfully created.")}),u(!1)},programs:a})]})}},17759:(e,t,a)=>{"use strict";a.d(t,{C5:()=>y,MJ:()=>g,Rr:()=>h,eI:()=>p,lR:()=>x,lV:()=>i,zB:()=>u});var r=a(95155),s=a(12115),o=a(99708),n=a(62177),l=a(59434),d=a(85057);let i=n.Op,c=s.createContext({}),u=e=>{let{...t}=e;return(0,r.jsx)(c.Provider,{value:{name:t.name},children:(0,r.jsx)(n.xI,{...t})})},m=()=>{let e=s.useContext(c),t=s.useContext(f),{getFieldState:a,formState:r}=(0,n.xW)(),o=a(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...o}},f=s.createContext({}),p=s.forwardRef((e,t)=>{let{className:a,...o}=e,n=s.useId();return(0,r.jsx)(f.Provider,{value:{id:n},children:(0,r.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",a),...o})})});p.displayName="FormItem";let x=s.forwardRef((e,t)=>{let{className:a,...s}=e,{error:o,formItemId:n}=m();return(0,r.jsx)(d.J,{ref:t,className:(0,l.cn)(o&&"text-destructive",a),htmlFor:n,...s})});x.displayName="FormLabel";let g=s.forwardRef((e,t)=>{let{...a}=e,{error:s,formItemId:n,formDescriptionId:l,formMessageId:d}=m();return(0,r.jsx)(o.DX,{ref:t,id:n,"aria-describedby":s?"".concat(l," ").concat(d):"".concat(l),"aria-invalid":!!s,...a})});g.displayName="FormControl";let h=s.forwardRef((e,t)=>{let{className:a,...s}=e,{formDescriptionId:o}=m();return(0,r.jsx)("p",{ref:t,id:o,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});h.displayName="FormDescription";let y=s.forwardRef((e,t)=>{var a;let{className:s,children:o,...n}=e,{error:d,formMessageId:i}=m(),c=d?String(null!==(a=null==d?void 0:d.message)&&void 0!==a?a:""):o;return c?(0,r.jsx)("p",{ref:t,id:i,className:(0,l.cn)("text-sm font-medium text-destructive",s),...n,children:c}):null});y.displayName="FormMessage"},26126:(e,t,a)=>{"use strict";a.d(t,{E:()=>l});var r=a(95155);a(12115);var s=a(74466),o=a(59434);let n=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,o.cn)(n({variant:a}),t),...s})}},44838:(e,t,a)=>{"use strict";a.d(t,{DropdownMenu:()=>c,DropdownMenuContent:()=>m,DropdownMenuItem:()=>f,DropdownMenuLabel:()=>p,DropdownMenuSeparator:()=>x,DropdownMenuTrigger:()=>u});var r=a(95155),s=a(12115),o=a(48698),n=a(73158),l=a(10518),d=a(70154),i=a(59434);let c=o.bL,u=o.l9;o.YJ,o.ZL,o.Pb,o.z6,s.forwardRef((e,t)=>{let{className:a,inset:s,children:l,...d}=e;return(0,r.jsxs)(o.ZP,{ref:t,className:(0,i.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",a),...d,children:[l,(0,r.jsx)(n.A,{className:"ml-auto"})]})}).displayName=o.ZP.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(o.G5,{ref:t,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})}).displayName=o.G5.displayName;let m=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...n}=e;return(0,r.jsx)(o.ZL,{children:(0,r.jsx)(o.UC,{ref:t,sideOffset:s,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});m.displayName=o.UC.displayName;let f=s.forwardRef((e,t)=>{let{className:a,inset:s,...n}=e;return(0,r.jsx)(o.q7,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",a),...n})});f.displayName=o.q7.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,checked:n,...d}=e;return(0,r.jsxs)(o.H_,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...d,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(o.VF,{children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})}),s]})}).displayName=o.H_.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(o.hN,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(o.VF,{children:(0,r.jsx)(d.A,{className:"h-2 w-2 fill-current"})})}),s]})}).displayName=o.hN.displayName;let p=s.forwardRef((e,t)=>{let{className:a,inset:s,...n}=e;return(0,r.jsx)(o.JU,{ref:t,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",a),...n})});p.displayName=o.JU.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(o.wv,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",a),...s})});x.displayName=o.wv.displayName},47262:(e,t,a)=>{"use strict";a.d(t,{S:()=>d});var r=a(95155),s=a(12115),o=a(76981),n=a(10518),l=a(59434);let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(o.bL,{ref:t,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...s,children:(0,r.jsx)(o.C1,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})})});d.displayName=o.bL.displayName},54165:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>u,Es:()=>f,L3:()=>p,c7:()=>m,lG:()=>d,rr:()=>x});var r=a(95155),s=a(12115),o=a(15452),n=a(25318),l=a(59434);let d=o.bL;o.l9;let i=o.ZL;o.bm;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(o.hJ,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});c.displayName=o.hJ.displayName;let u=s.forwardRef((e,t)=>{let{className:a,children:s,...d}=e;return(0,r.jsxs)(i,{children:[(0,r.jsx)(c,{}),(0,r.jsxs)(o.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[s,(0,r.jsxs)(o.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(n.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=o.UC.displayName;let m=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};m.displayName="DialogHeader";let f=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};f.displayName="DialogFooter";let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(o.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});p.displayName=o.hE.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(o.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});x.displayName=o.VY.displayName},59409:(e,t,a)=>{"use strict";a.d(t,{bq:()=>m,eb:()=>g,gC:()=>x,l6:()=>c,yv:()=>u});var r=a(95155),s=a(12115),o=a(31992),n=a(79556),l=a(77381),d=a(10518),i=a(59434);let c=o.bL;o.YJ;let u=o.WT,m=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(o.l9,{ref:t,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[s,(0,r.jsx)(o.In,{asChild:!0,children:(0,r.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=o.l9.displayName;let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(o.PP,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})});f.displayName=o.PP.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(o.wn,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})});p.displayName=o.wn.displayName;let x=s.forwardRef((e,t)=>{let{className:a,children:s,position:n="popper",...l}=e;return(0,r.jsx)(o.ZL,{children:(0,r.jsxs)(o.UC,{ref:t,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...l,children:[(0,r.jsx)(f,{}),(0,r.jsx)(o.LM,{className:(0,i.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(p,{})]})})});x.displayName=o.UC.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(o.JU,{ref:t,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=o.JU.displayName;let g=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(o.q7,{ref:t,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(o.VF,{children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})}),(0,r.jsx)(o.p4,{children:s})]})});g.displayName=o.q7.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(o.wv,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=o.wv.displayName},62523:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var r=a(95155),s=a(12115),o=a(59434);let n=s.forwardRef((e,t)=>{let{className:a,type:s,...n}=e;return(0,r.jsx)("input",{type:s,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});n.displayName="Input"},81918:(e,t,a)=>{Promise.resolve().then(a.bind(a,13807))},85057:(e,t,a)=>{"use strict";a.d(t,{J:()=>i});var r=a(95155),s=a(12115),o=a(40968),n=a(74466),l=a(59434);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(o.b,{ref:t,className:(0,l.cn)(d(),a),...s})});i.displayName=o.b.displayName},85127:(e,t,a)=>{"use strict";a.d(t,{A0:()=>l,BF:()=>d,Hj:()=>i,XI:()=>n,nA:()=>u,nd:()=>c});var r=a(95155),s=a(12115),o=a(59434);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,o.cn)("w-full caption-bottom text-sm",a),...s})})});n.displayName="Table";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,o.cn)("[&_tr]:border-b",a),...s})});l.displayName="TableHeader";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,o.cn)("[&_tr:last-child]:border-0",a),...s})});d.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});i.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,o.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})});c.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,o.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",a),...s})}).displayName="TableCaption"},87481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>m});var r=a(12115);let s=0,o=new Map,n=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],i={toasts:[]};function c(e){i=l(i,e),d.forEach(e=>{e(i)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=r.useState(i);return r.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[5769,1509,1263,9764,1859,5521,8782,9191,822,2852,5916,8441,1684,7358],()=>t(81918)),_N_E=e.O()}]);