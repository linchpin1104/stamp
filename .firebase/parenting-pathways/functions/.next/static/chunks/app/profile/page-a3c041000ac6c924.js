(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6636],{17313:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>d,av:()=>c,j7:()=>n,tU:()=>o});var r=t(95155),a=t(12115),l=t(60704),i=t(59434);let o=l.bL,n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.B8,{ref:s,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...a})});n.displayName=l.B8.displayName;let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.l9,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...a})});d.displayName=l.l9.displayName;let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.UC,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...a})});c.displayName=l.UC.displayName},37108:(e,s,t)=>{Promise.resolve().then(t.bind(t,72483))},72483:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>eu});var r=t(95155),a=t(12115),l=t(35695),i=t(30285),o=t(66695),n=t(62523),d=t(85057),c=t(91394),m=t(17313),h=t(19637),x=t(15222),u=t(28294),p=t(31554),j=t(99274),g=t(83662),v=t(50286),f=t(98328),N=t(77223),y=t(59119),b=t(45242),w=t(28274),C=t(87267),A=t(94394),S=t(77501),I=t(81203),T=t(91467),M=t(11133),k=t(34301),D=t(59409),P=t(76202),R=t(88539),Y=t(39022),L=t(54165),E=t(62177),B=t(90221),V=t(55594),U=t(17759);let _=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"item";return"".concat(e,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,7))},Z=V.Ik({id:V.Yj(),text:V.Yj().min(1,"To-do text is required")}),W=V.Ik({id:V.Yj().default(()=>_("userTodo")),title:V.Yj().min(1,"Title is required"),description:V.Yj().min(1,"Description is required"),todoItems:V.YO(Z).min(1,"At least one to-do item is required."),type:V.eu("todo_list").default("todo_list"),isUserCreated:V.zM().default(!0)});function J(e){var s,t,a,l,o;let{initialData:d,onSubmit:c,onCancel:m}=e,h=(0,E.mN)({resolver:(0,B.u)(W),defaultValues:{id:(null==d?void 0:d.id)||_("userTodo"),title:(null==d?void 0:d.title)||"",description:(null==d?void 0:d.description)||"",todoItems:(null==d?void 0:null===(s=d.todoItems)||void 0===s?void 0:s.map(e=>({...e,id:e.id||_("todoSubItem")})))||[{id:_("todoSubItem"),text:""}],type:"todo_list",isUserCreated:!0}}),{fields:x,append:u,remove:p}=(0,E.jz)({control:h.control,name:"todoItems"});return(0,r.jsx)(U.lV,{...h,children:(0,r.jsxs)("form",{onSubmit:h.handleSubmit(e=>{c({...e,todoItems:e.todoItems.map(e=>({...e,id:e.id||_("todoSubItem"),isCompleted:!1}))})}),className:"space-y-6 p-1 max-h-[70vh] overflow-y-auto",children:[(0,r.jsx)(U.zB,{control:h.control,name:"title",render:e=>{let{field:s}=e;return(0,r.jsxs)(U.eI,{children:[(0,r.jsx)(U.lR,{children:"To-Do List Title"}),(0,r.jsx)(U.MJ,{children:(0,r.jsx)(n.p,{placeholder:"e.g., My Weekly Goals",...s})}),(0,r.jsx)(U.C5,{})]})}}),(0,r.jsx)(U.zB,{control:h.control,name:"description",render:e=>{let{field:s}=e;return(0,r.jsxs)(U.eI,{children:[(0,r.jsx)(U.lR,{children:"Description"}),(0,r.jsx)(U.MJ,{children:(0,r.jsx)(R.T,{placeholder:"What is this to-do list about?",...s,rows:3})}),(0,r.jsx)(U.C5,{})]})}}),(0,r.jsxs)("div",{className:"space-y-3 p-3 border rounded-md bg-muted/30",children:[(0,r.jsx)(U.lR,{children:"To-Do Items"}),x.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(U.zB,{control:h.control,name:"todoItems.".concat(s,".text"),render:e=>{let{field:t}=e;return(0,r.jsx)(n.p,{placeholder:"Task ".concat(s+1),...t,className:"flex-grow"})}}),(0,r.jsx)(i.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>p(s),children:(0,r.jsx)(N.A,{className:"h-4 w-4 text-destructive"})})]},e.id)),(0,r.jsxs)(i.$,{type:"button",variant:"outline",size:"sm",onClick:()=>u({id:_("todoSubItem"),text:""}),children:[(0,r.jsx)(k.A,{className:"h-4 w-4 mr-2"})," Add Task"]}),(0,r.jsx)(U.C5,{children:(null===(a=h.formState.errors)||void 0===a?void 0:null===(t=a.todoItems)||void 0===t?void 0:t.message)||(null===(o=h.formState.errors.todoItems)||void 0===o?void 0:null===(l=o.root)||void 0===l?void 0:l.message)})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 sticky bottom-0 bg-popover py-3 border-t -mx-1 px-1",children:[(0,r.jsx)(i.$,{type:"button",variant:"outline",onClick:m,children:"Cancel"}),(0,r.jsx)(i.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save To-Do List"})]})]})})}var $=t(35141),z=t(47655),F=t(59434);let O=a.forwardRef((e,s)=>{let{className:t,children:a,...l}=e;return(0,r.jsxs)(z.bL,{ref:s,className:(0,F.cn)("relative overflow-hidden",t),...l,children:[(0,r.jsx)(z.LM,{className:"h-full w-full rounded-[inherit]",children:a}),(0,r.jsx)(H,{}),(0,r.jsx)(z.OK,{})]})});O.displayName=z.bL.displayName;let H=a.forwardRef((e,s)=>{let{className:t,orientation:a="vertical",...l}=e;return(0,r.jsx)(z.VM,{ref:s,orientation:a,className:(0,F.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...l,children:(0,r.jsx)(z.lr,{className:"relative flex-1 rounded-full bg-border"})})});H.displayName=z.VM.displayName;var X=t(83013),G=t(83343),q=t(60777),K=t(40207),Q=t(94063),ee=t(26126);let es=e=>q.N.find(s=>s.value===e),et={work:"업무",childcare:"육아",exercise:"운동",rest:"휴식",hobby:"취미",meal:"식사",outing:"외출",sleep:"수면",study:"공부",other_activity:"기타 활동"},er={child:"아이",family:"가족",parents:"부모님",friend:"친구",colleague:"직장동료",spouse:"배우자",alone:"혼자",other_with_whom:"기타"};function ea(e){let{moodLog:s=[]}=e;if(0===s.length)return(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{className:"text-xl text-primary",children:"나의 기분 기록"}),(0,r.jsx)(o.BT,{children:"시간에 따른 감정 변화를 추적해보세요."})]}),(0,r.jsx)(o.Wu,{children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"아직 기분 기록이 없습니다. 홈페이지에서 오늘의 기분을 기록해보세요!"})})]});let t=[...s].sort((e,s)=>new Date(s.date).getTime()-new Date(e.date).getTime());return(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{className:"text-xl text-primary",children:"나의 기분 기록"}),(0,r.jsx)(o.BT,{children:"기록된 감정 내역입니다. 패턴을 파악하고 스스로를 돌보세요."})]}),(0,r.jsx)(o.Wu,{children:(0,r.jsx)(O,{className:"h-[400px] pr-4",children:(0,r.jsx)("div",{className:"space-y-4",children:t.map(e=>{let s=es(e.moodValue),t=e.activity?et[e.activity]||e.activity:null,a=e.withWhom?er[e.withWhom]||e.withWhom:null;return"other_with_whom"===e.withWhom&&e.customWithWhom&&(a=e.customWithWhom),(0,r.jsx)(o.Zp,{className:"bg-card shadow-sm hover:shadow-md transition-shadow",children:(0,r.jsxs)(o.Wu,{className:"p-4",children:[(0,r.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("span",{className:"text-3xl",children:(null==s?void 0:s.emoji)||"❓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-md font-semibold text-foreground",children:(null==s?void 0:s.koreanLabel)||(null==s?void 0:s.label)||e.moodValue}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center",children:[(0,r.jsx)(f.A,{className:"h-3 w-3 mr-1"})," ",(0,X.GP)((0,G.H)(e.date),"PPP")]})]})]})}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[t&&(0,r.jsxs)(ee.E,{variant:"outline",className:"text-xs font-normal",children:[(0,r.jsx)(K.A,{className:"h-3 w-3 mr-1.5"})," 활동: ",t]}),a&&(0,r.jsxs)(ee.E,{variant:"outline",className:"text-xs font-normal ml-1.5",children:[(0,r.jsx)(v.A,{className:"h-3 w-3 mr-1.5"})," 함께: ",a]})]}),e.notes&&(0,r.jsxs)("div",{className:"mt-2.5 text-sm text-foreground/80 bg-muted/50 p-3 rounded-md whitespace-pre-wrap flex items-start",children:[(0,r.jsx)(Q.A,{className:"h-4 w-4 mr-2 mt-0.5 text-muted-foreground shrink-0"}),(0,r.jsx)("span",{children:e.notes})]})]})},e.id)})})})})]})}var el=t(87481),ei=t(6874),eo=t.n(ei),en=t(52873),ed=t(70831),ec=t(53941),em=t(22346);let eh=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"item";return"".concat(e,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,7))},ex="mockVouchers";function eu(){let e=(0,l.useRouter)(),{toast:s}=(0,el.dj)(),[t,E]=(0,a.useState)(null),[B,V]=(0,a.useState)(!1),[U,_]=(0,a.useState)(""),[Z,W]=(0,a.useState)(""),[z,F]=(0,a.useState)(""),[O,H]=(0,a.useState)(""),[q,K]=(0,a.useState)(""),[Q,es]=(0,a.useState)([]),[et,er]=(0,a.useState)([]),[ei,eu]=(0,a.useState)([]),[ep,ej]=(0,a.useState)(!1),[eg,ev]=(0,a.useState)(null),[ef,eN]=(0,a.useState)([]),[ey,eb]=(0,a.useState)(!1),[ew,eC]=(0,a.useState)(null),[eA,eS]=(0,a.useState)(""),[eI,eT]=(0,a.useState)(""),[eM,ek]=(0,a.useState)([]),[eD,eP]=(0,a.useState)([]),[eR,eY]=(0,a.useState)(""),[eL,eE]=(0,a.useState)("");(0,a.useEffect)(()=>{let s;if("true"!==localStorage.getItem("isAuthenticated")){e.push("/auth/login");return}let t=localStorage.getItem("mockPrograms");if(t)try{er(JSON.parse(t))}catch(e){console.error("Error parsing programs from localStorage:",e),er(Y.SR)}else er(Y.SR);let r=localStorage.getItem("userProfile");if(r)s=JSON.parse(r);else{let e=localStorage.getItem("userName")||Y._o.name,t=localStorage.getItem("userEmail")||Y._o.email,r=localStorage.getItem("userPhoneNumber");s={...Y._o,name:e,email:t,phoneNumber:r||Y._o.phoneNumber,children:Array.isArray(Y._o.children)?Y._o.children:[],userMissions:Y._o.userMissions||[],completedProgramIds:Y._o.completedProgramIds||[],registeredVouchers:Y._o.registeredVouchers||[],moodLog:Y._o.moodLog||[]}}s.moodLog||(s.moodLog=[]),E(s),_(s.name),W(s.email),F(s.phoneNumber||""),H(s.residentialArea),K(s.parentalRole),es(s.children.map(e=>({id:e.id,birthYear:e.birthYear.toString()}))||[]),eu(s.customTodoLists||[]),eN(s.userMissions||[]),ek(s.completedProgramIds||[]),eP(s.moodLog||[])},[e]);let eB=(e,s)=>{let t=[...Q];t[e]={...t[e],birthYear:s},es(t)},eV=e=>{es(Q.filter(s=>s.id!==e))},eU=e=>{E(e),localStorage.setItem("userName",e.name),localStorage.setItem("userEmail",e.email),e.phoneNumber?localStorage.setItem("userPhoneNumber",e.phoneNumber):localStorage.removeItem("userPhoneNumber"),localStorage.setItem("userProfile",JSON.stringify(e))},e_=e=>{if(confirm("Are you sure you want to delete this to-do list?")){let r=ei.filter(s=>s.id!==e);eu(r),t&&eU({...t,customTodoLists:r,moodLog:eD}),s({title:"To-Do List Deleted",variant:"destructive"})}},eZ=e=>{ev(e),ej(!0)},eW=(e,s)=>{let r=ef.map(t=>t.id===e?{...t,progress:s}:t);eN(r),t&&eU({...t,userMissions:r,moodLog:eD})},eJ=e=>{eC(e),eS(e.title),eT(e.description||""),eb(!0)},e$=e=>{let r=ef.find(s=>s.id===e);if(!r||!r.isUserCreated){s({title:"Error",description:"Program-defined missions cannot be deleted here.",variant:"destructive"});return}if(confirm('Are you sure you want to delete the mission: "'.concat(r.title,'"?'))){let r=ef.filter(s=>s.id!==e);eN(r),t&&eU({...t,userMissions:r,moodLog:eD}),s({title:"Mission Deleted",variant:"destructive"})}};if(!t||0===et.length&&Y.SR.length>0)return(0,r.jsx)("div",{className:"text-center py-10",children:"Loading profile..."});let ez=new Date().getFullYear(),eF=ef.filter(e=>e.isUserCreated).length,eO=et.filter(e=>eM.includes(e.id));return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("header",{className:"flex flex-col sm:flex-row items-center justify-between pb-6 border-b gap-4 sm:gap-0",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(c.Avatar,{className:"h-16 w-16 sm:h-20 sm:w-20 border-2 border-primary",children:[(0,r.jsx)(c.AvatarImage,{src:t.avatarUrl,alt:t.name,"data-ai-hint":"user avatar large"}),(0,r.jsx)(c.AvatarFallback,{className:"text-2xl sm:text-3xl",children:t.name.charAt(0).toUpperCase()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-primary",children:t.name}),(0,r.jsxs)("p",{className:"text-sm sm:text-base text-muted-foreground flex items-center",children:[(0,r.jsx)(h.A,{className:"h-4 w-4 mr-1.5"}),t.email]})]})]}),(0,r.jsxs)(i.$,{variant:"outline",size:"lg",onClick:()=>V(!B),className:"w-full sm:w-auto",children:[(0,r.jsx)(x.A,{className:"mr-2 h-5 w-5"})," ",B?"Cancel Edit":"Edit Profile"]})]}),B?(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{className:"text-xl text-primary",children:"Edit Your Profile"}),(0,r.jsx)(o.BT,{children:"Update your personal and child information."})]}),(0,r.jsx)(o.Wu,{children:(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t&&(eU({...t,name:U,email:Z,phoneNumber:z.trim()||void 0,residentialArea:O,parentalRole:q,children:Q.filter(e=>e.birthYear&&!isNaN(parseInt(e.birthYear))).map(e=>({id:e.id,birthYear:parseInt(e.birthYear)})),customTodoLists:ei,userMissions:ef,completedProgramIds:eM,registeredVouchers:t.registeredVouchers||[],moodLog:eD}),s({title:"Profile Updated",description:"Your profile information has been saved."})),V(!1)},className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{htmlFor:"name",children:"Full Name"}),(0,r.jsxs)("div",{className:"relative mt-1",children:[(0,r.jsx)(u.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,r.jsx)(n.p,{id:"name",value:U,onChange:e=>_(e.target.value),className:"pl-10"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{htmlFor:"email",children:"Email Address"}),(0,r.jsxs)("div",{className:"relative mt-1",children:[(0,r.jsx)(h.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,r.jsx)(n.p,{id:"email",type:"email",value:Z,onChange:e=>W(e.target.value),className:"pl-10",required:!0})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{htmlFor:"phoneNumber",children:"Phone Number (Optional)"}),(0,r.jsxs)("div",{className:"relative mt-1",children:[(0,r.jsx)(p.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,r.jsx)(n.p,{id:"phoneNumber",type:"tel",value:z,onChange:e=>F(e.target.value),className:"pl-10",placeholder:"010-1234-5678"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{htmlFor:"parentalRole",children:"Your Role"}),(0,r.jsxs)(D.l6,{onValueChange:e=>K(e),value:q,children:[(0,r.jsxs)(D.bq,{className:"mt-1",children:[(0,r.jsx)(j.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,r.jsx)("span",{className:"pl-6",children:(0,r.jsx)(D.yv,{placeholder:"Select your role"})})]}),(0,r.jsxs)(D.gC,{children:[(0,r.jsx)(D.eb,{value:"mother",children:"Mother (엄마)"}),(0,r.jsx)(D.eb,{value:"father",children:"Father (아빠)"}),(0,r.jsx)(D.eb,{value:"grandparent",children:"Grandparent (조부모)"})]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{htmlFor:"residentialArea",children:"Residential Area"}),(0,r.jsxs)("div",{className:"relative mt-1",children:[(0,r.jsx)(g.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,r.jsx)(n.p,{id:"residentialArea",value:O,onChange:e=>H(e.target.value),className:"pl-10"})]})]}),(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,r.jsx)(o.ZB,{className:"text-lg",children:"Children Information"}),(0,r.jsxs)(i.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{es([...Q,{id:eh("profileChild"),birthYear:""}])},children:[(0,r.jsx)(v.A,{className:"mr-2 h-4 w-4"})," Add Child"]})]}),(0,r.jsxs)(o.Wu,{className:"space-y-3",children:[Q.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-end space-x-2 p-2 border rounded-md",children:[(0,r.jsxs)("div",{className:"flex-grow",children:[(0,r.jsxs)(d.J,{htmlFor:"childBirthYearEdit-".concat(e.id),children:["Child ",s+1," Birth Year"]}),(0,r.jsxs)("div",{className:"relative mt-1",children:[(0,r.jsx)(f.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,r.jsx)(n.p,{id:"childBirthYearEdit-".concat(e.id),type:"number",placeholder:"YYYY (e.g., ".concat(ez-2,")"),value:e.birthYear,onChange:e=>eB(s,e.target.value),min:"1950",max:ez.toString(),className:"pl-10"})]})]}),(0,r.jsx)(i.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>eV(e.id),className:"text-destructive",children:(0,r.jsx)(N.A,{className:"h-4 w-4"})})]},e.id)),0===Q.length&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"No children added."})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,r.jsx)(i.$,{type:"button",variant:"ghost",onClick:()=>V(!1),children:"Cancel"}),(0,r.jsxs)(i.$,{type:"submit",className:"bg-accent hover:bg-accent/90 text-accent-foreground",children:[(0,r.jsx)(y.A,{className:"mr-2 h-4 w-4"})," Save All Changes"]})]})]})})]}):(0,r.jsxs)(m.tU,{defaultValue:"profile",className:"w-full",children:[(0,r.jsxs)(m.j7,{className:"grid w-full grid-cols-2 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-8",children:[(0,r.jsxs)(m.Xi,{value:"profile",className:"py-3 text-base",children:[(0,r.jsx)(u.A,{className:"mr-2 h-5 w-5"}),"My Profile"]}),(0,r.jsxs)(m.Xi,{value:"child-info",className:"py-3 text-base",children:[(0,r.jsx)(b.A,{className:"mr-2 h-5 w-5"}),"Child Info"]}),(0,r.jsxs)(m.Xi,{value:"mood-tracker",className:"py-3 text-base",children:[(0,r.jsx)(w.A,{className:"mr-2 h-5 w-5"}),"Mood Log"]}),(0,r.jsxs)(m.Xi,{value:"my-programs",className:"py-3 text-base",children:[(0,r.jsx)(C.A,{className:"mr-2 h-5 w-5"}),"My Programs"]}),(0,r.jsxs)(m.Xi,{value:"vouchers",id:"vouchers_tab",className:"py-3 text-base",children:[(0,r.jsx)(A.A,{className:"mr-2 h-5 w-5"}),"Vouchers"]}),(0,r.jsxs)(m.Xi,{value:"custom-todos",className:"py-3 text-base",children:[(0,r.jsx)(S.A,{className:"mr-2 h-5 w-5"}),"My To-Do Lists"]}),(0,r.jsxs)(m.Xi,{value:"my-missions",className:"py-3 text-base",children:[(0,r.jsx)(I.A,{className:"mr-2 h-5 w-5"}),"My Missions"]}),(0,r.jsxs)(m.Xi,{value:"achievements",className:"py-3 text-base",children:[(0,r.jsx)(T.A,{className:"mr-2 h-5 w-5"}),"Achievements"]})]}),(0,r.jsx)(m.av,{value:"profile",className:"mt-6",children:(0,r.jsxs)(o.Zp,{children:[(0,r.jsx)(o.aR,{children:(0,r.jsx)(o.ZB,{className:"text-xl text-primary",children:"Personal Information"})}),(0,r.jsxs)(o.Wu,{className:"space-y-3 text-foreground/90",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Name:"})," ",t.name]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Email:"})," ",t.email]}),t.phoneNumber&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Phone:"})," ",t.phoneNumber]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Role:"})," ",(0,r.jsx)("span",{className:"capitalize",children:t.parentalRole})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Residential Area:"})," ",t.residentialArea]})]})]})}),(0,r.jsx)(m.av,{value:"child-info",className:"mt-6",children:(0,r.jsxs)(o.Zp,{children:[(0,r.jsx)(o.aR,{children:(0,r.jsx)(o.ZB,{className:"text-xl text-primary",children:"Children Information"})}),(0,r.jsx)(o.Wu,{children:t.children&&t.children.length>0?(0,r.jsx)("ul",{className:"space-y-3",children:t.children.map((e,s)=>(0,r.jsxs)("li",{className:"p-3 border rounded-md bg-muted/30",children:[(0,r.jsxs)("p",{children:[(0,r.jsxs)("strong",{children:["Child ",s+1," Birth Year:"]})," ",e.birthYear]}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Approx. Age: ",ez-e.birthYear," years old"]})]},e.id||s))}):(0,r.jsx)("p",{className:"text-muted-foreground",children:"No child information added yet."})})]})}),(0,r.jsx)(m.av,{value:"mood-tracker",className:"mt-6",children:(0,r.jsx)(ea,{moodLog:eD})}),(0,r.jsx)(m.av,{value:"my-programs",className:"mt-6",children:(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{className:"text-xl text-primary",children:"My Enrolled Programs"}),(0,r.jsx)(o.BT,{children:"Track your progress and access your programs."})]}),(0,r.jsxs)(o.Wu,{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"You are not currently enrolled in any programs. Register a voucher or explore available programs."}),(0,r.jsx)(i.$,{asChild:!0,variant:"link",className:"p-0 h-auto text-accent mt-2",children:(0,r.jsx)(eo(),{href:"/programs",children:"Browse Programs"})})]})]})}),(0,r.jsx)(m.av,{value:"vouchers",className:"mt-6",children:(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{className:"text-xl text-primary",children:"Register a Voucher"}),(0,r.jsx)(o.BT,{children:"Enter your voucher code to get access to a program."})]}),(0,r.jsxs)(o.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-end gap-2",children:[(0,r.jsxs)("div",{className:"flex-grow space-y-1",children:[(0,r.jsx)(d.J,{htmlFor:"voucherCode",children:"Voucher Code"}),(0,r.jsx)(n.p,{id:"voucherCode",value:eR,onChange:e=>eY(e.target.value.toUpperCase()),placeholder:"e.g., AB1234",className:"text-base"})]}),(0,r.jsx)(i.$,{onClick:()=>{var e,r;if(eE(""),!eR.trim()){eE("Please enter a voucher code.");return}if(!t){eE("User not found. Please try logging in again.");return}let a=localStorage.getItem(ex),l=[];if(a)try{l=JSON.parse(a)}catch(e){eE("Error reading voucher data. Please try again later.");return}else l=Y.oU,localStorage.setItem(ex,JSON.stringify(Y.oU));let i=l.find(e=>e.code.toUpperCase()===eR.toUpperCase());if(!i){eE("Invalid voucher code.");return}let o=new Date,n=(0,G.H)(i.registrationStartDate),d=(0,G.H)(i.registrationEndDate);if(!(0,en.v)(o,{start:n,end:(0,ed.f)(d,1)})){eE("This voucher is outside its registration validity period.");return}if("available"!==i.status){eE("This voucher is ".concat(i.status," and cannot be registered."));return}if(null===(e=t.registeredVouchers)||void 0===e?void 0:e.some(e=>e.voucherCode===i.code)){eE("You have already registered this voucher.");return}let c=et.find(e=>e.id===i.programId);if(null===(r=t.registeredVouchers)||void 0===r?void 0:r.some(e=>e.programId===i.programId&&(0,ec.d)((0,G.H)(e.accessExpiresDate),o))){eE('You already have active access to the program "'.concat((null==c?void 0:c.title)||"this program",'" from another voucher.'));return}let m=(0,X.GP)(o,"yyyy-MM-dd"),h=(0,X.GP)((0,ed.f)(o,i.accessDurationDays),"yyyy-MM-dd"),x={...i,status:"active",programTitle:(null==c?void 0:c.title)||i.programTitle,registeredByUserId:t.id,registeredByUserName:t.name,registeredDate:m,accessExpiresDate:h},u=l.map(e=>e.id===x.id?x:e);localStorage.setItem(ex,JSON.stringify(u));let p={voucherCode:x.code,programId:x.programId,accessExpiresDate:h,registeredDate:m},j=[...t.registeredVouchers||[],p];eU({...t,registeredVouchers:j,moodLog:eD}),s({title:"Voucher Registered!",description:'You now have access to "'.concat(x.programTitle,'" until ').concat(h,".")}),eY("")},className:"bg-accent hover:bg-accent/90 text-accent-foreground h-10",children:"Register Code"})]}),eL&&(0,r.jsxs)("p",{className:"text-sm text-destructive flex items-center",children:[(0,r.jsx)(M.A,{className:"h-4 w-4 mr-1"}),eL]}),(0,r.jsx)(em.w,{className:"my-6"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-primary",children:"Your Active Vouchers"}),t.registeredVouchers&&t.registeredVouchers.length>0?(0,r.jsxs)("ul",{className:"space-y-2",children:[t.registeredVouchers.filter(e=>(0,ec.d)((0,G.H)(e.accessExpiresDate),new Date)).map(e=>{let s=et.find(s=>s.id===e.programId);return(0,r.jsxs)("li",{className:"p-3 border rounded-md bg-muted/30",children:[(0,r.jsx)("p",{className:"font-semibold",children:(null==s?void 0:s.title)||"Program ID: ".concat(e.programId)}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Code: ",e.voucherCode]}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Access Expires: ",(0,X.GP)((0,G.H)(e.accessExpiresDate),"PP")]})]},e.voucherCode)}),0===t.registeredVouchers.filter(e=>(0,ec.d)((0,G.H)(e.accessExpiresDate),new Date)).length&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"You have no currently active vouchers."})]}):(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"You have no registered vouchers."})]})]})}),(0,r.jsx)(m.av,{value:"custom-todos",className:"mt-6",children:(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o.ZB,{className:"text-xl text-primary",children:"My Custom To-Do Lists"}),(0,r.jsx)(o.BT,{children:"Create and manage your personal to-do lists."})]}),(0,r.jsxs)(i.$,{onClick:()=>{ev(null),ej(!0)},className:"bg-accent hover:bg-accent/90 text-accent-foreground",children:[(0,r.jsx)(k.A,{className:"mr-2 h-4 w-4"})," Add New List"]})]}),(0,r.jsx)(o.Wu,{className:"space-y-4",children:ei.length>0?ei.map(e=>(0,r.jsx)($.v,{actionItem:e,onEdit:()=>eZ(e),onDelete:()=>e_(e.id)},e.id)):(0,r.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"You haven't created any custom to-do lists yet."})})]})}),(0,r.jsx)(m.av,{value:"my-missions",className:"mt-6",children:(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o.ZB,{className:"text-xl text-primary",children:"My Missions"}),(0,r.jsx)(o.BT,{children:"Track your progress on program missions and personal goals."})]}),(0,r.jsxs)(i.$,{onClick:()=>{eS(""),eT(""),eC(null),eb(!0)},className:"bg-accent hover:bg-accent/90 text-accent-foreground",disabled:eF>=3,children:[(0,r.jsx)(k.A,{className:"mr-2 h-4 w-4"})," Add Personal Mission"]})]}),(0,r.jsx)(o.Wu,{className:"space-y-4",children:ef.length>0?ef.map(e=>(0,r.jsxs)(o.Zp,{className:"shadow-sm",children:[(0,r.jsxs)(o.aR,{className:"pb-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)(o.ZB,{className:"text-lg",children:e.title}),e.isUserCreated&&(0,r.jsxs)("div",{className:"flex space-x-1",children:[(0,r.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>eJ(e),className:"h-7 w-7",children:(0,r.jsx)(x.A,{className:"h-4 w-4"})}),(0,r.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>e$(e.id),className:"h-7 w-7 text-destructive hover:text-destructive",children:(0,r.jsx)(N.A,{className:"h-4 w-4"})})]})]}),!e.isUserCreated&&(0,r.jsx)(ee.E,{variant:"secondary",className:"mt-1",children:"Program Mission"})]}),(0,r.jsxs)(o.Wu,{className:"space-y-2",children:[e.description&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 pt-1",children:[(0,r.jsx)(P.A,{value:[e.progress],max:10,step:1,onValueChange:s=>eW(e.id,s[0]),className:"flex-grow","aria-labelledby":"mission-label-".concat(e.id)}),(0,r.jsxs)("span",{id:"mission-label-".concat(e.id),className:"text-sm font-medium w-8 text-right",children:[e.progress,"/10"]})]})]})]},e.id)):(0,r.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No missions being tracked yet. Program missions will appear here as you encounter them."})})]})}),(0,r.jsx)(m.av,{value:"achievements",className:"mt-6",children:(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{className:"text-xl text-primary",children:"My Achievements"}),(0,r.jsx)(o.BT,{children:"View programs you've completed and other milestones."})]}),(0,r.jsxs)(o.Wu,{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Completed Programs"}),eO.length>0?(0,r.jsx)("ul",{className:"space-y-2",children:eO.map(e=>(0,r.jsxs)("li",{className:"p-3 border rounded-md bg-muted/30 flex items-center",children:[(0,r.jsx)(T.A,{className:"h-5 w-5 text-accent mr-3"}),(0,r.jsx)("span",{children:e.title})]},e.id))}):(0,r.jsx)("p",{className:"text-muted-foreground",children:"You haven't completed any programs yet."})]})]})})]}),(0,r.jsx)(L.lG,{open:ep,onOpenChange:ej,children:(0,r.jsxs)(L.Cf,{className:"sm:max-w-xl",children:[(0,r.jsxs)(L.c7,{children:[(0,r.jsx)(L.L3,{children:eg?"Edit To-Do List":"Create New To-Do List"}),(0,r.jsx)(L.rr,{children:eg?"Modify your existing to-do list.":"Add a new personal to-do list."})]}),(0,r.jsx)(J,{initialData:eg||{},onSubmit:e=>{let r;eg?(r=ei.map(s=>s.id===e.id?{...e,type:"todo_list",isUserCreated:!0}:s),s({title:"To-Do List Updated",description:'"'.concat(e.title,'" has been updated.')})):(r=[...ei,{...e,id:eh("customTodo"),type:"todo_list",isUserCreated:!0}],s({title:"To-Do List Added",description:'"'.concat(e.title,'" has been added.')})),eu(r),t&&eU({...t,customTodoLists:r,moodLog:eD}),ev(null),ej(!1)},onCancel:()=>{ev(null),ej(!1)}})]})}),(0,r.jsx)(L.lG,{open:ey,onOpenChange:eb,children:(0,r.jsxs)(L.Cf,{className:"sm:max-w-md",children:[(0,r.jsxs)(L.c7,{children:[(0,r.jsx)(L.L3,{children:ew?"Edit Personal Mission":"Add New Personal Mission"}),(0,r.jsx)(L.rr,{children:ew?"Update the details of your mission.":"Define a new personal goal. You can add ".concat(3-eF," more.")})]}),(0,r.jsxs)("div",{className:"space-y-4 py-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{htmlFor:"missionTitle",children:"Mission Title"}),(0,r.jsx)(n.p,{id:"missionTitle",value:eA,onChange:e=>eS(e.target.value),placeholder:"e.g., Practice patience daily"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{htmlFor:"missionDescription",children:"Description (Optional)"}),(0,r.jsx)(R.T,{id:"missionDescription",value:eI,onChange:e=>eT(e.target.value),placeholder:"e.g., Take 3 deep breaths before reacting",rows:3})]})]}),(0,r.jsxs)(L.Es,{children:[(0,r.jsx)(i.$,{variant:"outline",onClick:()=>eb(!1),children:"Cancel"}),(0,r.jsx)(i.$,{onClick:()=>{let e;if(!eA.trim()){s({title:"Error",description:"Mission title cannot be empty.",variant:"destructive"});return}if(ew)e=ef.map(e=>e.id===ew.id?{...e,title:eA,description:eI}:e),s({title:"Mission Updated",description:'"'.concat(eA,'" details saved.')});else{if(ef.filter(e=>e.isUserCreated).length>=3){s({title:"Limit Reached",description:"You can only add up to ".concat(3," custom missions."),variant:"destructive"}),eb(!1);return}e=[...ef,{id:eh("userMission"),title:eA,description:eI,progress:0,isUserCreated:!0}],s({title:"Mission Added",description:'"'.concat(eA,'" added to your missions.')})}eN(e),t&&eU({...t,userMissions:e,moodLog:eD}),eb(!1),eC(null)},className:"bg-accent hover:bg-accent/90 text-accent-foreground",children:ew?"Save Changes":"Add Mission"})]})]})})]})}},91394:(e,s,t)=>{"use strict";t.d(s,{Avatar:()=>o,AvatarFallback:()=>d,AvatarImage:()=>n});var r=t(95155),a=t(12115),l=t(85977),i=t(59434);let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.bL,{ref:s,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...a})});o.displayName=l.bL.displayName;let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l._V,{ref:s,className:(0,i.cn)("aspect-square h-full w-full",t),...a})});n.displayName=l._V.displayName;let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.H4,{ref:s,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...a})});d.displayName=l.H4.displayName}},e=>{var s=s=>e(e.s=s);e.O(0,[5769,6874,1509,1263,9764,1859,5521,822,4547,8407,5916,7382,3708,8441,1684,7358],()=>s(37108)),_N_E=e.O()}]);