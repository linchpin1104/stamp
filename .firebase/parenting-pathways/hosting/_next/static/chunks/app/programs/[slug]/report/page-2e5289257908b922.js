(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[353],{12511:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s=a(95155),r=a(12115),l=a(35695),i=a(6874),n=a.n(i),o=a(30285),d=a(66695),c=a(91394),m=a(12543),u=a(30462),x=a(91467),f=a(87267),h=a(60960),p=a(22346),g=a(25711),j=a(39022),v=a(83013),N=a(83343),y=a(91539),w=a(87481);function b(){var e,t;let{slug:a}=(0,l.useParams)();(0,l.useRouter)();let{toast:i}=(0,w.dj)(),[b,k]=(0,r.useState)(null),[S,C]=(0,r.useState)(null),[A,R]=(0,r.useState)(null),[P,E]=(0,r.useState)(null),[L,I]=(0,r.useState)(!0),[T,M]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{"string"==typeof a?k(a):k(null)},[a]),(0,r.useEffect)(()=>{let e=async()=>{if(!b){I(!1);return}I(!0);let e=localStorage.getItem("userProfile"),t=e?JSON.parse(e):j._o;R(t);let a=await (0,g.Z5)(b);if(C(a),a&&t){var s;E((null===(s=t.programCompletions)||void 0===s?void 0:s.find(e=>e.programId===a.id))||null)}I(!1)};b?e():null===a&&I(!1)},[b,a]),L)return(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("p",{children:"Loading program report..."})});if(!S||!A)return(0,s.jsxs)("div",{className:"text-center py-10",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:"Program Report Not Available"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Could not load the program or user data to generate the report."}),(0,s.jsx)(o.$,{variant:"link",asChild:!0,className:"mt-4",children:(0,s.jsxs)(n(),{href:"/programs",children:[(0,s.jsx)(m.A,{className:"mr-2 h-4 w-4"})," Back to Programs"]})})]});let _=(null==P?void 0:P.completionDate)?(0,v.GP)((0,N.H)(P.completionDate),"MMMM d, yyyy"):"Not officially marked complete yet",D=S.weeks.reduce((e,t)=>{var a;return e+((null===(a=t.learningElements)||void 0===a?void 0:a.length)||0)},0),z=(null===(e=A.customChecklists)||void 0===e?void 0:e.filter(e=>e.programId===S.id&&e.items.every(e=>e.isChecked)).length)||0,O=(null===(t=A.userMissions)||void 0===t?void 0:t.filter(e=>e.linkedProgramMissionId&&S.weeks.some(t=>{var a;return null===(a=t.learningElements)||void 0===a?void 0:a.some(t=>"mission_reminder"===t.type&&t.id===e.linkedProgramMissionId)})).length)||0;return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(o.$,{variant:"outline",asChild:!0,children:(0,s.jsxs)(n(),{href:"/programs/".concat(S.slug),children:[(0,s.jsx)(m.A,{className:"mr-2 h-4 w-4"})," Back to Program Overview"]})}),!(null==P?void 0:P.satisfactionScore)&&(0,s.jsxs)(o.$,{onClick:()=>M(!0),className:"bg-accent hover:bg-accent/90 text-accent-foreground",children:[(0,s.jsx)(u.A,{className:"mr-2 h-4 w-4"})," Rate This Program"]})]}),(0,s.jsxs)(d.Zp,{className:"shadow-xl",children:[(0,s.jsxs)(d.aR,{className:"text-center bg-primary/10 pb-6",children:[(0,s.jsx)(x.A,{className:"h-16 w-16 text-accent mx-auto mb-4"}),(0,s.jsx)(d.ZB,{className:"text-3xl font-bold text-primary",children:"Program Report"}),(0,s.jsxs)(d.BT,{className:"text-lg text-muted-foreground",children:['Summary for "',S.title,'"']})]}),(0,s.jsxs)(d.Wu,{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center border-b pb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-2 sm:mb-0",children:[(0,s.jsxs)(c.Avatar,{className:"h-12 w-12",children:[(0,s.jsx)(c.AvatarImage,{src:A.avatarUrl,alt:A.name,"data-ai-hint":"user avatar medium"}),(0,s.jsx)(c.AvatarFallback,{children:A.name.charAt(0)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-lg",children:A.name}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:A.email})]})]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Completion Date: ",_]})]}),(0,s.jsxs)("section",{className:"space-y-3",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold text-primary flex items-center",children:[(0,s.jsx)(f.A,{className:"mr-2 h-5 w-5"}),"Program Overview"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Target Audience:"})," ",S.targetAudience]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Total Weeks:"})," ",S.weeks.length]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Total Learning Elements:"})," ",D]})]}),(0,s.jsx)(p.w,{}),(0,s.jsxs)("section",{className:"space-y-3",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold text-primary flex items-center",children:[(0,s.jsx)(h.A,{className:"mr-2 h-5 w-5"}),"Engagement Summary (Sample)"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Checklists Completed:"})," ",z," (User-created checklists for this program)"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Missions Tracked:"})," ",O]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"More detailed activity summaries will be available in future updates."})]}),(null==P?void 0:P.satisfactionScore)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.w,{}),(0,s.jsxs)("section",{className:"space-y-2 text-center",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-primary",children:"Your Satisfaction Rating"}),(0,s.jsxs)("div",{className:"flex justify-center items-center space-x-1",children:[[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(u.A,{className:"h-7 w-7 ".concat(t<P.satisfactionScore?"text-yellow-400 fill-yellow-400":"text-muted-foreground/30")},t)),(0,s.jsxs)("span",{className:"ml-2 text-lg font-medium",children:["(",P.satisfactionScore,"/5)"]})]})]})]})]}),(0,s.jsx)(d.wL,{className:"p-6 border-t flex justify-center",children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Thank you for participating in Parenting Pathways!"})})]}),T&&(0,s.jsx)(y.S,{isOpen:T,onClose:e=>{var t,a;let s;if(M(!1),!A||!S||void 0===e){i({title:"Rating Not Saved",description:"Please provide a satisfaction rating.",variant:"destructive"});return}let r=null===(t=A.programCompletions)||void 0===t?void 0:t.find(e=>e.programId===S.id);s=r?{...r,satisfactionScore:e}:{programId:S.id,completionDate:(0,v.GP)(new Date,"yyyy-MM-dd"),satisfactionScore:e};let l=[...(null===(a=A.programCompletions)||void 0===a?void 0:a.filter(e=>e.programId!==S.id))||[],s],n={...A,programCompletions:l};R(n),localStorage.setItem("userProfile",JSON.stringify(n)),E(s),i({title:"Thank You!",description:"Your program satisfaction rating has been saved."})},programTitle:S.title})]})}},22346:(e,t,a)=>{"use strict";a.d(t,{w:()=>n});var s=a(95155),r=a(12115),l=a(87489),i=a(59434);let n=r.forwardRef((e,t)=>{let{className:a,orientation:r="horizontal",decorative:n=!0,...o}=e;return(0,s.jsx)(l.b,{ref:t,decorative:n,orientation:r,className:(0,i.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...o})});n.displayName=l.b.displayName},54165:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>m,Es:()=>x,L3:()=>f,c7:()=>u,lG:()=>o,rr:()=>h});var s=a(95155),r=a(12115),l=a(15452),i=a(25318),n=a(59434);let o=l.bL;l.l9;let d=l.ZL;l.bm;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hJ,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});c.displayName=l.hJ.displayName;let m=r.forwardRef((e,t)=>{let{className:a,children:r,...o}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(c,{}),(0,s.jsxs)(l.UC,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[r,(0,s.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=l.UC.displayName;let u=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};u.displayName="DialogHeader";let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};x.displayName="DialogFooter";let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});f.displayName=l.hE.displayName;let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});h.displayName=l.VY.displayName},85977:(e,t,a)=>{"use strict";a.d(t,{H4:()=>y,_V:()=>N,bL:()=>v});var s=a(12115),r=a(46081),l=a(39033),i=a(52712),n=a(63655),o=a(95155),d="Avatar",[c,m]=(0,r.A)(d),[u,x]=c(d),f=s.forwardRef((e,t)=>{let{__scopeAvatar:a,...r}=e,[l,i]=s.useState("idle");return(0,o.jsx)(u,{scope:a,imageLoadingStatus:l,onImageLoadingStatusChange:i,children:(0,o.jsx)(n.sG.span,{...r,ref:t})})});f.displayName=d;var h="AvatarImage",p=s.forwardRef((e,t)=>{let{__scopeAvatar:a,src:r,onLoadingStatusChange:d=()=>{},...c}=e,m=x(h,a),u=function(e,t){let[a,r]=s.useState("idle");return(0,i.N)(()=>{if(!e){r("error");return}let a=!0,s=new window.Image,l=e=>()=>{a&&r(e)};return r("loading"),s.onload=l("loaded"),s.onerror=l("error"),s.src=e,t&&(s.referrerPolicy=t),()=>{a=!1}},[e,t]),a}(r,c.referrerPolicy),f=(0,l.c)(e=>{d(e),m.onImageLoadingStatusChange(e)});return(0,i.N)(()=>{"idle"!==u&&f(u)},[u,f]),"loaded"===u?(0,o.jsx)(n.sG.img,{...c,ref:t,src:r}):null});p.displayName=h;var g="AvatarFallback",j=s.forwardRef((e,t)=>{let{__scopeAvatar:a,delayMs:r,...l}=e,i=x(g,a),[d,c]=s.useState(void 0===r);return s.useEffect(()=>{if(void 0!==r){let e=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(e)}},[r]),d&&"loaded"!==i.imageLoadingStatus?(0,o.jsx)(n.sG.span,{...l,ref:t}):null});j.displayName=g;var v=f,N=p,y=j},87489:(e,t,a)=>{"use strict";a.d(t,{b:()=>d});var s=a(12115),r=a(63655),l=a(95155),i="horizontal",n=["horizontal","vertical"],o=s.forwardRef((e,t)=>{var a;let{decorative:s,orientation:o=i,...d}=e,c=(a=o,n.includes(a))?o:i;return(0,l.jsx)(r.sG.div,{"data-orientation":c,...s?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:t})});o.displayName="Separator";var d=o},91394:(e,t,a)=>{"use strict";a.d(t,{Avatar:()=>n,AvatarFallback:()=>d,AvatarImage:()=>o});var s=a(95155),r=a(12115),l=a(85977),i=a(59434);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.bL,{ref:t,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});n.displayName=l.bL.displayName;let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l._V,{ref:t,className:(0,i.cn)("aspect-square h-full w-full",a),...r})});o.displayName=l._V.displayName;let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.H4,{ref:t,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});d.displayName=l.H4.displayName},91539:(e,t,a)=>{"use strict";a.d(t,{S:()=>m});var s=a(95155),r=a(54165),l=a(30285),i=a(91467),n=a(8376),o=a(30462),d=a(12115),c=a(59434);function m(e){let{isOpen:t,onClose:a,programTitle:m}=e,[u,x]=(0,d.useState)(!1),[f,h]=(0,d.useState)(void 0),[p,g]=(0,d.useState)(void 0);(0,d.useEffect)(()=>{if(t){let e=setTimeout(()=>{x(!0)},300);return h(void 0),g(void 0),()=>clearTimeout(e)}x(!1)},[t]);let j=e=>{h(e)};return(0,s.jsx)(r.lG,{open:t,onOpenChange:e=>{e||a(f)},children:(0,s.jsxs)(r.Cf,{className:"sm:max-w-md text-center",children:[(0,s.jsxs)(r.c7,{className:"items-center",children:[(0,s.jsx)(i.A,{className:"h-16 w-16 text-accent mb-4"}),(0,s.jsx)(r.L3,{className:"text-2xl font-bold text-primary",children:"Congratulations!"}),(0,s.jsx)(r.rr,{className:"text-base text-muted-foreground",children:"You have successfully completed the program:"})]}),(0,s.jsxs)("div",{className:"my-6 p-6 bg-secondary/20 rounded-lg border border-primary/30 relative overflow-hidden",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-primary mb-2",children:"Certificate of Completion"}),(0,s.jsx)("p",{className:"text-foreground",children:"This certifies that you have completed all requirements for the"}),(0,s.jsxs)("p",{className:"text-lg font-medium text-accent my-1",children:['"',m,'"']}),(0,s.jsxs)("p",{className:"text-foreground",children:["program on ",new Date().toLocaleDateString(),"."]}),u&&(0,s.jsx)("div",{className:"stamp-animation absolute bottom-4 right-4 md:bottom-6 md:right-6",children:(0,s.jsx)("div",{className:"stamp-visual bg-green-600 text-white font-bold rounded-full w-24 h-24 md:w-28 md:h-28 flex items-center justify-center transform -rotate-12 shadow-lg",children:(0,s.jsxs)("div",{className:"border-2 border-dashed border-white rounded-full w-[90%] h-[90%] flex flex-col items-center justify-center",children:[(0,s.jsx)(n.A,{size:24,className:"mb-1"}),(0,s.jsx)("span",{className:"text-xs",children:"COMPLETED"})]})})})]}),(0,s.jsxs)("div",{className:"my-6 space-y-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-foreground",children:"How satisfied are you with this program?"}),(0,s.jsx)("div",{className:"flex justify-center space-x-1",children:[1,2,3,4,5].map(e=>{var t;return(0,s.jsx)("button",{onClick:()=>j(e),onMouseEnter:()=>g(e),onMouseLeave:()=>g(void 0),"aria-label":"Rate ".concat(e," out of 5 stars"),className:"focus:outline-none",children:(0,s.jsx)(o.A,{className:(0,c.cn)("h-8 w-8 cursor-pointer transition-colors",(null!==(t=null!=p?p:f)&&void 0!==t?t:0)>=e?"text-yellow-400 fill-yellow-400":"text-muted-foreground/50")})},e)})})]}),(0,s.jsx)(r.Es,{children:(0,s.jsx)(l.$,{onClick:()=>{a(f)},className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",disabled:void 0===f,children:"Submit Rating & Close"})})]})})}},98969:(e,t,a)=>{Promise.resolve().then(a.bind(a,12511))}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,9855,5769,6874,1509,1263,1174,524,5916,9127,8441,1684,7358],()=>t(98969)),_N_E=e.O()}]);