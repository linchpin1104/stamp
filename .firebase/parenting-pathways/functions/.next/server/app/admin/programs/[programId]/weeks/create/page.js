(()=>{var e={};e.id=5471,e.ids=[5471],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13583:(e,t,r)=>{Promise.resolve().then(r.bind(r,54893))},15377:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>l});var s=r(65239),i=r(48088),n=r(88170),a=r.n(n),o=r(30893),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(t,d);let l={children:["",{children:["admin",{children:["programs",{children:["[programId]",{children:["weeks",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,54893)),"/Users/ihyelin/Documents/dev/stamp_nile/src/app/admin/programs/[programId]/weeks/create/page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,99111)),"/Users/ihyelin/Documents/dev/stamp_nile/src/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,80871)),"/Users/ihyelin/Documents/dev/stamp_nile/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/ihyelin/Documents/dev/stamp_nile/src/app/admin/programs/[programId]/weeks/create/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/admin/programs/[programId]/weeks/create/page",pathname:"/admin/programs/[programId]/weeks/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37366:e=>{"use strict";e.exports=require("dns")},47675:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(60687),i=r(43210),n=r(16189),a=r(85814),o=r.n(a),d=r(62605),l=r(29523),c=r(44493),u=r(55817),p=r(29867),m=r(21509);let h=e=>`${e}-${Date.now()}-${Math.random().toString(36).substring(2,7)}`,x=e=>{let t=h(`le-stub-${e}`),r=h(`content-stub-${e}`);switch(e){case"video":return{id:t,type:e,content:{id:r,title:"New Video (Edit Later)",url:""}};case"video_choice_group":return{id:t,type:e,content:{id:r,title:"New Video Choice Group (Edit Later)",videos:[],selectionRule:"choose_one"}};case"checklist":return{id:t,type:e,content:{id:r,title:"New Checklist (Edit Later)",items:[],type:"generic_todo"}};case"action_item":return{id:t,type:e,content:{id:r,title:"New Action Item (Edit Later)",description:"",type:"todo_list",todoItems:[]}};case"interactive_scenario_link":return{id:t,type:e,scenarioId:"",title:"New Interactive Scenario (Link Later)"};case"text_content":return{id:t,type:e,content:{id:r,title:"New Text Content (Edit Later)",type:"article",content:""}};case"psychological_test":return{id:t,type:e,content:{id:r,title:"New Psychological Test (Edit Later)",factors:[],overallResultComments:[]}};case"qa_session":return{id:t,type:e,content:{id:r,title:"New Q&A Session (Edit Later)",prompts:[]}};case"mission_reminder":return{id:t,type:e,content:{id:r,title:"New Mission Reminder (Edit Later)",missionTitle:"",missionDescription:""}};case"ox_quiz":return{id:t,type:e,content:{id:r,title:"New O/X Quiz (Edit Later)",questions:[]}};default:return{id:t,type:"text_content",content:{id:r,title:"New Content (Edit Later)",type:"article",content:""}}}};function g(){let e=(0,n.useRouter)(),{programId:t}=(0,n.useParams)(),{toast:r}=(0,p.dj)(),[a,g]=(0,i.useState)(null),[v,w]=(0,i.useState)(null),[f,k]=(0,i.useState)(!0),y=async t=>{if(!v||!v.id){r({title:"Error",description:"Program data is missing.",variant:"destructive"});return}let s=(t.initialLearningElementTypes||[]).map(e=>x(e)),i={id:h("week"),weekNumber:t.weekNumber,title:t.title,summary:t.summary,sequentialCompletionRequired:t.sequentialCompletionRequired||!1,learningElements:s},n=[...v.weeks||[],i].sort((e,t)=>e.weekNumber-t.weekNumber);await (0,m.El)(v.id,{weeks:n})?(r({title:"Week Added",description:`Week ${i.weekNumber}: "${i.title}" added to ${v.title}. Placeholder content elements created.`}),e.push(`/admin/programs/${v.id}/edit`)):r({title:"Error",description:"Failed to add week to the program.",variant:"destructive"})};if(f)return(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("p",{children:"Loading program data..."})});if(!v)return(0,s.jsxs)("div",{className:"text-center py-10",children:["Program not found. ",(0,s.jsx)(o(),{href:"/admin/programs",className:"text-accent underline",children:"Go back"}),"."]});let _=v.weeks&&v.weeks.length>0?Math.max(...v.weeks.map(e=>e.weekNumber)):0;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-start",children:(0,s.jsx)(l.$,{variant:"outline",size:"sm",asChild:!0,children:(0,s.jsxs)(o(),{href:a?`/admin/programs/${a}/edit`:"/admin/programs",children:[(0,s.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Back to Program Management"]})})}),(0,s.jsxs)(c.Zp,{className:"max-w-2xl mx-auto shadow-lg",children:[(0,s.jsxs)(c.aR,{children:[(0,s.jsxs)(c.ZB,{className:"text-2xl text-primary",children:['Add New Week to "',v.title,'"']}),(0,s.jsx)(c.BT,{children:"Define the basic details and select initial content types for this new week. Detailed content will be added using the content builder."})]}),(0,s.jsx)(c.Wu,{children:(0,s.jsx)(d.j,{onSubmit:y,programMaxWeeks:_,isEditing:!1})})]})]})}},54893:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/ihyelin/Documents/dev/stamp_nile/src/app/admin/programs/[programId]/weeks/create/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ihyelin/Documents/dev/stamp_nile/src/app/admin/programs/[programId]/weeks/create/page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73415:(e,t,r)=>{Promise.resolve().then(r.bind(r,47675))},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83721:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(43210);function i(e){let t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,166,1658,9396,5728,8808,1758,8767,4835,9823,1509,6413],()=>r(15377));module.exports=s})();