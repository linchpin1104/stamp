(()=>{var e={};e.id=6701,e.ids=[6701],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8872:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(82614).A)("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13161:(e,t,s)=>{"use strict";s.r(t),s.d(t,{availableLearningElementTypes:()=>i,default:()=>n});var r=s(12907);let i=(0,r.registerClientReference)(function(){throw Error("Attempted to call availableLearningElementTypes() from the server but availableLearningElementTypes is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ihyelin/Documents/dev/stamp_nile/src/app/admin/programs/[programId]/weeks/[weekId]/edit/page.tsx","availableLearningElementTypes"),n=(0,r.registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/ihyelin/Documents/dev/stamp_nile/src/app/admin/programs/[programId]/weeks/[weekId]/edit/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ihyelin/Documents/dev/stamp_nile/src/app/admin/programs/[programId]/weeks/[weekId]/edit/page.tsx","default")},15079:(e,t,s)=>{"use strict";s.d(t,{bq:()=>u,eb:()=>j,gC:()=>x,l6:()=>d,yv:()=>m});var r=s(60687),i=s(43210),n=s(22670),l=s(61662),o=s(89743),a=s(58450),c=s(4780);let d=n.bL;n.YJ;let m=n.WT,u=i.forwardRef(({className:e,children:t,...s},i)=>(0,r.jsxs)(n.l9,{ref:i,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[t,(0,r.jsx)(n.In,{asChild:!0,children:(0,r.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]}));u.displayName=n.l9.displayName;let h=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(o.A,{className:"h-4 w-4"})}));h.displayName=n.PP.displayName;let p=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(l.A,{className:"h-4 w-4"})}));p.displayName=n.wn.displayName;let x=i.forwardRef(({className:e,children:t,position:s="popper",...i},l)=>(0,r.jsx)(n.ZL,{children:(0,r.jsxs)(n.UC,{ref:l,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...i,children:[(0,r.jsx)(h,{}),(0,r.jsx)(n.LM,{className:(0,c.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,r.jsx)(p,{})]})}));x.displayName=n.UC.displayName,i.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=n.JU.displayName;let j=i.forwardRef(({className:e,children:t,...s},i)=>(0,r.jsxs)(n.q7,{ref:i,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.VF,{children:(0,r.jsx)(a.A,{className:"h-4 w-4"})})}),(0,r.jsx)(n.p4,{children:t})]}));j.displayName=n.q7.displayName,i.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=n.wv.displayName},18329:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(82614).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},23005:(e,t,s)=>{Promise.resolve().then(s.bind(s,13161))},27910:e=>{"use strict";e.exports=require("stream")},28326:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(82614).A)("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]])},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32849:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(82614).A)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},35246:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(82614).A)("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]])},35265:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(82614).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},35509:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c});var r=s(65239),i=s(48088),n=s(88170),l=s.n(n),o=s(30893),a={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>o[e]);s.d(t,a);let c={children:["",{children:["admin",{children:["programs",{children:["[programId]",{children:["weeks",{children:["[weekId]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,13161)),"/Users/ihyelin/Documents/dev/stamp_nile/src/app/admin/programs/[programId]/weeks/[weekId]/edit/page.tsx"]}]},{}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,99111)),"/Users/ihyelin/Documents/dev/stamp_nile/src/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,80871)),"/Users/ihyelin/Documents/dev/stamp_nile/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/ihyelin/Documents/dev/stamp_nile/src/app/admin/programs/[programId]/weeks/[weekId]/edit/page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/admin/programs/[programId]/weeks/[weekId]/edit/page",pathname:"/admin/programs/[programId]/weeks/[weekId]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},36644:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(82614).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},37366:e=>{"use strict";e.exports=require("dns")},46328:(e,t,s)=>{"use strict";s.r(t),s.d(t,{availableLearningElementTypes:()=>e_,default:()=>eA});var r=s(60687),i=s(43210),n=s(16189),l=s(85814),o=s.n(l),a=s(62605),c=s(29523),d=s(44493),m=s(63503),u=s(82614);let h=(0,u.A)("SquarePlay",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 8 6 4-6 4Z",key:"f1r3lt"}]]);var p=s(8872),x=s(35246),j=s(18329),f=s(36644),g=s(28326),y=s(92978),v=s(32849),b=s(92865),C=s(55817);let w=(0,u.A)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),k=(0,u.A)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),N=(0,u.A)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var R=s(91840),q=s(35265),$=s(29867),_=s(21509),I=s(15079),M=s(80013),A=s(27605),S=s(63442),z=s(45880),T=s(89667),Y=s(34729),V=s(71669);let B=z.Ik({id:z.Yj(),title:z.Yj().min(1,"Title is required"),url:z.Yj().url("Must be a valid URL (e.g., https://www.youtube.com/embed/VIDEO_ID or https://picsum.photos/seed/...).").min(1,"URL is required."),description:z.Yj().optional(),thumbnailUrl:z.Yj().url("Must be a valid URL for thumbnail.").optional().or(z.eu("")),duration:z.KC([z.Yj().regex(/^\d{1,2}:\d{2}$/,"Duration should be in MM:SS format."),z.eu("")]).optional()});function E({initialData:e,onSubmit:t,onCancel:s}){let i=(0,A.mN)({resolver:(0,S.u)(B),defaultValues:e});return(0,r.jsx)(V.lV,{...i,children:(0,r.jsxs)("form",{onSubmit:i.handleSubmit(t),className:"space-y-6 p-1",children:[(0,r.jsx)(V.zB,{control:i.control,name:"title",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Video Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.p,{placeholder:"Enter video title",...e})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:"url",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Video URL"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.p,{placeholder:"https://example.com/video.mp4",...e})}),(0,r.jsx)(V.Rr,{children:"Direct video link or embeddable URL (e.g., YouTube embed)."}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:"description",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Description (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.T,{placeholder:"Brief description of the video",...e,rows:3})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:"thumbnailUrl",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Thumbnail URL (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.p,{placeholder:"https://example.com/thumbnail.jpg",...e})}),(0,r.jsx)(V.Rr,{children:"URL for the video thumbnail image."}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:"duration",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Duration (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.p,{placeholder:"MM:SS (e.g., 10:35)",...e})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),(0,r.jsx)(c.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save Video"})]})]})})}let L=z.Ik({id:z.Yj(),title:z.Yj().min(1,"Title is required"),type:z.k5(["article","resource_link","policy_info","support_document"]),content:z.Yj().optional(),url:z.Yj().url("Must be a valid URL if type is resource_link or policy_info with URL.").optional().or(z.eu("")),imageUrl:z.Yj().url("Must be a valid URL for image.").optional().or(z.eu(""))}).refine(e=>"resource_link"!==e.type||!!e.url,{message:"URL is required for Resource Link type.",path:["url"]}).refine(e=>"article"!==e.type||!!e.content,{message:"Content is required for Article type.",path:["content"]});function D({initialData:e,onSubmit:t,onCancel:s}){let i=(0,A.mN)({resolver:(0,S.u)(L),defaultValues:e}),n=i.watch("type");return(0,r.jsx)(V.lV,{...i,children:(0,r.jsxs)("form",{onSubmit:i.handleSubmit(t),className:"space-y-6 p-1",children:[(0,r.jsx)(V.zB,{control:i.control,name:"title",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.p,{placeholder:"Enter content title",...e})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:"type",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Content Type"}),(0,r.jsxs)(I.l6,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,r.jsx)(V.MJ,{children:(0,r.jsx)(I.bq,{children:(0,r.jsx)(I.yv,{placeholder:"Select content type"})})}),(0,r.jsxs)(I.gC,{children:[(0,r.jsx)(I.eb,{value:"article",children:"Article"}),(0,r.jsx)(I.eb,{value:"resource_link",children:"Resource Link"}),(0,r.jsx)(I.eb,{value:"policy_info",children:"Policy Info"}),(0,r.jsx)(I.eb,{value:"support_document",children:"Support Document"})]})]}),(0,r.jsx)(V.C5,{})]})}),("article"===n||"policy_info"===n||"support_document"===n)&&(0,r.jsx)(V.zB,{control:i.control,name:"content",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"article"===n?"Article Content":"Content/Summary"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.T,{placeholder:"Enter text content or summary...",...e,rows:5})}),(0,r.jsx)(V.Rr,{children:"article"===n?"Full text of the article. In a full implementation, this would be a rich text editor allowing for formatting (bold, italics, lists), inline images, and embedding links.":"A summary or key details for this document."}),(0,r.jsx)(V.C5,{})]})}),("resource_link"===n||"policy_info"===n||"support_document"===n)&&(0,r.jsx)(V.zB,{control:i.control,name:"url",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsxs)(V.lR,{children:["URL ","resource_link"===n?"":"(Optional)"]}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.p,{placeholder:"https://example.com/resource",...e})}),(0,r.jsx)(V.Rr,{children:"Link to the external resource or document."}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:"imageUrl",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Image URL (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.p,{placeholder:"https://example.com/image.jpg",...e})}),(0,r.jsx)(V.Rr,{children:"Optional image to display with the text content."}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),(0,r.jsx)(c.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save Content"})]})]})})}var P=s(57207),O=s(35950);let J=z.Ik({id:z.Yj(),text:z.Yj().min(1,"Item text is required"),itemType:z.k5(["checkbox","multiple_choice_single","multiple_choice_multiple","scale"]),options:z.YO(z.Ik({id:z.Yj(),text:z.Yj().min(1,"Option text is required"),value:z.KC([z.Yj(),z.ai()])})).optional(),category:z.Yj().optional(),details:z.Yj().optional()}),U=z.Ik({id:z.Yj(),title:z.Yj().min(1,"Checklist title is required"),description:z.Yj().optional(),type:z.k5(["readiness_assessment","child_relationship_assessment","generic_todo","self_reflection"]),items:z.YO(J)}),F=(e="item")=>`${e}-${Date.now()}-${Math.random().toString(36).substring(2,7)}`;function Q({initialData:e,onSubmit:t,onCancel:s}){let i=(0,A.mN)({resolver:(0,S.u)(U),defaultValues:e}),{fields:n,append:l,remove:o,update:a}=(0,A.jz)({control:i.control,name:"items"}),d=i.watch("items"),m=e=>{let t=d[e],s=[...t.options||[],{id:F("opt"),text:"",value:(t.options?.length||0)+1}];a(e,{...t,options:s})},u=(e,t)=>{let s=d[e],r=s.options?.filter((e,s)=>s!==t);a(e,{...s,options:r||[]})};return(0,r.jsx)(V.lV,{...i,children:(0,r.jsxs)("form",{onSubmit:i.handleSubmit(t),className:"space-y-6 p-1 max-h-[70vh] overflow-y-auto",children:[(0,r.jsx)(V.zB,{control:i.control,name:"title",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Checklist Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.p,{placeholder:"Enter checklist title",...e})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:"description",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Description (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.T,{placeholder:"Brief description of the checklist",...e,rows:2})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:"type",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Checklist Type"}),(0,r.jsxs)(I.l6,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,r.jsx)(V.MJ,{children:(0,r.jsx)(I.bq,{children:(0,r.jsx)(I.yv,{placeholder:"Select checklist type"})})}),(0,r.jsxs)(I.gC,{children:[(0,r.jsx)(I.eb,{value:"generic_todo",children:"Generic To-Do"}),(0,r.jsx)(I.eb,{value:"readiness_assessment",children:"Readiness Assessment"}),(0,r.jsx)(I.eb,{value:"child_relationship_assessment",children:"Child Relationship Assessment"}),(0,r.jsx)(I.eb,{value:"self_reflection",children:"Self Reflection"})]})]}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(O.w,{}),(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Checklist Items"}),n.map((e,t)=>(0,r.jsxs)("div",{className:"p-4 border rounded-md space-y-3 relative bg-background shadow-sm",children:[(0,r.jsx)(V.zB,{control:i.control,name:`items.${t}.text`,render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Item Text"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.p,{placeholder:"Checklist item text",...e})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:`items.${t}.itemType`,render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Item Type"}),(0,r.jsxs)(I.l6,{onValueChange:s=>{e.onChange(s),"checkbox"===s?i.setValue(`items.${t}.options`,[]):!i.getValues(`items.${t}.options`)?.length&&(s.startsWith("multiple_choice")||"scale"===s)&&i.setValue(`items.${t}.options`,[{id:F("opt"),text:"Option 1",value:1}])},defaultValue:e.value,children:[(0,r.jsx)(V.MJ,{children:(0,r.jsx)(I.bq,{children:(0,r.jsx)(I.yv,{placeholder:"Select item type"})})}),(0,r.jsxs)(I.gC,{children:[(0,r.jsx)(I.eb,{value:"checkbox",children:"Checkbox"}),(0,r.jsx)(I.eb,{value:"multiple_choice_single",children:"Multiple Choice (Single)"}),(0,r.jsx)(I.eb,{value:"multiple_choice_multiple",children:"Multiple Choice (Multiple)"}),(0,r.jsx)(I.eb,{value:"scale",children:"Scale (e.g., 1-5)"})]})]}),(0,r.jsx)(V.C5,{})]})}),(i.watch(`items.${t}.itemType`)?.startsWith("multiple_choice")||"scale"===i.watch(`items.${t}.itemType`))&&(0,r.jsxs)("div",{className:"pl-4 border-l-2 ml-2 space-y-2",children:[(0,r.jsx)(V.lR,{className:"text-sm",children:"Options"}),i.watch(`items.${t}.options`)?.map((e,s)=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(V.zB,{control:i.control,name:`items.${t}.options.${s}.text`,render:({field:e})=>r.jsx(T.p,{placeholder:`Option ${s+1} text`,...e,className:"flex-grow"})}),"scale"!==i.watch(`items.${t}.itemType`)&&r.jsx(V.zB,{control:i.control,name:`items.${t}.options.${s}.value`,render:({field:e})=>r.jsx(T.p,{type:"text",placeholder:"Value",...e,className:"w-20"})}),r.jsx(c.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>u(t,s),children:r.jsx(P.A,{className:"h-4 w-4 text-destructive"})})]},e.id||s)),(0,r.jsxs)(c.$,{type:"button",variant:"outline",size:"sm",onClick:()=>m(t),children:[(0,r.jsx)(q.A,{className:"h-4 w-4 mr-2"})," Add Option"]})]}),(0,r.jsx)(V.zB,{control:i.control,name:`items.${t}.category`,render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Category (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.p,{placeholder:"e.g., Work, Home",...e})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:`items.${t}.details`,render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Details (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.T,{placeholder:"Additional details or instructions",...e,rows:1})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsxs)(c.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>o(t),className:"absolute top-2 right-2 text-destructive hover:bg-destructive/10",children:[(0,r.jsx)(P.A,{className:"h-4 w-4 mr-1"})," Remove Item"]})]},e.id)),(0,r.jsxs)(c.$,{type:"button",variant:"outline",onClick:()=>l({id:F("item"),text:"",itemType:"checkbox",options:[]}),children:[(0,r.jsx)(q.A,{className:"h-4 w-4 mr-2"})," Add Checklist Item"]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 sticky bottom-0 bg-popover py-3 border-t",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),(0,r.jsx)(c.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save Checklist"})]})]})})}let G=(e="item")=>`${e}-${Date.now()}-${Math.random().toString(36).substring(2,7)}`,W=z.Ik({id:z.Yj(),title:z.Yj().min(1,"Title is required"),description:z.Yj().min(1,"Description is required"),userNotes:z.Yj().optional()}),Z=W.extend({type:z.eu("todo_list"),todoItems:z.YO(z.Ik({id:z.Yj(),text:z.Yj().min(1,"To-do text is required")})).min(1,"At least one to-do item is required.")}),H=W.extend({type:z.eu("journal_prompt")}),X=W.extend({type:z.eu("dialogue_activity"),dialoguePrompt:z.Yj().min(1,"Dialogue prompt is required"),dialogueChoices:z.YO(z.Ik({id:z.Yj(),text:z.Yj().min(1,"Choice text is required"),feedback:z.Yj().optional()})).min(1,"At least one dialogue choice is required.")}),K=W.extend({type:z.eu("conversational_response_practice"),dialoguePrompt:z.Yj().min(1,"Dialogue prompt for practice is required")}),ee=z.gM("type",[Z,H,X,K]);function et({initialData:e,onSubmit:t,onCancel:s}){let i=(0,A.mN)({resolver:(0,S.u)(ee),defaultValues:e}),n=i.watch("type"),{fields:l,append:o,remove:a}=(0,A.jz)({control:i.control,name:"todoItems"}),{fields:d,append:m,remove:u}=(0,A.jz)({control:i.control,name:"dialogueChoices"});return(0,r.jsx)(V.lV,{...i,children:(0,r.jsxs)("form",{onSubmit:i.handleSubmit(t),className:"space-y-6 p-1 max-h-[70vh] overflow-y-auto",children:[(0,r.jsx)(V.zB,{control:i.control,name:"title",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Action Item Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.p,{placeholder:"Enter action item title",...e})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:"description",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Description / Prompt"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.T,{placeholder:"Detailed description or prompt for the user",...e,rows:3})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:"type",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Action Item Type"}),(0,r.jsxs)(I.l6,{onValueChange:t=>{e.onChange(t),"todo_list"!==t||i.getValues("todoItems")?.length?"todo_list"!==t&&i.setValue("todoItems",void 0):i.setValue("todoItems",[{id:G("todo"),text:""}]),"dialogue_activity"!==t||i.getValues("dialogueChoices")?.length?"dialogue_activity"!==t&&(i.setValue("dialogueChoices",void 0),"conversational_response_practice"!==t&&i.setValue("dialoguePrompt",void 0)):(i.setValue("dialoguePrompt",i.getValues("description")||""),i.setValue("dialogueChoices",[{id:G("choice"),text:"",feedback:""}])),"conversational_response_practice"!==t||i.getValues("dialoguePrompt")||i.setValue("dialoguePrompt",i.getValues("description")||"")},defaultValue:e.value,children:[(0,r.jsx)(V.MJ,{children:(0,r.jsx)(I.bq,{children:(0,r.jsx)(I.yv,{placeholder:"Select action item type"})})}),(0,r.jsxs)(I.gC,{children:[(0,r.jsx)(I.eb,{value:"todo_list",children:"To-Do List"}),(0,r.jsx)(I.eb,{value:"journal_prompt",children:"Journal Prompt"}),(0,r.jsx)(I.eb,{value:"dialogue_activity",children:"Dialogue Activity (Multiple Choice)"}),(0,r.jsx)(I.eb,{value:"conversational_response_practice",children:"Conversational Response Practice"})]})]}),(0,r.jsx)(V.C5,{})]})}),"todo_list"===n&&(0,r.jsxs)("div",{className:"space-y-3 p-3 border rounded-md bg-muted/30",children:[(0,r.jsx)(V.lR,{children:"To-Do Items"}),l.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(V.zB,{control:i.control,name:`todoItems.${t}.text`,render:({field:e})=>(0,r.jsx)(T.p,{placeholder:`To-do item ${t+1}`,...e,className:"flex-grow"})}),(0,r.jsx)(c.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>a(t),children:(0,r.jsx)(P.A,{className:"h-4 w-4 text-destructive"})})]},e.id)),(0,r.jsxs)(c.$,{type:"button",variant:"outline",size:"sm",onClick:()=>o({id:G("todo"),text:""}),children:[(0,r.jsx)(q.A,{className:"h-4 w-4 mr-2"})," Add To-Do Item"]}),(0,r.jsx)(V.C5,{children:i.formState.errors?.todoItems?.message})]}),("dialogue_activity"===n||"conversational_response_practice"===n)&&(0,r.jsx)(V.zB,{control:i.control,name:"dialoguePrompt",render:({field:e})=>(0,r.jsxs)(V.eI,{className:"p-3 border rounded-md bg-muted/30",children:[(0,r.jsx)(V.lR,{children:"dialogue_activity"===n?"Dialogue Activity Prompt":"Practice Scenario Prompt"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.T,{placeholder:"Enter the main prompt or scenario",...e,rows:3})}),(0,r.jsx)(V.C5,{})]})}),"dialogue_activity"===n&&(0,r.jsxs)("div",{className:"space-y-3 p-3 border rounded-md bg-muted/30",children:[(0,r.jsx)(V.lR,{children:"Dialogue Choices"}),d.map((e,t)=>(0,r.jsxs)("div",{className:"space-y-2 p-2 border rounded bg-background",children:[(0,r.jsx)(V.zB,{control:i.control,name:`dialogueChoices.${t}.text`,render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsxs)(V.lR,{children:["Choice ",t+1," Text"]}),(0,r.jsx)(T.p,{placeholder:"Text for this choice",...e}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:`dialogueChoices.${t}.feedback`,render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Feedback for this choice (Optional)"}),(0,r.jsx)(Y.T,{placeholder:"Feedback if user selects this",...e,rows:2})]})}),(0,r.jsxs)(c.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>u(t),className:"text-destructive float-right",children:[(0,r.jsx)(P.A,{className:"h-4 w-4 mr-1"}),"Remove Choice"]})]},e.id)),(0,r.jsxs)(c.$,{type:"button",variant:"outline",size:"sm",onClick:()=>m({id:G("choice"),text:"",feedback:""}),children:[(0,r.jsx)(q.A,{className:"h-4 w-4 mr-2"})," Add Choice"]}),(0,r.jsx)(V.C5,{children:i.formState.errors?.dialogueChoices?.message})]}),"journal_prompt"===n&&(0,r.jsx)(V.Rr,{children:"The main description field above serves as the journal prompt for the user. Users will be provided a text area to write their reflections."}),"conversational_response_practice"===n&&(0,r.jsx)(V.Rr,{children:"The prompt field above sets the scenario. Users will be provided a text area to practice their response."}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 sticky bottom-0 bg-popover py-3 border-t",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),(0,r.jsx)(c.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save Action Item"})]})]})})}let es=(e="vid")=>`${e}-${Date.now()}-${Math.random().toString(36).substring(2,7)}`,er=z.Ik({id:z.Yj(),title:z.Yj().min(1,"Video title is required"),url:z.Yj().url("Must be a valid URL").min(1,"URL is required"),description:z.Yj().optional(),thumbnailUrl:z.Yj().url().optional().or(z.eu("")),duration:z.KC([z.Yj().regex(/^\d{1,2}:\d{2}$/,"Duration should be in MM:SS format."),z.eu("")]).optional()}),ei=z.Ik({id:z.Yj(),title:z.Yj().min(1,"Group title is required"),videos:z.YO(er).min(1,"At least one video is required for a choice group."),selectionRule:z.k5(["choose_one","complete_all"])});function en({initialData:e,onSubmit:t,onCancel:s}){let n=(0,A.mN)({resolver:(0,S.u)(ei),defaultValues:e}),{fields:l,append:o,remove:a,update:d}=(0,A.jz)({control:n.control,name:"videos"}),[u,h]=(0,i.useState)(null),[p,x]=(0,i.useState)(!1),j=e=>{h(e),x(!0)};return(0,r.jsx)(V.lV,{...n,children:(0,r.jsxs)("form",{onSubmit:n.handleSubmit(t),className:"space-y-6 p-1 max-h-[70vh] overflow-y-auto",children:[(0,r.jsx)(V.zB,{control:n.control,name:"title",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Video Choice Group Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.p,{placeholder:"e.g., Choose Your Focus Area",...e})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:n.control,name:"selectionRule",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Selection Rule"}),(0,r.jsxs)(I.l6,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,r.jsx)(V.MJ,{children:(0,r.jsx)(I.bq,{children:(0,r.jsx)(I.yv,{placeholder:"Select rule"})})}),(0,r.jsxs)(I.gC,{children:[(0,r.jsx)(I.eb,{value:"choose_one",children:"Choose One"}),(0,r.jsx)(I.eb,{value:"complete_all",children:"Complete All (View All)"})]})]}),(0,r.jsx)(V.Rr,{children:"How should users interact with these videos?"}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsxs)("div",{className:"space-y-3 p-3 border rounded-md bg-muted/30",children:[(0,r.jsx)(V.lR,{children:"Videos in this Group"}),l.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-md bg-background shadow-sm",children:[(0,r.jsxs)("div",{className:"flex-grow",children:[(0,r.jsx)("p",{className:"font-medium",children:n.watch(`videos.${t}.title`)}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:n.watch(`videos.${t}.url`)})]}),(0,r.jsxs)("div",{className:"space-x-2 shrink-0",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",size:"sm",onClick:()=>j(t),children:"Edit"}),(0,r.jsx)(c.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>a(t),className:"text-destructive hover:bg-destructive/10",children:(0,r.jsx)(P.A,{className:"h-4 w-4"})})]})]},e.id)),(0,r.jsxs)(c.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{o({id:es("vidchoice"),title:`New Video ${l.length+1}`,url:"",description:"",thumbnailUrl:"",duration:""}),h(l.length),x(!0)},children:[(0,r.jsx)(q.A,{className:"h-4 w-4 mr-2"})," Add New Video to Group"]}),(0,r.jsx)(V.C5,{children:n.formState.errors.videos?.message||n.formState.errors.videos?.root?.message})]}),(0,r.jsx)(m.lG,{open:p,onOpenChange:e=>{x(e),e||h(null)},children:(0,r.jsxs)(m.Cf,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)(m.c7,{children:(0,r.jsx)(m.L3,{children:null!==u&&l[u]?"Edit Video":"Add New Video"})}),null!==u&&l[u]&&(0,r.jsx)(E,{initialData:l[u],onSubmit:e=>{null!==u&&d(u,e),x(!1),h(null)},onCancel:()=>{x(!1),h(null)}})]})}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 sticky bottom-0 bg-popover py-3 border-t",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),(0,r.jsx)(c.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save Video Group"})]})]})})}let el=z.Ik({id:z.Yj(),title:z.Yj().min(1,"Link title is required"),scenarioId:z.Yj().min(1,"Scenario ID must be selected or entered")});function eo({initialData:e,onSubmit:t,onCancel:s}){let i=(0,A.mN)({resolver:(0,S.u)(el),defaultValues:{id:e.id,title:e.title,scenarioId:e.scenarioId}});return(0,r.jsx)(V.lV,{...i,children:(0,r.jsxs)("form",{onSubmit:i.handleSubmit(t),className:"space-y-6 p-1",children:[(0,r.jsx)(V.zB,{control:i.control,name:"title",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Link Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.p,{placeholder:"e.g., Practice: Handling Toddler Tantrums",...e})}),(0,r.jsx)(V.Rr,{children:"This title will be displayed to the user for this scenario link."}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:"scenarioId",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Scenario ID"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.p,{placeholder:"Enter the ID of the interactive scenario",...e})}),(0,r.jsx)(V.Rr,{children:"The unique ID of the interactive scenario to link to. Ensure this ID exists."}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),(0,r.jsx)(c.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save Scenario Link"})]})]})})}let ea=(e="item")=>`${e}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,ec=z.Ik({id:z.Yj().default(()=>ea("opt")),text:z.Yj().min(1,"Option text is required"),value:z.au.number().int("Value must be an integer (e.g., 1-5)")}),ed=z.Ik({id:z.Yj().default(()=>ea("q")),text:z.Yj().min(1,"Question text is required"),options:z.YO(ec).length(5,"Each question must have exactly 5 options.")}),em=z.Ik({id:z.Yj().default(()=>ea("resComment")),scoreRange:z.PV([z.au.number({invalid_type_error:"Min score must be a number."}),z.au.number({invalid_type_error:"Max score must be a number."})]).refine(e=>e[0]<=e[1],{message:"Min score must be less than or equal to max score.",path:["0"]}),categoryLabel:z.Yj().min(1,"Category label is required (e.g., 매우높음)"),comment:z.Yj().min(1,"Result comment is required")}),eu=z.Ik({id:z.Yj().default(()=>ea("factor")),title:z.Yj().min(1,"Factor title is required"),scoringMethod:z.k5(["sum","average"]).default("sum").optional(),questions:z.YO(ed).min(1,"At least one question is required for a factor.").max(15,"Maximum 15 questions per factor."),factorResultComments:z.YO(em).min(1,"At least one result comment is required for a factor.")}),eh=z.Ik({id:z.Yj().default(()=>ea("psychTest")),title:z.Yj().min(1,"Test title is required"),description:z.Yj().optional(),overallScoringMethod:z.k5(["sum","average"]).default("sum").optional(),factors:z.YO(eu).min(1,"At least one factor is required."),overallResultComments:z.YO(em).min(1,"At least one overall result comment is required.")}),ep=()=>Array.from({length:5},(e,t)=>({id:ea("opt"),text:`선택지 ${t+1}`,value:t+1}));function ex({initialData:e,onSubmit:t,onCancel:s}){let i=(0,A.mN)({resolver:(0,S.u)(eh),defaultValues:{id:e.id||ea("psychTest"),title:e.title||"",description:e.description||"",overallScoringMethod:e.overallScoringMethod||"sum",factors:e.factors?.length>0?e.factors.map(e=>({...e,id:e.id||ea("factor"),scoringMethod:e.scoringMethod||"sum",questions:e.questions?.map(e=>({...e,id:e.id||ea("q"),options:e.options?.map(e=>({...e,id:e.id||ea("opt")}))||ep()}))||[{id:ea("q"),text:"",options:ep()}],factorResultComments:e.factorResultComments?.map(e=>({...e,id:e.id||ea("resComment")}))||[{id:ea("resComment"),scoreRange:[0,0],categoryLabel:"",comment:""}]})):[{id:ea("factor"),title:"",scoringMethod:"sum",questions:[{id:ea("q"),text:"",options:ep()}],factorResultComments:[{id:ea("resComment"),scoreRange:[0,0],categoryLabel:"",comment:""}]}],overallResultComments:e.overallResultComments?.length>0?e.overallResultComments.map(e=>({...e,id:e.id||ea("resComment")})):[{id:ea("resComment"),scoreRange:[0,0],categoryLabel:"",comment:""}]}}),{fields:n,append:l,remove:o}=(0,A.jz)({control:i.control,name:"factors"}),{fields:a,append:m,remove:u}=(0,A.jz)({control:i.control,name:"overallResultComments"}),h=e=>{let t=i.getValues(`factors.${e}`);if(t&&t.questions.length<15){let s=[...t.questions,{id:ea("q"),text:"",options:ep()}];i.setValue(`factors.${e}.questions`,s)}},p=(e,t)=>{let s=i.getValues(`factors.${e}`);if(s){let r=s.questions.filter((e,s)=>s!==t);i.setValue(`factors.${e}.questions`,r)}},x=e=>{let t=i.getValues(`factors.${e}`);if(t){let s=[...t.factorResultComments,{id:ea("resComment"),scoreRange:[0,0],categoryLabel:"",comment:""}];i.setValue(`factors.${e}.factorResultComments`,s)}},j=(e,t)=>{let s=i.getValues(`factors.${e}`);if(s){let r=s.factorResultComments.filter((e,s)=>s!==t);i.setValue(`factors.${e}.factorResultComments`,r)}};return(0,r.jsx)(V.lV,{...i,children:(0,r.jsxs)("form",{onSubmit:i.handleSubmit(t),className:"space-y-6 p-1 max-h-[75vh] overflow-y-auto pr-4",children:[(0,r.jsx)(V.zB,{control:i.control,name:"title",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Psychological Test Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.p,{placeholder:"e.g., Parenting Style Inventory",...e})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:"description",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Description (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.T,{placeholder:"Brief description of the test",...e,rows:2})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:"overallScoringMethod",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Overall Score Calculation Method (총점 계산 방식)"}),(0,r.jsxs)(I.l6,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,r.jsx)(V.MJ,{children:(0,r.jsx)(I.bq,{children:(0,r.jsx)(I.yv,{placeholder:"Select scoring method"})})}),(0,r.jsxs)(I.gC,{children:[(0,r.jsx)(I.eb,{value:"sum",children:"Sum of Scores (합산)"}),(0,r.jsx)(I.eb,{value:"average",children:"Average of Scores (평균)"})]})]}),(0,r.jsx)(V.Rr,{children:"How the final overall score from all factors/questions should be calculated."}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(O.w,{}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-primary",children:"Factors (Sub-scales)"}),n.map((e,t)=>(0,r.jsxs)(d.Zp,{className:"p-4 space-y-4 bg-muted/30 relative",children:[(0,r.jsx)(d.aR,{className:"p-2",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)(V.zB,{control:i.control,name:`factors.${t}.title`,render:({field:e})=>(0,r.jsxs)(V.eI,{className:"flex-grow mr-2",children:[(0,r.jsxs)(V.lR,{children:["Factor ",t+1," Title"]}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.p,{placeholder:"e.g., Emotional Regulation",...e})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:`factors.${t}.scoringMethod`,render:({field:e})=>(0,r.jsxs)(V.eI,{className:"w-1/3",children:[(0,r.jsx)(V.lR,{children:"Factor Scoring"}),(0,r.jsxs)(I.l6,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,r.jsx)(V.MJ,{children:(0,r.jsx)(I.bq,{children:(0,r.jsx)(I.yv,{placeholder:"Method"})})}),(0,r.jsxs)(I.gC,{children:[(0,r.jsx)(I.eb,{value:"sum",children:"Sum"}),(0,r.jsx)(I.eb,{value:"average",children:"Average"})]})]}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(c.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>o(t),className:"ml-2 text-destructive self-end",children:(0,r.jsx)(P.A,{className:"h-5 w-5"})})]})}),(0,r.jsxs)(d.Wu,{className:"p-2 space-y-3",children:[(0,r.jsxs)("h4",{className:"text-md font-medium",children:["Questions for Factor ",t+1," (Max 15)"]}),i.watch(`factors.${t}.questions`).map((e,s)=>(0,r.jsxs)(d.Zp,{className:"p-3 space-y-2 bg-background shadow-sm relative",children:[(0,r.jsx)(V.zB,{control:i.control,name:`factors.${t}.questions.${s}.text`,render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsxs)(V.lR,{children:["Question ",s+1]}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.T,{placeholder:"Enter question text",...e,rows:2})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.lR,{className:"text-xs",children:"Options (Exactly 5, values 1-5 recommended)"}),i.watch(`factors.${t}.questions.${s}.options`).map((e,n)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(V.zB,{control:i.control,name:`factors.${t}.questions.${s}.options.${n}.text`,render:({field:e})=>(0,r.jsx)(T.p,{placeholder:`Option ${n+1} Text`,...e,className:"flex-grow"})}),(0,r.jsx)(V.zB,{control:i.control,name:`factors.${t}.questions.${s}.options.${n}.value`,render:({field:e})=>(0,r.jsx)(T.p,{type:"number",placeholder:"Val",...e,className:"w-20"})})]},e.id||n)),(0,r.jsx)(V.C5,{children:i.formState.errors.factors?.[t]?.questions?.[s]?.options?.message}),(0,r.jsx)(c.$,{type:"button",variant:"ghost",size:"xs",onClick:()=>p(t,s),className:"absolute top-1 right-1 text-destructive hover:bg-destructive/10",children:(0,r.jsx)(P.A,{className:"h-3 w-3"})})]},e.id||s)),i.watch(`factors.${t}.questions`).length<15&&(0,r.jsxs)(c.$,{type:"button",variant:"outline",size:"sm",onClick:()=>h(t),children:[(0,r.jsx)(q.A,{className:"h-4 w-4 mr-2"})," Add Question to Factor"]}),(0,r.jsx)(V.C5,{children:i.formState.errors.factors?.[t]?.questions?.message}),(0,r.jsx)(O.w,{className:"my-3"}),(0,r.jsxs)("h4",{className:"text-md font-medium",children:["Result Comments for Factor ",t+1]}),i.watch(`factors.${t}.factorResultComments`).map((e,s)=>(0,r.jsxs)(d.Zp,{className:"p-3 space-y-2 bg-background shadow-sm relative",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsx)(V.zB,{control:i.control,name:`factors.${t}.factorResultComments.${s}.scoreRange.0`,render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Min Score"}),(0,r.jsx)(T.p,{type:"number",...e}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:`factors.${t}.factorResultComments.${s}.scoreRange.1`,render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Max Score"}),(0,r.jsx)(T.p,{type:"number",...e}),(0,r.jsx)(V.C5,{})]})})]}),(0,r.jsx)(V.C5,{children:i.formState.errors.factors?.[t]?.factorResultComments?.[s]?.scoreRange?.message}),(0,r.jsx)(V.zB,{control:i.control,name:`factors.${t}.factorResultComments.${s}.categoryLabel`,render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Category Label"}),(0,r.jsx)(T.p,{placeholder:"e.g., 매우높음",...e}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:`factors.${t}.factorResultComments.${s}.comment`,render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Comment"}),(0,r.jsx)(Y.T,{placeholder:"Comment for this score range",...e,rows:2}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(c.$,{type:"button",variant:"ghost",size:"xs",onClick:()=>j(t,s),className:"absolute top-1 right-1 text-destructive hover:bg-destructive/10",children:(0,r.jsx)(P.A,{className:"h-3 w-3"})})]},e.id||s)),(0,r.jsxs)(c.$,{type:"button",variant:"outline",size:"sm",onClick:()=>x(t),children:[(0,r.jsx)(q.A,{className:"h-4 w-4 mr-2"})," Add Result Comment for Factor"]}),(0,r.jsx)(V.C5,{children:i.formState.errors.factors?.[t]?.factorResultComments?.message})]})]},e.id)),(0,r.jsxs)(c.$,{type:"button",variant:"outline",onClick:()=>l({id:ea("factor"),title:"",scoringMethod:"sum",questions:[{id:ea("q"),text:"",options:ep()}],factorResultComments:[{id:ea("resComment"),scoreRange:[0,0],categoryLabel:"",comment:""}]}),children:[(0,r.jsx)(q.A,{className:"h-4 w-4 mr-2"})," Add Factor"]}),(0,r.jsx)(V.C5,{children:i.formState.errors.factors?.message||i.formState.errors.factors?.root?.message}),(0,r.jsx)(O.w,{}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-primary",children:"Overall Result Comments (총평)"}),a.map((e,t)=>(0,r.jsxs)(d.Zp,{className:"p-3 space-y-2 bg-muted/30 shadow-sm relative",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsx)(V.zB,{control:i.control,name:`overallResultComments.${t}.scoreRange.0`,render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Min Total Score"}),(0,r.jsx)(T.p,{type:"number",...e}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:`overallResultComments.${t}.scoreRange.1`,render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Max Total Score"}),(0,r.jsx)(T.p,{type:"number",...e}),(0,r.jsx)(V.C5,{})]})})]}),(0,r.jsx)(V.C5,{children:i.formState.errors.overallResultComments?.[t]?.scoreRange?.message}),(0,r.jsx)(V.zB,{control:i.control,name:`overallResultComments.${t}.categoryLabel`,render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Overall Category Label"}),(0,r.jsx)(T.p,{placeholder:"e.g., 매우 균형적",...e}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:`overallResultComments.${t}.comment`,render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Overall Comment"}),(0,r.jsx)(Y.T,{placeholder:"Overall comment for this total score range",...e,rows:2}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(c.$,{type:"button",variant:"ghost",size:"xs",onClick:()=>u(t),className:"absolute top-1 right-1 text-destructive hover:bg-destructive/10",children:(0,r.jsx)(P.A,{className:"h-3 w-3"})})]},e.id)),(0,r.jsxs)(c.$,{type:"button",variant:"outline",onClick:()=>m({id:ea("overallC"),scoreRange:[0,0],categoryLabel:"",comment:""}),children:[(0,r.jsx)(q.A,{className:"h-4 w-4 mr-2"})," Add Overall Result Comment"]}),(0,r.jsx)(V.C5,{children:i.formState.errors.overallResultComments?.message||i.formState.errors.overallResultComments?.root?.message}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 sticky bottom-0 bg-popover py-3 border-t -mx-1 px-1",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),(0,r.jsx)(c.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save Psychological Test"})]})]})})}let ej=(e="item")=>`${e}-${Date.now()}-${Math.random().toString(36).substring(2,7)}`,ef=z.Ik({id:z.Yj(),question:z.Yj().min(1,"Question prompt is required"),answerPlaceholder:z.Yj().optional()}),eg=z.Ik({id:z.Yj(),title:z.Yj().min(1,"Session title is required"),description:z.Yj().optional(),prompts:z.YO(ef).min(1,"At least one prompt is required.").max(10,"Maximum 10 prompts allowed.")});function ey({initialData:e,onSubmit:t,onCancel:s}){let i=(0,A.mN)({resolver:(0,S.u)(eg),defaultValues:e}),{fields:n,append:l,remove:o}=(0,A.jz)({control:i.control,name:"prompts"});return(0,r.jsx)(V.lV,{...i,children:(0,r.jsxs)("form",{onSubmit:i.handleSubmit(t),className:"space-y-6 p-1 max-h-[70vh] overflow-y-auto",children:[(0,r.jsx)(V.zB,{control:i.control,name:"title",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Q&A Session Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.p,{placeholder:"e.g., Weekly Reflection",...e})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:"description",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Description (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.T,{placeholder:"Brief description of the Q&A session",...e,rows:2})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(O.w,{}),(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Prompts (Max 10)"}),n.map((e,t)=>(0,r.jsxs)("div",{className:"p-4 border rounded-md space-y-3 relative bg-muted/20 shadow-sm",children:[(0,r.jsx)(V.zB,{control:i.control,name:`prompts.${t}.question`,render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsxs)(V.lR,{children:["Prompt / Question ",t+1]}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.T,{placeholder:"Enter the question or prompt for the user",...e,rows:2})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:`prompts.${t}.answerPlaceholder`,render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Answer Placeholder (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.p,{placeholder:"e.g., Your thoughts here...",...e})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsxs)(c.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>o(t),className:"absolute top-2 right-2 text-destructive hover:bg-destructive/10",children:[(0,r.jsx)(P.A,{className:"h-4 w-4 mr-1"})," Remove Prompt"]})]},e.id)),n.length<10&&(0,r.jsxs)(c.$,{type:"button",variant:"outline",onClick:()=>l({id:ej("prompt"),question:"",answerPlaceholder:""}),children:[(0,r.jsx)(q.A,{className:"h-4 w-4 mr-2"})," Add Prompt"]}),(0,r.jsx)(V.C5,{children:i.formState.errors?.prompts?.message}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 sticky bottom-0 bg-popover py-3 border-t",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),(0,r.jsx)(c.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save Q&A Session"})]})]})})}let ev=z.Ik({id:z.Yj(),title:z.Yj().min(1,"Reminder title is required (e.g., Weekly Check-in: Core Mission)"),missionTitle:z.Yj().min(1,"The actual mission title is required"),missionDescription:z.Yj().min(1,"Description of the mission is required")});function eb({initialData:e,onSubmit:t,onCancel:s}){let i=(0,A.mN)({resolver:(0,S.u)(ev),defaultValues:e});return(0,r.jsx)(V.lV,{...i,children:(0,r.jsxs)("form",{onSubmit:i.handleSubmit(t),className:"space-y-6 p-1",children:[(0,r.jsx)(V.zB,{control:i.control,name:"title",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Reminder Element Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.p,{placeholder:"e.g., Weekly Check-in: Your Parenting Goal",...e})}),(0,r.jsx)(V.Rr,{children:"The title for this specific reminder element in the week's content."}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:"missionTitle",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Mission Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.p,{placeholder:"e.g., Be a More Present Parent",...e})}),(0,r.jsx)(V.Rr,{children:"The core mission this reminder relates to."}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:"missionDescription",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Mission Description"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.T,{placeholder:"Describe the mission in detail...",...e,rows:3})}),(0,r.jsx)(V.Rr,{children:"A clear explanation of what the mission entails."}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),(0,r.jsx)(c.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save Mission Reminder"})]})]})})}var eC=s(27479);let ew=(e="item")=>`${e}-${Date.now()}-${Math.random().toString(36).substring(2,7)}`,ek=z.Ik({id:z.Yj(),statement:z.Yj().min(1,"Question statement is required"),correctAnswer:z.zM(),explanation:z.Yj().optional()}),eN=z.Ik({id:z.Yj(),title:z.Yj().min(1,"Quiz title is required"),description:z.Yj().optional(),questions:z.YO(ek).min(1,"At least one question is required.")});function eR({initialData:e,onSubmit:t,onCancel:s}){let i=(0,A.mN)({resolver:(0,S.u)(eN),defaultValues:e}),{fields:n,append:l,remove:o}=(0,A.jz)({control:i.control,name:"questions"});return(0,r.jsx)(V.lV,{...i,children:(0,r.jsxs)("form",{onSubmit:i.handleSubmit(t),className:"space-y-6 p-1 max-h-[70vh] overflow-y-auto",children:[(0,r.jsx)(V.zB,{control:i.control,name:"title",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"O/X Quiz Title"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(T.p,{placeholder:"e.g., Toddler Sleep Myths",...e})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:"description",render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Description (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.T,{placeholder:"Brief description of the quiz",...e,rows:2})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(O.w,{}),(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Quiz Questions"}),n.map((e,t)=>(0,r.jsxs)("div",{className:"p-4 border rounded-md space-y-3 relative bg-muted/20 shadow-sm",children:[(0,r.jsx)(V.zB,{control:i.control,name:`questions.${t}.statement`,render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsxs)(V.lR,{children:["Statement / Question ",t+1]}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.T,{placeholder:"Enter the statement for O/X evaluation",...e,rows:2})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsx)(V.zB,{control:i.control,name:`questions.${t}.correctAnswer`,render:({field:e})=>(0,r.jsxs)(V.eI,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm bg-background",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(V.lR,{children:'Correct Answer is "O" (True/Yes)'}),(0,r.jsx)(V.Rr,{children:'Switch on if "O" (True/Yes) is correct. Off if "X" (False/No) is correct.'})]}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(eC.d,{checked:e.value,onCheckedChange:e.onChange})})]})}),(0,r.jsx)(V.zB,{control:i.control,name:`questions.${t}.explanation`,render:({field:e})=>(0,r.jsxs)(V.eI,{children:[(0,r.jsx)(V.lR,{children:"Explanation (Optional)"}),(0,r.jsx)(V.MJ,{children:(0,r.jsx)(Y.T,{placeholder:"Explanation shown after user answers",...e,rows:1})}),(0,r.jsx)(V.C5,{})]})}),(0,r.jsxs)(c.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>o(t),className:"absolute top-2 right-2 text-destructive hover:bg-destructive/10",children:[(0,r.jsx)(P.A,{className:"h-4 w-4 mr-1"})," Remove Question"]})]},e.id)),(0,r.jsxs)(c.$,{type:"button",variant:"outline",onClick:()=>l({id:ew("oxq"),statement:"",correctAnswer:!0,explanation:""}),children:[(0,r.jsx)(q.A,{className:"h-4 w-4 mr-2"})," Add Question"]}),(0,r.jsx)(V.C5,{children:i.formState.errors?.questions?.message}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 sticky bottom-0 bg-popover py-3 border-t",children:[(0,r.jsx)(c.$,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),(0,r.jsx)(c.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save O/X Quiz"})]})]})})}let eq=e=>`${e}-${Date.now()}-${Math.random().toString(36).substring(2,7)}`,e$=e=>{let t=eq(`le-stub-${e}`),s=eq(`content-stub-${e}`);switch(e){case"video":return{id:t,type:e,content:{id:s,title:"New Video (Edit Later)",url:""}};case"video_choice_group":return{id:t,type:e,content:{id:s,title:"New Video Choice Group (Edit Later)",videos:[],selectionRule:"choose_one"}};case"checklist":return{id:t,type:e,content:{id:s,title:"New Checklist (Edit Later)",items:[],type:"generic_todo"}};case"action_item":return{id:t,type:e,content:{id:s,title:"New Action Item (Edit Later)",description:"",type:"todo_list",todoItems:[]}};case"interactive_scenario_link":return{id:t,type:e,scenarioId:"",title:"New Interactive Scenario (Link Later)"};case"text_content":return{id:t,type:e,content:{id:s,title:"New Text Content (Edit Later)",type:"article",content:""}};case"psychological_test":return{id:t,type:e,content:{id:s,title:"New Psychological Test (Edit Later)",factors:[],overallResultComments:[]}};case"qa_session":return{id:t,type:e,content:{id:s,title:"New Q&A Session (Edit Later)",prompts:[]}};case"mission_reminder":return{id:t,type:e,content:{id:s,title:"New Mission Reminder (Edit Later)",missionTitle:"",missionDescription:""}};case"ox_quiz":return{id:t,type:e,content:{id:s,title:"New O/X Quiz (Edit Later)",questions:[]}};default:return console.warn(`Unknown learning element type: ${e}, creating a default text_content placeholder.`),{id:t,type:"text_content",content:{id:s,title:"New Content (Edit Later)",type:"article",content:""}}}},e_=[{id:"video",label:"Video Content"},{id:"video_choice_group",label:"Video Choice Group"},{id:"checklist",label:"Checklist"},{id:"action_item",label:"Action Item"},{id:"interactive_scenario_link",label:"Interactive Scenario Link"},{id:"text_content",label:"Text Content (Article, Link)"},{id:"psychological_test",label:"Psychological Test (5-choice)"},{id:"qa_session",label:"Q&A Session"},{id:"mission_reminder",label:"Mission Reminder"},{id:"ox_quiz",label:"O/X Quiz"}],eI=e=>e.title?e.title:"content"in e&&e.content&&"string"==typeof e.content.title?e.content.title:"interactive_scenario_link"===e.type&&"scenarioId"in e&&e.scenarioId?`Scenario: ${e.scenarioId}`:`Untitled ${e.type.replace(/_/g," ")}`,eM={video:h,video_choice_group:h,checklist:p.A,action_item:x.A,interactive_scenario_link:j.A,text_content:f.A,psychological_test:g.A,qa_session:y.A,mission_reminder:v.A,ox_quiz:b.A};function eA(){(0,n.useRouter)();let{programId:e,weekId:t}=(0,n.useParams)(),{toast:s}=(0,$.dj)(),[l,u]=(0,i.useState)(null),[h,p]=(0,i.useState)(null),[j,f]=(0,i.useState)(null),[g,y]=(0,i.useState)(null),[v,b]=(0,i.useState)(!0),[A,S]=(0,i.useState)(null),[z,T]=(0,i.useState)(""),Y=async e=>{if(!l)return!1;let{id:t,...s}=e,r=await (0,_.El)(l,s);if(r){f(e);let t=e.weeks?.find(e=>e.id===h);t&&y(t)}return r},V=async e=>{if(!j||!g||!l)return;let t={...g,weekNumber:e.weekNumber,title:e.title,summary:e.summary,sequentialCompletionRequired:e.sequentialCompletionRequired,learningElements:g.learningElements||[]},r=(j.weeks||[]).map(e=>e.id===h?t:e).sort((e,t)=>e.weekNumber-t.weekNumber),i={...j,weeks:r};await Y(i)?s({title:"Week Details Updated",description:`Week ${t.weekNumber} details saved.`}):s({title:"Error",description:"Failed to update week details.",variant:"destructive"})},B=async e=>{if(!j||!g||!A||!l)return;let t=(g.learningElements||[]).map(t=>t.id===A.id?{...t,content:e}:t),r={...g,learningElements:t},i=(j.weeks||[]).map(e=>e.id===h?r:e),n={...j,weeks:i};await Y(n)?(S(null),s({title:"Learning Element Updated",description:`Content for "${eI(A)}" saved.`})):s({title:"Error",description:"Failed to save learning element.",variant:"destructive"})},L=async e=>{if(!j||!g||!A||"interactive_scenario_link"!==A.type||!l)return;let t=(g.learningElements||[]).map(t=>t.id===A.id?{...t,title:e.title,scenarioId:e.scenarioId}:t),r={...g,learningElements:t},i=(j.weeks||[]).map(e=>e.id===h?r:e),n={...j,weeks:i};await Y(n)?(S(null),s({title:"Interactive Scenario Link Updated",description:`Link "${e.title}" saved.`})):s({title:"Error",description:"Failed to save scenario link.",variant:"destructive"})},P=async(e,t)=>{if(!j||!g||!g.learningElements)return;let r=[...g.learningElements],i=r.findIndex(t=>t.id===e);if(-1===i)return;if("up"===t&&i>0)[r[i-1],r[i]]=[r[i],r[i-1]];else{if("down"!==t||!(i<r.length-1))return;[r[i+1],r[i]]=[r[i],r[i+1]]}let n={...g,learningElements:r},l=(j.weeks||[]).map(e=>e.id===h?n:e),o={...j,weeks:l};await Y(o)?s({title:"Content Reordered",description:"Learning element order updated."}):s({title:"Error",description:"Failed to reorder content.",variant:"destructive"})},O=async()=>{if(!j||!g||!z||!l){s({title:"Error",description:"Please select an element type to add.",variant:"destructive"});return}let e=e$(z),t=[...g.learningElements||[],e],r={...g,learningElements:t},i=(j.weeks||[]).map(e=>e.id===h?r:e),n={...j,weeks:i};await Y(n)?(s({title:"Learning Element Added",description:`A new "${z.replace(/_/g," ")}" has been added.`}),T("")):s({title:"Error",description:"Failed to add learning element.",variant:"destructive"})};if(v)return(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("p",{children:"Loading week details..."})});if(!j||!g)return(0,r.jsxs)("div",{className:"text-center py-10",children:["Program or Week not found.",(0,r.jsx)(o(),{href:l?`/admin/programs/${l}/edit`:"/admin/programs",className:"text-accent underline ml-2",children:"Go back to program"}),"."]});let J=g.learningElements||[];return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-start",children:(0,r.jsx)(c.$,{variant:"outline",size:"sm",asChild:!0,children:(0,r.jsxs)(o(),{href:l?`/admin/programs/${l}/edit`:"/admin/programs",children:[(0,r.jsx)(C.A,{className:"mr-2 h-4 w-4"}),"Back to Program Management"]})})}),(0,r.jsxs)(d.Zp,{className:"max-w-3xl mx-auto shadow-lg",children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsxs)(d.ZB,{className:"text-2xl text-primary",children:["Edit Week ",g.weekNumber,' for "',j.title,'"']}),(0,r.jsx)(d.BT,{children:"Modify the basic details for this week. Manage content elements below."})]}),(0,r.jsx)(d.Wu,{children:(0,r.jsx)(a.j,{initialData:{weekNumber:g.weekNumber,title:g.title,summary:g.summary,sequentialCompletionRequired:g.sequentialCompletionRequired},onSubmit:V,isEditing:!0})})]}),(0,r.jsxs)(d.Zp,{className:"max-w-3xl mx-auto shadow-lg mt-6",children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{className:"text-xl text-primary",children:"Manage Week Content"}),(0,r.jsx)(d.BT,{children:"Edit or reorder individual learning elements for this week. Add new elements below."})]}),(0,r.jsx)(d.Wu,{className:"space-y-4",children:J.length>0?J.map((e,t)=>{let s=eM[e.type]||x.A;return(0,r.jsx)(d.Zp,{className:"shadow-sm",children:(0,r.jsxs)(d.aR,{className:"flex flex-row items-center justify-between py-3 px-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(w,{className:"h-5 w-5 text-muted-foreground cursor-move"}),(0,r.jsx)(s,{className:"h-5 w-5 text-muted-foreground"}),(0,r.jsx)(d.ZB,{className:"text-md",children:eI(e)}),(0,r.jsx)("span",{className:"text-xs px-2 py-0.5 bg-muted text-muted-foreground rounded-full capitalize",children:e.type.replace(/_/g," ")})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>P(e.id,"up"),disabled:0===t,"aria-label":"Move up",children:(0,r.jsx)(k,{className:"h-4 w-4"})}),(0,r.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>P(e.id,"down"),disabled:t===J.length-1,"aria-label":"Move down",children:(0,r.jsx)(N,{className:"h-4 w-4"})}),(0,r.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>S(e),children:[(0,r.jsx)(R.A,{className:"mr-2 h-4 w-4"})," Edit"]})]})]})},e.id)}):(0,r.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No learning elements defined for this week yet. Add them below or through the Program's 'Manage Weeks & Content' tab."})}),(0,r.jsxs)(d.wL,{className:"border-t pt-4 space-y-4",children:[(0,r.jsx)(M.J,{className:"text-md font-semibold text-primary block",children:"Add New Learning Element"}),(0,r.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,r.jsxs)("div",{className:"flex-grow",children:[(0,r.jsx)(M.J,{htmlFor:"new-element-type",className:"text-xs text-muted-foreground",children:"Select Type"}),(0,r.jsxs)(I.l6,{value:z,onValueChange:e=>T(e),children:[(0,r.jsx)(I.bq,{id:"new-element-type",children:(0,r.jsx)(I.yv,{placeholder:"Choose an element type..."})}),(0,r.jsx)(I.gC,{children:e_.map(e=>(0,r.jsx)(I.eb,{value:e.id,children:e.label},e.id))})]})]}),(0,r.jsxs)(c.$,{onClick:O,disabled:!z,className:"bg-accent hover:bg-accent/90 text-accent-foreground",children:[(0,r.jsx)(q.A,{className:"mr-2 h-4 w-4"})," Add Element"]})]})]})]}),(0,r.jsx)(m.lG,{open:!!A,onOpenChange:e=>!e&&S(null),children:(0,r.jsxs)(m.Cf,{className:"sm:max-w-2xl max-h-[85vh]",children:[(0,r.jsxs)(m.c7,{children:[(0,r.jsxs)(m.L3,{children:["Edit: ",A?eI(A):"Content"]}),(0,r.jsx)(m.rr,{children:"Modify the details for this learning element."})]}),(0,r.jsx)("div",{className:"py-4 max-h-[calc(85vh-150px)] overflow-y-auto pr-2",children:(()=>{if(!A)return null;switch(A.type){case"video":return(0,r.jsx)(E,{initialData:A.content,onSubmit:B,onCancel:()=>S(null)});case"text_content":return(0,r.jsx)(D,{initialData:A.content,onSubmit:B,onCancel:()=>S(null)});case"checklist":return(0,r.jsx)(Q,{initialData:A.content,onSubmit:B,onCancel:()=>S(null)});case"action_item":return(0,r.jsx)(et,{initialData:A.content,onSubmit:B,onCancel:()=>S(null)});case"video_choice_group":return(0,r.jsx)(en,{initialData:A.content,onSubmit:B,onCancel:()=>S(null)});case"interactive_scenario_link":let e={id:A.id,title:A.title||"",scenarioId:A.scenarioId||""};return(0,r.jsx)(eo,{initialData:e,onSubmit:L,onCancel:()=>S(null)});case"psychological_test":return(0,r.jsx)(ex,{initialData:A.content,onSubmit:B,onCancel:()=>S(null)});case"qa_session":return(0,r.jsx)(ey,{initialData:A.content,onSubmit:B,onCancel:()=>S(null)});case"mission_reminder":return(0,r.jsx)(eb,{initialData:A.content,onSubmit:B,onCancel:()=>S(null)});case"ox_quiz":return(0,r.jsx)(eR,{initialData:A.content,onSubmit:B,onCancel:()=>S(null)});default:return(0,r.jsxs)("p",{children:["No editor available for this content type: ",A.type,"."]})}})()})]})})]})}},50621:(e,t,s)=>{Promise.resolve().then(s.bind(s,46328))},55511:e=>{"use strict";e.exports=require("crypto")},57207:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(82614).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63503:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>m,Es:()=>h,L3:()=>p,c7:()=>u,lG:()=>a,rr:()=>x});var r=s(60687),i=s(43210),n=s(26134),l=s(78726),o=s(4780);let a=n.bL;n.l9;let c=n.ZL;n.bm;let d=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n.hJ,{ref:s,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));d.displayName=n.hJ.displayName;let m=i.forwardRef(({className:e,children:t,...s},i)=>(0,r.jsxs)(c,{children:[(0,r.jsx)(d,{}),(0,r.jsxs)(n.UC,{ref:i,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,(0,r.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=n.UC.displayName;let u=({className:e,...t})=>(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});u.displayName="DialogHeader";let h=({className:e,...t})=>(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});h.displayName="DialogFooter";let p=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n.hE,{ref:s,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));p.displayName=n.hE.displayName;let x=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n.VY,{ref:s,className:(0,o.cn)("text-sm text-muted-foreground",e),...t}));x.displayName=n.VY.displayName},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},91840:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(82614).A)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]])},92865:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(82614).A)("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},92978:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(82614).A)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[4447,166,1658,9396,5728,8808,2729,1758,8767,4835,9823,1509,6413],()=>s(35509));module.exports=r})();