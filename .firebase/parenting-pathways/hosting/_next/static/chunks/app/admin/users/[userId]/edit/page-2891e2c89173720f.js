(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3937],{20895:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var a=r(95155),s=r(12115),i=r(35695),n=r(6874),l=r.n(n),o=r(95996),c=r(39022),d=r(30285),m=r(66695),u=r(12543),h=r(87481),f=r(83013);let p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date(2023,0,1),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return(0,f.GP)(new Date(e.getTime()+Math.random()*(t.getTime()-e.getTime())),"yyyy-MM-dd")};function x(){let e=(0,i.useRouter)(),{userId:t}=(0,i.useParams)(),{toast:r}=(0,h.dj)(),[n,x]=(0,s.useState)(null),[g,v]=(0,s.useState)(null),[y,j]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{"string"==typeof t?x(t):x(null)},[t]),(0,s.useEffect)(()=>{if(n){j(!0);let t=localStorage.getItem("mockUsers"),a=c.rB.map(e=>({...e,email:e.email||"".concat(e.name.toLowerCase().replace(" ","."),"@example.com"),registrationDate:e.registrationDate||p()}));if(t)try{a=JSON.parse(t).map(e=>({...e,email:e.email||"".concat(e.name.toLowerCase().replace(" ","."),"@example.com"),registrationDate:e.registrationDate||p()}))}catch(e){console.error("Error parsing users from localStorage:",e)}let s=a.find(e=>e.id===n);s?v(s):(r({title:"Error",description:"User not found.",variant:"destructive"}),e.push("/admin/users")),j(!1)}else null===t&&j(!1)},[n,e,r,t]),y)?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("p",{children:"Loading user details..."})}):g?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-start",children:(0,a.jsx)(d.$,{variant:"outline",size:"sm",asChild:!0,children:(0,a.jsxs)(l(),{href:"/admin/users",children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Back to All Users"]})})}),(0,a.jsxs)(m.Zp,{className:"max-w-2xl mx-auto shadow-lg",children:[(0,a.jsxs)(m.aR,{children:[(0,a.jsxs)(m.ZB,{className:"text-2xl text-primary",children:["Edit User: ",g.name]}),(0,a.jsx)(m.BT,{children:"Modify the user's information."})]}),(0,a.jsx)(m.Wu,{children:(0,a.jsx)(o.q,{initialData:g,onSubmit:t=>{if(!g||!n)return;let a={...g,name:t.name,email:t.email,phoneNumber:t.phoneNumber||void 0,residentialArea:t.residentialArea,parentalRole:t.parentalRole,children:t.children||[],avatarUrl:t.avatarUrl||g.avatarUrl,registrationDate:t.registrationDate?(0,f.GP)(new Date(t.registrationDate),"yyyy-MM-dd"):g.registrationDate},s=localStorage.getItem("mockUsers"),i=c.rB;if(s)try{i=JSON.parse(s)}catch(e){console.error("Error parsing users from localStorage:",e)}let l=i.findIndex(e=>e.id===n);-1!==l?(i[l]=a,localStorage.setItem("mockUsers",JSON.stringify(i)),v(a),r({title:"User Updated",description:"User details saved successfully."}),e.push("/admin/users")):r({title:"Error",description:"Failed to update user.",variant:"destructive"})},isEditing:!0})})]})]}):(0,a.jsxs)("div",{className:"text-center py-10",children:["User not found. ",(0,a.jsx)(l(),{href:"/admin/users",className:"text-accent underline",children:"Go back"}),"."]})}},97519:(e,t,r)=>{Promise.resolve().then(r.bind(r,20895))}},e=>{var t=t=>e(e.s=t);e.O(0,[5769,6874,1509,1263,9764,1859,5521,5916,1534,8441,1684,7358],()=>t(97519)),_N_E=e.O()}]);